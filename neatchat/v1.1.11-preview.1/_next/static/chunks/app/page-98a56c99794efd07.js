(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{68577:function(){},58870:function(e,t,n){"use strict";var o,a,i=n(52846);function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}t.Z=function(e){return i.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),o||(o=i.createElement("defs",null,i.createElement("path",{id:"add_svg__a",d:"M0 0h16v16H0z"}))),i.createElement("g",null,a||(a=i.createElement("mask",{id:"add_svg__b",fill:"#fff"},i.createElement("use",{xlinkHref:"#add_svg__a"}))),i.createElement("g",{mask:"url(#add_svg__b)"},i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M13.33 6.67A6.66 6.66 0 0 0 6.67 0C2.98 0 0 2.98 0 6.67a6.66 6.66 0 0 0 6.67 6.66c3.68 0 6.66-2.98 6.66-6.66Z",transform:"translate(1.333 1.333)"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0v5.33",transform:"translate(8 5.333)"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0h5.33",transform:"translate(5.333 8)"}))))}},82985:function(e,t,n){"use strict";var o,a,i=n(52846);function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}t.Z=function(e){return i.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),i.createElement("g",null,o||(o=i.createElement("mask",{id:"cancel_svg__b",fill:"#fff"},i.createElement("use",{xlinkHref:"#cancel_svg__a"}))),i.createElement("g",{mask:"url(#cancel_svg__b)"},i.createElement("path",{style:{fill:"#333",opacity:1},d:"M13.997 8.003c0-.816-.157-1.596-.471-2.34a5.947 5.947 0 0 0-1.284-1.907 5.938 5.938 0 0 0-1.905-1.285A5.93 5.93 0 0 0 8.003 2c-.816 0-1.596.157-2.34.47a5.943 5.943 0 0 0-1.907 1.286 5.942 5.942 0 0 0-1.285 1.908A5.955 5.955 0 0 0 2 8.004c0 .813.157 1.591.47 2.333a5.938 5.938 0 0 0 1.286 1.905c.553.553 1.19.98 1.908 1.284.743.314 1.523.47 2.34.47.813 0 1.59-.156 2.333-.47a5.944 5.944 0 0 0 1.905-1.284 5.944 5.944 0 0 0 1.284-1.905c.314-.742.47-1.52.47-2.334zm1.333 0c0 .994-.192 1.945-.576 2.853a7.265 7.265 0 0 1-1.57 2.329 7.265 7.265 0 0 1-2.328 1.57 7.253 7.253 0 0 1-2.853.575 7.278 7.278 0 0 1-2.858-.576 7.27 7.27 0 0 1-2.332-1.569 7.26 7.26 0 0 1-1.57-2.329 7.25 7.25 0 0 1-.576-2.853c0-.996.192-1.949.575-2.858a7.264 7.264 0 0 1 1.571-2.332 7.264 7.264 0 0 1 2.332-1.57A7.275 7.275 0 0 1 8.003.666a7.25 7.25 0 0 1 2.853.576 7.26 7.26 0 0 1 2.329 1.57 7.27 7.27 0 0 1 1.57 2.332c.383.91.575 1.862.575 2.858z"}),i.createElement("path",{style:{fill:"#333",opacity:1},d:"m5.471 4.529 6 6a.666.666 0 1 1-.942.942l-6-6a.665.665 0 1 1 .942-.942z"}))),a||(a=i.createElement("defs",null,i.createElement("path",{id:"cancel_svg__a",d:"M0 0h16v16H0z"}))))}},38669:function(e,t,n){"use strict";var o,a,i=n(52846);function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}t.Z=function(e){return i.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),o||(o=i.createElement("defs",null,i.createElement("path",{id:"close_svg__a",d:"M0 0h16v16H0z"}))),i.createElement("g",null,a||(a=i.createElement("mask",{id:"close_svg__b",fill:"#fff"},i.createElement("use",{xlinkHref:"#close_svg__a"}))),i.createElement("g",{mask:"url(#close_svg__b)"},i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"m0 0 10.67 10.67M0 10.67 10.67 0",transform:"translate(2.667 2.667)"}))))}},12402:function(e,t,n){"use strict";var o,a,i=n(52846);function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}t.Z=function(e){return i.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),i.createElement("g",null,o||(o=i.createElement("mask",{id:"confirm_svg__b",fill:"#fff"},i.createElement("use",{xlinkHref:"#confirm_svg__a"}))),i.createElement("g",{mask:"url(#confirm_svg__b)"},i.createElement("path",{style:{fill:"#333",opacity:1},d:"M5.996 12.892a.67.67 0 0 1-.84-.083l-3.96-3.94a.665.665 0 0 1 .339-1.126.665.665 0 0 1 .602.181l3.49 3.472 8.24-8.202a.663.663 0 0 1 .841-.08.664.664 0 0 1 .244.81.661.661 0 0 1-.145.215l-8.71 8.67a.666.666 0 0 1-.1.083z"}))),a||(a=i.createElement("defs",null,i.createElement("path",{id:"confirm_svg__a",d:"M0 0h16v16H0z"}))))}},15592:function(e,t,n){"use strict";var o,a,i=n(52846);function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}t.Z=function(e){return i.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",width:14.663,height:14.663,fill:"none"},e),i.createElement("g",{style:{mixBlendMode:"passthrough"}},o||(o=i.createElement("path",{fill:"#D8D8D8",fillOpacity:.01,fillRule:"evenodd",d:"M7.337.667c-3.69 0-6.67 2.98-6.67 6.67a6.66 6.66 0 0 0 6.67 6.66c3.68 0 6.66-2.98 6.66-6.66a6.66 6.66 0 0 0-6.66-6.67Z"})),a||(a=i.createElement("path",{fill:"#333",d:"m10.138 5.471-4.667 4.667q-.046.046-.1.083-.055.036-.116.062-.06.025-.125.038-.064.012-.13.012t-.13-.012q-.064-.013-.125-.038-.06-.026-.115-.062-.055-.037-.101-.083-.047-.046-.083-.101-.037-.055-.062-.115-.025-.06-.038-.125-.013-.065-.013-.13 0-.066.013-.13.013-.065.038-.125.025-.061.062-.116.036-.054.083-.1l4.666-4.667q.047-.047.101-.083.055-.037.116-.062.06-.025.125-.038.064-.013.13-.013.065 0 .13.013.064.013.125.038.06.025.115.062.055.036.101.083.046.046.083.1.036.055.062.116.025.06.038.125.012.064.012.13t-.012.13q-.013.064-.038.125-.026.06-.062.115-.037.055-.083.101ZM5.471 4.53l.667.666q.046.047.083.101.036.055.062.116.025.06.038.125.012.064.012.13 0 .065-.012.13-.013.064-.038.125-.026.06-.062.115-.036.055-.083.101-.046.046-.1.083-.056.036-.116.062-.06.025-.125.038-.065.012-.13.012-.066 0-.13-.012-.065-.013-.125-.038-.061-.026-.116-.062-.054-.036-.1-.083l-.667-.667q-.047-.046-.083-.1-.037-.055-.062-.116-.025-.06-.038-.125-.013-.064-.013-.13t.013-.13q.013-.064.038-.125.025-.06.062-.115.036-.055.083-.101.046-.047.1-.083.055-.037.116-.062.06-.025.125-.038.064-.013.13-.013t.13.013q.064.013.125.038.06.025.115.062.055.036.101.083Zm4 4 .667.666q.046.047.083.101.036.055.062.116.025.06.038.125.012.064.012.13 0 .065-.012.13-.013.064-.038.125-.026.06-.062.115-.036.055-.083.101-.046.046-.1.083-.056.036-.116.062-.06.025-.125.038-.065.012-.13.012-.066 0-.13-.012-.065-.013-.125-.038-.061-.026-.116-.062-.054-.036-.1-.083l-.667-.667q-.047-.046-.083-.1-.037-.055-.062-.116-.025-.06-.038-.125-.013-.064-.013-.13t.013-.13q.013-.064.038-.125.025-.06.062-.115.036-.055.083-.101.046-.047.1-.083.055-.037.116-.062.06-.025.125-.038.064-.013.13-.013t.13.013q.064.013.125.038.06.025.115.062.055.036.101.083Zm3.859-1.192q0-2.491-1.755-4.248-1.754-1.756-4.238-1.756-2.492 0-4.248 1.756-1.756 1.756-1.756 4.248 0 2.484 1.756 4.238 1.757 1.755 4.248 1.755 2.484 0 4.238-1.755 1.755-1.754 1.755-4.238Zm1.333 0q0 3.036-2.145 5.181t-5.181 2.145q-3.043 0-5.19-2.145Q0 10.374 0 7.337q0-3.044 2.147-5.19Q4.293 0 7.337 0q3.037 0 5.181 2.147 2.145 2.147 2.145 5.19ZM10.332 5q0 .066-.013.13t-.038.125q-.025.06-.061.114-.037.055-.083.101-.046.047-.1.083-.055.036-.116.061-.06.025-.125.038-.064.013-.13.013-.065 0-.13-.013-.063-.013-.124-.038-.06-.025-.115-.061-.054-.036-.1-.083-.047-.046-.083-.1-.037-.055-.062-.115-.025-.061-.038-.125-.012-.064-.012-.13 0-.065.012-.13.013-.064.038-.124.025-.061.062-.115.036-.055.082-.101.047-.047.101-.083.055-.036.115-.061.06-.025.125-.038.064-.013.13-.013.065 0 .13.013.064.013.124.038t.115.061q.055.036.1.083.047.046.084.1.036.055.061.116.025.06.038.124.013.065.013.13ZM5.665 9.667q0 .065-.013.13-.013.064-.038.124t-.061.115q-.036.055-.083.1-.046.047-.1.084-.055.036-.116.061-.06.025-.124.038-.064.013-.13.013-.065 0-.13-.013-.064-.013-.124-.038-.061-.025-.115-.061-.055-.037-.101-.083-.047-.046-.083-.1-.036-.055-.061-.116-.025-.06-.038-.125-.013-.064-.013-.13 0-.065.013-.13.013-.063.038-.124.025-.06.061-.115.036-.054.083-.1.046-.047.1-.083.055-.037.116-.062.06-.025.124-.038.065-.012.13-.012.066 0 .13.012.064.013.124.038.061.025.115.062.055.036.101.082.047.047.083.101.036.055.061.115.025.06.038.125.013.064.013.13Zm0-4.667q0 .066-.013.13t-.038.125q-.025.06-.061.114-.036.055-.083.101-.046.047-.1.083-.055.036-.116.061-.06.025-.124.038-.064.013-.13.013-.065 0-.13-.013-.064-.013-.124-.038-.061-.025-.115-.061-.055-.036-.101-.083-.047-.046-.083-.1-.036-.055-.061-.115-.025-.061-.038-.125-.013-.064-.013-.13 0-.065.013-.13.013-.064.038-.124.025-.061.061-.115.036-.055.083-.101.046-.047.1-.083.055-.036.116-.061.06-.025.124-.038.065-.013.13-.013.066 0 .13.013t.124.038q.061.025.115.061.055.036.101.083.047.046.083.1.036.055.061.116.025.06.038.124.013.065.013.13Zm.667.667q0 .065-.013.13-.013.064-.038.124t-.061.115q-.037.055-.083.1-.046.047-.1.084-.055.036-.116.061-.06.025-.125.038-.064.013-.13.013-.065 0-.13-.013-.063-.013-.124-.038-.06-.025-.115-.061-.054-.037-.1-.083-.047-.046-.083-.1-.037-.055-.062-.116-.025-.06-.038-.125-.012-.064-.012-.13 0-.065.012-.13.013-.063.038-.124.025-.06.062-.115.036-.054.082-.1.047-.047.101-.083.055-.037.115-.062.06-.025.125-.038.064-.012.13-.012.065 0 .13.012.064.013.124.038t.115.062q.055.036.1.082.047.047.084.101.036.055.061.115.025.06.038.125.013.064.013.13ZM9.665 9q0 .066-.013.13t-.038.125q-.025.06-.061.114-.036.055-.083.101-.046.047-.1.083-.055.036-.116.061-.06.025-.124.038-.064.013-.13.013-.065 0-.13-.013-.064-.013-.124-.038-.061-.025-.115-.061-.055-.036-.101-.083-.047-.046-.083-.1-.036-.055-.061-.115-.025-.061-.038-.125-.013-.064-.013-.13 0-.065.013-.13.013-.064.038-.124.025-.061.061-.115.036-.055.083-.101.046-.047.1-.083.055-.036.116-.061.06-.025.124-.038.065-.013.13-.013.066 0 .13.013t.124.038q.061.025.115.061.055.036.101.083.047.046.083.1.036.055.061.116.025.06.038.124.013.065.013.13Zm.667.667q0 .065-.013.13-.013.064-.038.124t-.061.115q-.037.055-.083.1-.046.047-.1.084-.055.036-.116.061-.06.025-.125.038-.064.013-.13.013-.065 0-.13-.013-.063-.013-.124-.038-.06-.025-.115-.061-.054-.037-.1-.083-.047-.046-.083-.1-.037-.055-.062-.116-.025-.06-.038-.125-.012-.064-.012-.13 0-.065.012-.13.013-.063.038-.124.025-.06.062-.115.036-.054.082-.1.047-.047.101-.083.055-.037.115-.062.06-.025.125-.038.064-.012.13-.012.065 0 .13.012.064.013.124.038t.115.062q.055.036.1.082.047.047.084.101.036.055.061.115.025.06.038.125.013.064.013.13Z"}))))}},36177:function(e,t,n){"use strict";var o,a,i=n(52846);function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}t.Z=function(e){return i.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),i.createElement("g",null,o||(o=i.createElement("mask",{id:"drag_svg__b",fill:"#fff"},i.createElement("use",{xlinkHref:"#drag_svg__a"}))),i.createElement("g",{mask:"url(#drag_svg__b)",fillRule:"evenodd"},i.createElement("path",{style:{fill:"#333"},d:"M6.337 3.33c0 .74-.6 1.34-1.34 1.34a1.336 1.336 0 1 1 1.34-1.34zm-1.34 6a1.33 1.33 0 1 1 0-2.66c.74 0 1.34.59 1.34 1.33 0 .74-.6 1.33-1.34 1.33zm0 4.67a1.336 1.336 0 0 1 0-2.67c.74 0 1.34.6 1.34 1.34 0 .73-.6 1.33-1.34 1.33zM12.337 3.33c0 .74-.6 1.34-1.34 1.34a1.336 1.336 0 1 1 1.34-1.34zm-1.34 6a1.33 1.33 0 1 1 0-2.66c.74 0 1.34.59 1.34 1.33 0 .74-.6 1.33-1.34 1.33zm0 4.67a1.336 1.336 0 0 1 0-2.67c.74 0 1.34.6 1.34 1.34 0 .73-.6 1.33-1.34 1.33z"}))),a||(a=i.createElement("defs",null,i.createElement("path",{id:"drag_svg__a",d:"M0 0h16v16H0z"}))))}},56073:function(e,t,n){"use strict";var o,a=n(52846);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}t.Z=function(e){return a.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 24 24"},e),o||(o=a.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M6.301 15.577C4.778 14.268 3.691 12.773 3.18 12c.51-.773 1.598-2.268 3.121-3.577C7.874 7.072 9.816 6 12 6c2.184 0 4.126 1.072 5.699 2.423 1.523 1.309 2.61 2.804 3.121 3.577-.51.773-1.598 2.268-3.121 3.577C16.126 16.928 14.184 18 12 18c-2.184 0-4.126-1.072-5.699-2.423ZM12 4C9.148 4 6.757 5.395 4.998 6.906c-1.765 1.517-2.99 3.232-3.534 4.064a1.876 1.876 0 0 0 0 2.06c.544.832 1.769 2.547 3.534 4.064C6.758 18.605 9.148 20 12 20c2.852 0 5.243-1.395 7.002-2.906 1.765-1.517 2.99-3.232 3.534-4.064.411-.628.411-1.431 0-2.06-.544-.832-1.769-2.547-3.534-4.064C17.242 5.395 14.852 4 12 4Zm-2 8a2 2 0 1 1 4 0 2 2 0 0 1-4 0Zm2-4a4 4 0 1 0 0 8 4 4 0 0 0 0-8Z",clipRule:"evenodd"})))}},59566:function(e,t,n){"use strict";var o,a,i=n(52846);function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}t.Z=function(e){return i.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),o||(o=i.createElement("defs",null,i.createElement("path",{id:"github_svg__a",d:"M0 0h16v16H0z"}))),i.createElement("g",null,a||(a=i.createElement("mask",{id:"github_svg__b",fill:"#fff"},i.createElement("use",{xlinkHref:"#github_svg__a"}))),i.createElement("g",{mask:"url(#github_svg__b)"},i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M7.11 8.51c.81-.16 1.53-.45 2.1-.87.96-.73 1.46-1.85 1.46-2.95 0-.78-.3-1.5-.81-2.11-.28-.34.55-2.89-.19-2.55-.73.34-1.81 1.1-2.38.94C6.68.79 6.02.69 5.33.69c-.6 0-1.17.07-1.71.21-.79.2-1.53-.54-2.29-.87C.58-.29.99 2.34.77 2.62.28 3.22 0 3.93 0 4.69c0 1.1.6 2.22 1.56 2.95.65.48 1.45.78 2.35.94",transform:"translate(2.667 1.645)"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M.58 0C.19.43 0 .83 0 1.21v2.91",transform:"translate(6 10.22)"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0c.37.48.55.91.55 1.29v2.89",transform:"translate(9.782 10.159)"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0c.3.04.52.17.67.41C.88.77 1.69 2.1 2.61 2.1H4",transform:"translate(2 10.405)"}))))}},18154:function(e,t,n){"use strict";var o,a,i=n(52846);function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}t.Z=function(e){return i.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),o||(o=i.createElement("defs",null,i.createElement("path",{id:"left_svg__a",d:"M0 0h16v16H0z"}))),i.createElement("g",null,a||(a=i.createElement("mask",{id:"left_svg__b",fill:"#fff"},i.createElement("use",{xlinkHref:"#left_svg__a"}))),i.createElement("g",{mask:"url(#left_svg__b)"},i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M4 8 0 4l4-4",transform:"translate(6.333 4)"}))))}},14845:function(e,t,n){"use strict";var o,a,i=n(52846);function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}t.Z=function(e){return i.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),o||(o=i.createElement("defs",null,i.createElement("path",{id:"max_svg__a",d:"M0 0h16v16H0z"}))),i.createElement("g",null,a||(a=i.createElement("mask",{id:"max_svg__b",fill:"#fff"},i.createElement("use",{xlinkHref:"#max_svg__a"}))),i.createElement("g",{mask:"url(#max_svg__b)"},i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"m0 0 3.33 3.3",transform:"translate(2 2)"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 3.3 3.33 0",transform:"translate(2 10.667)"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3.3 3.3 0 0",transform:"translate(10.7 10.667)"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3.3 0 0 3.3",transform:"translate(10.667 2)"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0h3v3",transform:"translate(11 2)"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3 0v3H0",transform:"translate(11 11)"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3 3H0V0",transform:"translate(2 11)"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 3V0h3",transform:"translate(2 2)"}))))}},68397:function(e,t,n){"use strict";var o,a,i=n(52846);function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}t.Z=function(e){return i.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),o||(o=i.createElement("defs",null,i.createElement("path",{id:"min_svg__a",d:"M0 0h16v16H0z"}))),i.createElement("g",null,a||(a=i.createElement("mask",{id:"min_svg__b",fill:"#fff"},i.createElement("use",{xlinkHref:"#min_svg__a"}))),i.createElement("g",{mask:"url(#min_svg__b)"},i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"m0 0 3.33 3.3",transform:"translate(2 2)"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 3.3 3.33 0",transform:"translate(2 10.667)"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3.3 3.3 0 0",transform:"translate(10.7 10.667)"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3.3 0 0 3.3",transform:"translate(10.667 2)"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0v3h3",transform:"translate(10.667 2.333)"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3 0v3H0",transform:"translate(2.333 2.333)"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3 3V0H0",transform:"translate(2.333 10.667)"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 3V0h2.97",transform:"translate(10.667 10.667)"}))))}},17455:function(e,t,n){"use strict";var o,a,i=n(52846);function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}t.Z=function(e){return i.createElement("svg",r({width:44,height:44,viewBox:"0 0 360 360",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o||(o=i.createElement("g",{transform:"matrix(.917 0 0 .917 15 15)"},i.createElement("circle",{cx:180,cy:180,r:180,fill:"#315EF8"}),i.createElement("rect",{x:235.508,y:83.212,width:77.099,height:173.079,rx:38.55,transform:"rotate(21.987 235.508 83.212)",fill:"url(#neat_svg__a)"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M102.234 136.443c.015-.587-1.004-.812-1.204-.261l-29.164 80.126c-7.281 20.007 3.034 42.128 23.04 49.41 20.007 7.282 42.128-3.034 49.41-23.04a57.396 57.396 0 0 0-12.924-59.786l-18.193-18.581a38.453 38.453 0 0 1-10.965-27.868Z",fill:"url(#neat_svg__b)"}),i.createElement("path",{d:"M249.598 195.489a38.857 38.857 0 0 1 10.652 28.746c-1.729 34.097-43.435 49.55-66.963 24.812l-80.228-84.353a38.856 38.856 0 0 1-10.651-28.746c1.728-34.096 43.434-49.55 66.963-24.812l80.227 84.353Z",fill:"#fff",fillOpacity:.85}))),a||(a=i.createElement("defs",null,i.createElement("linearGradient",{id:"neat_svg__a",x1:289.153,y1:98.392,x2:200.569,y2:280.117,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#fff"}),i.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:.62})),i.createElement("linearGradient",{id:"neat_svg__b",x1:106.933,y1:134.422,x2:109.673,y2:254.984,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#fff",stopOpacity:.75}),i.createElement("stop",{offset:1,stopColor:"#fff"})))))}},98829:function(e,t,n){"use strict";var o,a,i=n(52846);function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}t.Z=function(e){return i.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),o||(o=i.createElement("defs",null,i.createElement("path",{id:"reload_svg__a",d:"M0 0h16v16H0z"}))),i.createElement("g",null,a||(a=i.createElement("mask",{id:"reload_svg__b",fill:"#fff"},i.createElement("use",{xlinkHref:"#reload_svg__a"}))),i.createElement("g",{mask:"url(#reload_svg__b)"},i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0v5.33",transform:"translate(14 2.667)"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0v5.33",transform:"translate(2 8)"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M12.003 6a6.005 6.005 0 0 0-10.32-4.17M0 6a6.005 6.005 0 0 0 10.17 4.32",transform:"translate(2 2)"}))))}},24053:function(e,t,n){"use strict";var o,a,i,r=n(52846);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}t.Z=function(e){return r.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",width:30,height:14,fill:"#fff",viewBox:"0 0 120 30"},e),o||(o=r.createElement("circle",{cx:15,cy:15,r:15,fill:"var(--primary, red)"},r.createElement("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:"0.8s",from:15,repeatCount:"indefinite",to:15,values:"15;9;15"}),r.createElement("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:"0.8s",from:1,repeatCount:"indefinite",to:1,values:"1;.5;1"}))),a||(a=r.createElement("circle",{cx:60,cy:15,r:9,fill:"var(--primary, red)",fillOpacity:.3},r.createElement("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:"0.8s",from:9,repeatCount:"indefinite",to:9,values:"9;15;9"}),r.createElement("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:"0.8s",from:.5,repeatCount:"indefinite",to:.5,values:".5;1;.5"}))),i||(i=r.createElement("circle",{cx:105,cy:15,r:15,fill:"var(--primary, red)"},r.createElement("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:"0.8s",from:15,repeatCount:"indefinite",to:15,values:"15;9;15"}),r.createElement("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:"0.8s",from:1,repeatCount:"indefinite",to:1,values:"1;.5;1"}))))}},17016:function(e,t,n){Promise.resolve().then(n.bind(n,77120)),Promise.resolve().then(n.bind(n,51120))},1610:function(e,t,n){"use strict";n.d(t,{ti:function(){return N},K$:function(){return j},Oj:function(){return O},Lw:function(){return U},wU:function(){return K}});var o=n(94880),a=n(75591),i=n(62425),r=n(85564),l=n(26757);function s(e){let t=e.split("/");if("gateway.ai.cloudflare.com"==t[2]){if("azure-openai"==t[6])return t.slice(0,8).concat(t.slice(-3)).join("/");if("openai"==t[6]||"anthropic"==t[6])return t.slice(0,7).concat(t.slice(-2)).join("/")}return e}var c=n(88587),d=n(92944),u=n(1217);class m{path(e){let t=i._X.getState(),n="",r=e.includes("deployments");if(t.useCustomConfig){if(r&&!t.isValidAzure())throw Error("incomplete azure config, please check it in your settings page");n=r?t.azureUrl:t.openaiUrl}if(0===n.length){var l;let e=!!(null===(l=(0,o.Z)())||void 0===l?void 0:l.isApp),t=r?a.L.Azure:a.L.OpenAI;n=e?a.Bi:t}return n.endsWith("/")&&(n=n.slice(0,n.length-1)),n.startsWith("http")||r||n.startsWith(a.L.OpenAI)||(n="https://"+n),console.log("[Proxy Endpoint] ",n,e),s([n,e].join("/"))}async extractMessage(e){var t,n,o,a,i,r,s,c,d,u;if(e.error)return"```\n"+JSON.stringify(e,null,4)+"\n```";if(e.data){let t=null!==(c=null===(i=e.data)||void 0===i?void 0:null===(a=i.at(0))||void 0===a?void 0:a.url)&&void 0!==c?c:"",n=null!==(d=null===(s=e.data)||void 0===s?void 0:null===(r=s.at(0))||void 0===r?void 0:r.b64_json)&&void 0!==d?d:"";return!t&&n&&(t=await (0,l.Ix)((0,l.lf)(n,"image/png"))),[{type:"image_url",image_url:{url:t}}]}return null!==(u=null===(o=e.choices)||void 0===o?void 0:null===(n=o.at(0))||void 0===n?void 0:null===(t=n.message)||void 0===t?void 0:t.content)&&void 0!==u?u:e}async speech(e){var t;let n={model:e.model,input:e.input,voice:e.voice,response_format:e.response_format,speed:e.speed};console.log("[Request] openai speech payload: ",n);let o=new AbortController;null===(t=e.onController)||void 0===t||t.call(e,o);try{let e=this.path(a.mX.SpeechPath),t={method:"POST",body:JSON.stringify(n),signal:o.signal,headers:K()},i=setTimeout(()=>o.abort(),a.tb),r=await (0,u.h)(e,t);return clearTimeout(i),await r.arrayBuffer()}catch(e){throw console.log("[Request] failed to make a speech request",e),e}}async chat(e){var t,n,o,s,c,m,p,h,g,f,v,y,b,S,w;let T;let _={...i.MG.getState().modelConfig,...i.aK.getState().currentSession().mask.modelConfig,model:e.config.model,providerName:e.config.providerName},k=(0,d.Wu)(e.config.model),C=e.config.model.startsWith("o1");if(k){let t=(0,d.YK)(null===(n=e.messages.slice(-1))||void 0===n?void 0:n.pop());T={model:e.config.model,prompt:t,response_format:"b64_json",n:1,size:null!==(m=null===(o=e.config)||void 0===o?void 0:o.size)&&void 0!==m?m:"1024x1024",quality:null!==(p=null===(s=e.config)||void 0===s?void 0:s.quality)&&void 0!==p?p:"standard",style:null!==(h=null===(c=e.config)||void 0===c?void 0:c.style)&&void 0!==h?h:"vivid"}}else{let t=(0,d.Xf)(e.config.model),n=[];for(let o of e.messages){let e=t?await (0,l.VA)(o.content):"assistant"===o.role?(0,d.Jn)(o):(0,d.YK)(o);C&&"system"===o.role||n.push({role:o.role,content:e})}T={messages:n,stream:e.config.stream,model:_.model,temperature:C?1:_.temperature,presence_penalty:C?0:_.presence_penalty,frequency_penalty:C?0:_.frequency_penalty,top_p:C?1:_.top_p},C&&(T.max_completion_tokens=_.max_tokens),t&&(T.max_tokens=Math.max(_.max_tokens,4e3))}console.log("[Request] openai payload: ",T);let x=!k&&!!e.config.stream,A=new AbortController;null===(t=e.onController)||void 0===t||t.call(e,A);try{let t="";if(_.providerName===a.UT.Azure){let{models:e,customModels:n}=i.MG.getState(),{defaultModel:o,customModels:l,useCustomConfig:s}=i._X.getState(),c=(0,r.lW)(e,[n,l].join(","),o).find(e=>{var t;return e.name===_.model&&(null==e?void 0:null===(t=e.provider)||void 0===t?void 0:t.providerName)===a.UT.Azure});t=this.path((k?a.kn.ImagePath:a.kn.ChatPath)(null!==(g=null==c?void 0:c.displayName)&&void 0!==g?g:null==c?void 0:c.name,s?i._X.getState().azureApiVersion:""))}else t=this.path(k?a.mX.ImagePath:a.mX.ChatPath);if(x){let n=-1,o=!1,a=i.aK.getState().currentSession(),[r,s]=i.RQ.getState().getAsTools((null===(f=a.mask)||void 0===f?void 0:f.plugin)||[]);console.log("[Chat] Web Access:",(null===(y=a.mask)||void 0===y?void 0:null===(v=y.plugin)||void 0===v?void 0:v.includes("googleSearch"))?"Enabled":"Disabled");let c=(null===(S=a.mask)||void 0===S?void 0:null===(b=S.plugin)||void 0===b?void 0:b.includes("googleSearch"))?[{type:"function",function:{name:"googleSearch"}}]:void 0;(0,l.Vw)(t,{...T,...c?{tools:c}:{}},K(),c||[],s,A,(e,t)=>{var a,i,r,l,s,c,d,u,m,p,h,g,f,v;let y=JSON.parse(e).choices,b=null===(i=y[0])||void 0===i?void 0:null===(a=i.delta)||void 0===a?void 0:a.tool_calls;if((null==b?void 0:b.length)>0){let e=null===(m=b[0])||void 0===m?void 0:m.id,o=null===(h=b[0])||void 0===h?void 0:null===(p=h.function)||void 0===p?void 0:p.arguments;e?(n+=1,t.push({id:e,type:null===(g=b[0])||void 0===g?void 0:g.type,function:{name:null===(v=b[0])||void 0===v?void 0:null===(f=v.function)||void 0===f?void 0:f.name,arguments:o}})):t[n].function.arguments+=o}let S=null===(l=y[0])||void 0===l?void 0:null===(r=l.delta)||void 0===r?void 0:r.reasoning_content,w=null===(c=y[0])||void 0===c?void 0:null===(s=c.delta)||void 0===s?void 0:s.content;return S&&S.length>0?o?S:(o=!0,"<think>\n"+S):w&&w.length>0?o?(o=!1,"\n</think>\n\n"+w):w:null===(u=y[0])||void 0===u?void 0:null===(d=u.delta)||void 0===d?void 0:d.content},(e,t,o)=>{var a,i;n=-1,null==e||null===(i=e.messages)||void 0===i||i.splice(null==e?void 0:null===(a=e.messages)||void 0===a?void 0:a.length,0,t,...o)},e)}else{let n={method:"POST",body:JSON.stringify(T),signal:A.signal,headers:K()},o=setTimeout(()=>A.abort(),k||C?4*a.tb:a.tb),i=await (0,u.h)(t,n);clearTimeout(o);let r=await i.json(),l=await this.extractMessage(r);e.onFinish(l,i)}}catch(t){console.log("[Request] failed to make a chat request",t),null===(w=e.onError)||void 0===w||w.call(e,t)}}async usage(){let e=e=>"".concat(e.getFullYear(),"-").concat((e.getMonth()+1).toString().padStart(2,"0"),"-").concat(e.getDate().toString().padStart(2,"0")),t=new Date,n=e(new Date(t.getFullYear(),t.getMonth(),1)),o=e(new Date(Date.now()+864e5)),[i,r]=await Promise.all([(0,u.h)(this.path("".concat(a.mX.UsagePath,"?start_date=").concat(n,"&end_date=").concat(o)),{method:"GET",headers:K()}),(0,u.h)(this.path(a.mX.SubsPath),{method:"GET",headers:K()})]);if(401===i.status)throw Error(c.ZP.Error.Unauthorized);if(!i.ok||!r.ok)throw Error("Failed to query usage from openai");let l=await i.json(),s=await r.json();if(l.error&&l.error.type)throw Error(l.error.message);return l.total_usage&&(l.total_usage=Math.round(l.total_usage)/100),s.hard_limit_usd&&(s.hard_limit_usd=Math.round(100*s.hard_limit_usd)/100),{used:l.total_usage,total:s.hard_limit_usd}}async models(){var e;if(this.disableListModels)return a.Fv.slice();let t=await (0,u.h)(this.path(a.mX.ListModelPath),{method:"GET",headers:{...K()}}),n=null===(e=(await t.json()).data)||void 0===e?void 0:e.filter(e=>e.id.startsWith("gpt-")||e.id.startsWith("chatgpt-"));if(console.log("[Models]",n),!n)return[];let o=1e3;return n.map(e=>({name:e.id,available:!0,sorted:o++,provider:{id:"openai",providerName:"OpenAI",providerType:"openai",sorted:1}}))}constructor(){this.disableListModels=!0}}var p=n(84065);class h{path(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=i._X.getState(),l="";r.useCustomConfig&&(l=r.googleUrl);let s=!!(null===(t=(0,o.Z)())||void 0===t?void 0:t.isApp);0===l.length&&(l=s?a.Hm:a.L.Google),l.endsWith("/")&&(l=l.slice(0,l.length-1)),l.startsWith("http")||l.startsWith(a.L.Google)||(l="https://"+l),console.log("[Proxy Endpoint] ",l,e);let c=[l,e].join("/");return n&&(c+=c.includes("?")?"&alt=sse":"?alt=sse"),c}extractMessage(e){var t,n,o,a,i,r,l,s,c,d;return console.log("[Response] gemini-pro response: ",e),(null==e?void 0:null===(a=e.candidates)||void 0===a?void 0:null===(o=a.at(0))||void 0===o?void 0:null===(n=o.content)||void 0===n?void 0:null===(t=n.parts.at(0))||void 0===t?void 0:t.text)||(null==e?void 0:null===(c=e.at(0))||void 0===c?void 0:null===(s=c.candidates)||void 0===s?void 0:null===(l=s.at(0))||void 0===l?void 0:null===(r=l.content)||void 0===r?void 0:null===(i=r.parts.at(0))||void 0===i?void 0:i.text)||(null==e?void 0:null===(d=e.error)||void 0===d?void 0:d.message)||""}speech(e){throw Error("Method not implemented.")}async chat(e){var t,n,o,r,s,c,m,h,g;let f=i.aK.getState().currentSession();console.log("[Chat] Web Access:",(null===(n=f.mask)||void 0===n?void 0:null===(t=n.plugin)||void 0===t?void 0:t.includes("googleSearch"))?"Enabled":"Disabled");let v=[];for(let t of e.messages){let e=await (0,l.VA)(t.content);v.push({role:t.role,content:e})}let y=(null===(r=f.mask)||void 0===r?void 0:null===(o=r.plugin)||void 0===o?void 0:o.includes("googleSearch"))?[{googleSearch:{}}]:void 0,b=v.map(t=>{let n=[{text:(0,d.YK)(t)}];if((0,d.Xf)(e.config.model)){let e=(0,d.Bs)(t);e.length>0&&(n=n.concat(e.map(e=>({inline_data:{mime_type:e.split(";")[0].split(":")[1],data:e.split(",")[1]}}))))}return{role:t.role.replace("assistant","model").replace("system","user"),parts:n}});for(let e=0;e<b.length-1;)b[e].role===b[e+1].role?(b[e].parts=b[e].parts.concat(b[e+1].parts),b.splice(e+1,1)):e++;let S=i._X.getState(),w={...i.MG.getState().modelConfig,...i.aK.getState().currentSession().mask.modelConfig,model:e.config.model},T={contents:b,...y?{tools:y}:{},generationConfig:{temperature:w.temperature,maxOutputTokens:w.max_tokens,topP:w.top_p},safetySettings:[{category:"HARM_CATEGORY_HARASSMENT",threshold:S.googleSafetySettings},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:S.googleSafetySettings},{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:S.googleSafetySettings},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:S.googleSafetySettings}]},_=!!e.config.stream,k=new AbortController;null===(s=e.onController)||void 0===s||s.call(e,k);try{let t=this.path(a.ie.ChatPath(w.model),_),n={method:"POST",body:JSON.stringify(T),signal:k.signal,headers:K()},o=setTimeout(()=>k.abort(),a.tb);if(_){let[n,o]=i.RQ.getState().getAsTools((null===(c=i.aK.getState().currentSession().mask)||void 0===c?void 0:c.plugin)||[]);return(0,l.Vw)(t,T,K(),y||[],o,k,(e,t)=>{var n,o,a,i,r,l;let s=JSON.parse(e),c=null==s?void 0:null===(a=s.candidates)||void 0===a?void 0:null===(o=a.at(0))||void 0===o?void 0:null===(n=o.content.parts.at(0))||void 0===n?void 0:n.functionCall;if(c){let{name:e,args:n}=c;t.push({id:(0,p.x0)(),type:"function",function:{name:e,arguments:JSON.stringify(n)}})}return null==s?void 0:null===(l=s.candidates)||void 0===l?void 0:null===(r=l.at(0))||void 0===r?void 0:null===(i=r.content.parts.at(0))||void 0===i?void 0:i.text},(e,t,n)=>{var o,a;null==e||null===(a=e.contents)||void 0===a||a.splice(null==e?void 0:null===(o=e.contents)||void 0===o?void 0:o.length,0,{role:"model",parts:t.tool_calls.map(e=>{var t,n;return{functionCall:{name:null==e?void 0:null===(t=e.function)||void 0===t?void 0:t.name,args:JSON.parse(null==e?void 0:null===(n=e.function)||void 0===n?void 0:n.arguments)}}})},...n.map(e=>({role:"function",parts:[{functionResponse:{name:e.name,response:{name:e.name,content:e.content}}}]})))},e)}{let a=await (0,u.h)(t,n);clearTimeout(o);let i=await a.json();(null==i?void 0:null===(m=i.promptFeedback)||void 0===m?void 0:m.blockReason)&&(null===(h=e.onError)||void 0===h||h.call(e,Error("Message is being blocked for reason: "+i.promptFeedback.blockReason)));let r=this.extractMessage(i);e.onFinish(r,a)}}catch(t){console.log("[Request] failed to make a chat request",t),null===(g=e.onError)||void 0===g||g.call(e,t)}}usage(){throw Error("Method not implemented.")}async models(){return[]}}let g={assistant:"assistant",user:"user",system:"user"};class f{speech(e){throw Error("Method not implemented.")}extractMessage(e){var t,n;return console.log("[Response] claude response: ",e),null==e?void 0:null===(n=e.content)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.text}async chat(e){var t,n,o,r;let s=(0,d.Xf)(e.config.model),c=i._X.getState(),m=!!e.config.stream,p={...i.MG.getState().modelConfig,...i.aK.getState().currentSession().mask.modelConfig,model:e.config.model},h=[];for(let t of e.messages){let e=await (0,l.VA)(t.content);h.push({role:t.role,content:e})}let f=["system","user"];for(let e=0;e<h.length-1;e++){let t=h[e],n=h[e+1];f.includes(t.role)&&f.includes(n.role)&&(h[e]=[t,{role:"assistant",content:";"}])}let v=h.flat().filter(e=>!!(e.content&&("string"!=typeof e.content||e.content.trim()))).map(e=>{var t;let{role:n,content:o}=e,a=null!==(t=g[n])&&void 0!==t?t:"user";return s&&"string"!=typeof o?{role:a,content:o.filter(e=>e.image_url||e.text).map(e=>{let{type:t,text:n,image_url:o}=e;if("text"===t)return{type:t,text:n};let{url:a=""}=o||{},i=a.indexOf(":"),r=a.indexOf(";"),l=a.indexOf(","),s=a.slice(i+1,r);return{type:"image",source:{type:a.slice(r+1,l),media_type:s,data:a.slice(l+1)}}})}:{role:a,content:(0,d.YK)(e)}});(null===(t=v[0])||void 0===t?void 0:t.role)==="assistant"&&v.unshift({role:"user",content:";"});let y={messages:v,stream:m,model:p.model,max_tokens:p.max_tokens,temperature:p.temperature,top_p:p.top_p,top_k:5},b=this.path(a.YU.ChatPath),S=new AbortController;if(null===(n=e.onController)||void 0===n||n.call(e,S),m){let t=-1,[n,a]=i.RQ.getState().getAsTools((null===(o=i.aK.getState().currentSession().mask)||void 0===o?void 0:o.plugin)||[]);return(0,l.Vw)(b,y,{...K(),"anthropic-version":c.anthropicApiVersion},n.map(e=>{var t,n,o;return{name:null==e?void 0:null===(t=e.function)||void 0===t?void 0:t.name,description:null==e?void 0:null===(n=e.function)||void 0===n?void 0:n.description,input_schema:null==e?void 0:null===(o=e.function)||void 0===o?void 0:o.parameters}}),a,S,(e,n)=>{var o,a,i,r,l;let s;if((null==(s=JSON.parse(e))?void 0:null===(o=s.content_block)||void 0===o?void 0:o.type)=="tool_use"){t+=1;let e=null==s?void 0:s.content_block.id,o=null==s?void 0:s.content_block.name;n.push({id:e,type:"function",function:{name:o,arguments:""}})}return(null==s?void 0:null===(a=s.delta)||void 0===a?void 0:a.type)=="input_json_delta"&&(null==s?void 0:null===(i=s.delta)||void 0===i?void 0:i.partial_json)&&(n[t].function.arguments+=null==s?void 0:null===(l=s.delta)||void 0===l?void 0:l.partial_json),null==s?void 0:null===(r=s.delta)||void 0===r?void 0:r.text},(e,n,o)=>{var a,i;t=-1,null==e||null===(i=e.messages)||void 0===i||i.splice(null==e?void 0:null===(a=e.messages)||void 0===a?void 0:a.length,0,{role:"assistant",content:n.tool_calls.map(e=>{var t,n,o;return{type:"tool_use",id:e.id,name:null==e?void 0:null===(t=e.function)||void 0===t?void 0:t.name,input:(null==e?void 0:null===(n=e.function)||void 0===n?void 0:n.arguments)?JSON.parse(null==e?void 0:null===(o=e.function)||void 0===o?void 0:o.arguments):{}}})},...o.map(e=>({role:"user",content:[{type:"tool_result",tool_use_id:e.tool_call_id,content:e.content}]})))},e)}{let t={method:"POST",body:JSON.stringify(y),signal:S.signal,headers:{...K(),"anthropic-version":c.anthropicApiVersion}};try{S.signal.onabort=()=>e.onFinish("",new Response(null,{status:400}));let n=await (0,u.h)(b,t),o=await n.json(),a=this.extractMessage(o);e.onFinish(a,n)}catch(t){console.error("failed to chat",t),null===(r=e.onError)||void 0===r||r.call(e,t)}}}async usage(){return{used:0,total:0}}async models(){return[]}path(e){let t=i._X.getState(),n="";if(t.useCustomConfig&&(n=t.anthropicUrl),0===n.trim().length){var r;n=(null===(r=(0,o.Z)())||void 0===r?void 0:r.isApp)?a.y3:a.L.Anthropic}return n.startsWith("http")||n.startsWith("/api")||(n="https://"+n),n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";if(0===t.length)return e;for(;e.endsWith(t);)e=e.slice(0,-t.length);return e}(n,"/"),s("".concat(n,"/").concat(e))}}async function v(e,t){let n=await fetch("".concat(a.FR,"?grant_type=client_credentials&client_id=").concat(e,"&client_secret=").concat(t),{method:"POST",mode:"cors"});return await n.json()}var y=n(534),b=n(58669);class S{path(e){let t=i._X.getState(),n="";if(t.useCustomConfig&&(n=t.baiduUrl),0===n.length){var r;n=(null===(r=(0,o.Z)())||void 0===r?void 0:r.isApp)?a.n9:a.L.Baidu}return n.endsWith("/")&&(n=n.slice(0,n.length-1)),n.startsWith("http")||n.startsWith(a.L.Baidu)||(n="https://"+n),console.log("[Proxy Endpoint] ",n,e),[n,e].join("/")}speech(e){throw Error("Method not implemented.")}async chat(e){var t,n,r,l;let s=e.messages.map(e=>({role:"system"===e.role?"user":e.role,content:(0,d.YK)(e)}));s.length%2==0&&((null===(n=s.at(0))||void 0===n?void 0:n.role)==="user"?s.splice(1,0,{role:"assistant",content:" "}):s.unshift({role:"user",content:" "}));let m={...i.MG.getState().modelConfig,...i.aK.getState().currentSession().mask.modelConfig,model:e.config.model},p=!!e.config.stream,h={messages:s,stream:p,model:m.model,temperature:m.temperature,presence_penalty:m.presence_penalty,frequency_penalty:m.frequency_penalty,top_p:m.top_p};console.log("[Request] Baidu payload: ",h);let g=new AbortController;null===(t=e.onController)||void 0===t||t.call(e,g);try{let t=this.path(a.v3.ChatPath(m.model));if(null===(r=(0,o.Z)())||void 0===r?void 0:r.isApp){let e=i._X.getState();if(e.useCustomConfig&&e.isValidBaidu()){let{access_token:n}=await v(e.baiduApiKey,e.baiduSecretKey);t="".concat(t).concat(t.includes("?")?"&":"?","access_token=").concat(n)}}let n={method:"POST",body:JSON.stringify(h),signal:g.signal,headers:K()},l=setTimeout(()=>g.abort(),a.tb);if(p){let o,a="",i="",r=!1;!function t(){var n,o;if(r||g.signal.aborted){a+=i,console.log("[Response Animation] finished"),(null==a?void 0:a.length)===0&&(null===(n=e.onError)||void 0===n||n.call(e,Error("empty response from server")));return}if(i.length>0){let t=Math.max(1,Math.round(i.length/60)),n=i.slice(0,t);a+=n,i=i.slice(t),null===(o=e.onUpdate)||void 0===o||o.call(e,a,n)}requestAnimationFrame(t)}();let s=()=>{r||(r=!0,e.onFinish(a+i,o))};g.signal.onabort=s,(0,y.L)(t,{fetch:u.h,...n,async onopen(e){var t;clearTimeout(l);let n=e.headers.get("content-type");if(console.log("[Baidu] request response content type: ",n),o=e,null==n?void 0:n.startsWith("text/plain"))return a=await e.clone().text(),s();if(!e.ok||!(null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.startsWith(y.a))||200!==e.status){let t=[a],n=await e.clone().text();try{let t=await e.clone().json();n=(0,b.B)(t)}catch(e){}return 401===e.status&&t.push(c.ZP.Error.Unauthorized),n&&t.push(n),a=t.join("\n\n"),s()}},onmessage(e){if("[DONE]"===e.data||r)return s();let t=e.data;try{let e=JSON.parse(t),n=null==e?void 0:e.result;n&&(i+=n)}catch(n){console.error("[Request] parse error",t,e)}},onclose(){s()},onerror(t){var n;throw null===(n=e.onError)||void 0===n||n.call(e,t),t},openWhenHidden:!0})}else{let o=await (0,u.h)(t,n);clearTimeout(l);let a=await o.json(),i=null==a?void 0:a.result;e.onFinish(i,o)}}catch(t){console.log("[Request] failed to make a chat request",t),null===(l=e.onError)||void 0===l||l.call(e,t)}}async usage(){return{used:0,total:0}}async models(){return[]}}class w{path(e){let t=i._X.getState(),n="";if(t.useCustomConfig&&(n=t.bytedanceUrl),0===n.length){var r;n=(null===(r=(0,o.Z)())||void 0===r?void 0:r.isApp)?a.ik:a.L.ByteDance}return n.endsWith("/")&&(n=n.slice(0,n.length-1)),n.startsWith("http")||n.startsWith(a.L.ByteDance)||(n="https://"+n),console.log("[Proxy Endpoint] ",n,e),[n,e].join("/")}extractMessage(e){var t,n,o,a;return null!==(a=null===(o=e.choices)||void 0===o?void 0:null===(n=o.at(0))||void 0===n?void 0:null===(t=n.message)||void 0===t?void 0:t.content)&&void 0!==a?a:""}speech(e){throw Error("Method not implemented.")}async chat(e){var t,n;let o=e.messages.map(e=>({role:e.role,content:(0,d.YK)(e)})),r={...i.MG.getState().modelConfig,...i.aK.getState().currentSession().mask.modelConfig,model:e.config.model},l=!!e.config.stream,s={messages:o,stream:l,model:r.model,temperature:r.temperature,presence_penalty:r.presence_penalty,frequency_penalty:r.frequency_penalty,top_p:r.top_p},m=new AbortController;null===(t=e.onController)||void 0===t||t.call(e,m);try{let t=this.path(a.MU.ChatPath),n={method:"POST",body:JSON.stringify(s),signal:m.signal,headers:K()},o=setTimeout(()=>m.abort(),a.tb);if(l){let a,i="",r="",l=!1;!function t(){var n,o;if(l||m.signal.aborted){i+=r,console.log("[Response Animation] finished"),(null==i?void 0:i.length)===0&&(null===(n=e.onError)||void 0===n||n.call(e,Error("empty response from server")));return}if(r.length>0){let t=Math.max(1,Math.round(r.length/60)),n=r.slice(0,t);i+=n,r=r.slice(t),null===(o=e.onUpdate)||void 0===o||o.call(e,i,n)}requestAnimationFrame(t)}();let s=()=>{l||(l=!0,e.onFinish(i+r,a))};m.signal.onabort=s,(0,y.L)(t,{fetch:u.h,...n,async onopen(e){var t;clearTimeout(o);let n=e.headers.get("content-type");if(console.log("[ByteDance] request response content type: ",n),a=e,null==n?void 0:n.startsWith("text/plain"))return i=await e.clone().text(),s();if(!e.ok||!(null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.startsWith(y.a))||200!==e.status){let t=[i],n=await e.clone().text();try{let t=await e.clone().json();n=(0,b.B)(t)}catch(e){}return 401===e.status&&t.push(c.ZP.Error.Unauthorized),n&&t.push(n),i=t.join("\n\n"),s()}},onmessage(e){if("[DONE]"===e.data||l)return s();let t=e.data;try{var n,o;let e=JSON.parse(t).choices,a=null===(o=e[0])||void 0===o?void 0:null===(n=o.delta)||void 0===n?void 0:n.content;a&&(r+=a)}catch(n){console.error("[Request] parse error",t,e)}},onclose(){s()},onerror(t){var n;throw null===(n=e.onError)||void 0===n||n.call(e,t),t},openWhenHidden:!0})}else{let a=await (0,u.h)(t,n);clearTimeout(o);let i=await a.json(),r=this.extractMessage(i);e.onFinish(r,a)}}catch(t){console.log("[Request] failed to make a chat request",t),null===(n=e.onError)||void 0===n||n.call(e,t)}}async usage(){return{used:0,total:0}}async models(){return[]}}class T{path(e){let t=i._X.getState(),n="";if(t.useCustomConfig&&(n=t.alibabaUrl),0===n.length){var r;n=(null===(r=(0,o.Z)())||void 0===r?void 0:r.isApp)?a.x5:a.L.Alibaba}return n.endsWith("/")&&(n=n.slice(0,n.length-1)),n.startsWith("http")||n.startsWith(a.L.Alibaba)||(n="https://"+n),console.log("[Proxy Endpoint] ",n,e),[n,e].join("/")}extractMessage(e){var t,n,o,a,i;return null!==(i=null==e?void 0:null===(a=e.output)||void 0===a?void 0:null===(o=a.choices)||void 0===o?void 0:null===(n=o.at(0))||void 0===n?void 0:null===(t=n.message)||void 0===t?void 0:t.content)&&void 0!==i?i:""}speech(e){throw Error("Method not implemented.")}async chat(e){var t,n;let o=e.messages.map(e=>({role:e.role,content:(0,d.YK)(e)})),r={...i.MG.getState().modelConfig,...i.aK.getState().currentSession().mask.modelConfig,model:e.config.model},l=!!e.config.stream,s={model:r.model,input:{messages:o},parameters:{result_format:"message",incremental_output:l,temperature:r.temperature,top_p:1===r.top_p?.99:r.top_p}},m=new AbortController;null===(t=e.onController)||void 0===t||t.call(e,m);try{let t=this.path(a.rk.ChatPath),n={method:"POST",body:JSON.stringify(s),signal:m.signal,headers:{...K(),"X-DashScope-SSE":l?"enable":"disable"}},o=setTimeout(()=>m.abort(),a.tb);if(l){let a,i="",r="",l=!1;!function t(){var n,o;if(l||m.signal.aborted){i+=r,console.log("[Response Animation] finished"),(null==i?void 0:i.length)===0&&(null===(n=e.onError)||void 0===n||n.call(e,Error("empty response from server")));return}if(r.length>0){let t=Math.max(1,Math.round(r.length/60)),n=r.slice(0,t);i+=n,r=r.slice(t),null===(o=e.onUpdate)||void 0===o||o.call(e,i,n)}requestAnimationFrame(t)}();let s=()=>{l||(l=!0,e.onFinish(i+r,a))};m.signal.onabort=s,(0,y.L)(t,{fetch:u.h,...n,async onopen(e){var t;clearTimeout(o);let n=e.headers.get("content-type");if(console.log("[Alibaba] request response content type: ",n),a=e,null==n?void 0:n.startsWith("text/plain"))return i=await e.clone().text(),s();if(!e.ok||!(null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.startsWith(y.a))||200!==e.status){let t=[i],n=await e.clone().text();try{let t=await e.clone().json();n=(0,b.B)(t)}catch(e){}return 401===e.status&&t.push(c.ZP.Error.Unauthorized),n&&t.push(n),i=t.join("\n\n"),s()}},onmessage(e){if("[DONE]"===e.data||l)return s();let t=e.data;try{var n,o;let e=JSON.parse(t).output.choices,a=null===(o=e[0])||void 0===o?void 0:null===(n=o.message)||void 0===n?void 0:n.content;a&&(r+=a)}catch(n){console.error("[Request] parse error",t,e)}},onclose(){s()},onerror(t){var n;throw null===(n=e.onError)||void 0===n||n.call(e,t),t},openWhenHidden:!0})}else{let a=await (0,u.h)(t,n);clearTimeout(o);let i=await a.json(),r=this.extractMessage(i);e.onFinish(r,a)}}catch(t){console.log("[Request] failed to make a chat request",t),null===(n=e.onError)||void 0===n||n.call(e,t)}}async usage(){return{used:0,total:0}}async models(){return[]}}var _=n(7686),k=n(91901),C=n(86816),x=n(61260);class A{path(){let e=i._X.getState(),t="";if(e.useCustomConfig&&(t=e.tencentUrl),0===t.length){var n;t=(null===(n=(0,o.Z)())||void 0===n?void 0:n.isApp)?a.Mo:a.L.Tencent}return t.endsWith("/")&&(t=t.slice(0,t.length-1)),t.startsWith("http")||t.startsWith(a.L.Tencent)||(t="https://"+t),console.log("[Proxy Endpoint] ",t),t}extractMessage(e){var t,n,o,a;return null!==(a=null===(o=e.Choices)||void 0===o?void 0:null===(n=o.at(0))||void 0===n?void 0:null===(t=n.Message)||void 0===t?void 0:t.Content)&&void 0!==a?a:""}speech(e){throw Error("Method not implemented.")}async chat(e){var t,n;let o=(0,d.Xf)(e.config.model),r=e.messages.map((e,t)=>({role:0!==t&&"system"===e.role?"user":e.role,content:o?e.content:(0,d.YK)(e)})),l={...i.MG.getState().modelConfig,...i.aK.getState().currentSession().mask.modelConfig,model:e.config.model},s=function e(t){return(0,C.Z)(t)?t.map(e):(0,x.Z)(t)?(0,k.Z)((0,_.Z)(t,(e,t)=>t.replace(/(^|_)(\w)/g,(e,t,n)=>n.toUpperCase())),e):t}({model:l.model,messages:r,temperature:l.temperature,top_p:l.top_p,stream:e.config.stream});console.log("[Request] Tencent payload: ",s);let m=!!e.config.stream,p=new AbortController;null===(t=e.onController)||void 0===t||t.call(e,p);try{let t=this.path(),n={method:"POST",body:JSON.stringify(s),signal:p.signal,headers:K()},o=setTimeout(()=>p.abort(),a.tb);if(m){let a,i="",r="",l=!1;!function t(){var n,o;if(l||p.signal.aborted){i+=r,console.log("[Response Animation] finished"),(null==i?void 0:i.length)===0&&(null===(n=e.onError)||void 0===n||n.call(e,Error("empty response from server")));return}if(r.length>0){let t=Math.max(1,Math.round(r.length/60)),n=r.slice(0,t);i+=n,r=r.slice(t),null===(o=e.onUpdate)||void 0===o||o.call(e,i,n)}requestAnimationFrame(t)}();let s=()=>{l||(l=!0,e.onFinish(i+r,a))};p.signal.onabort=s,(0,y.L)(t,{fetch:u.h,...n,async onopen(e){var t;clearTimeout(o);let n=e.headers.get("content-type");if(console.log("[Tencent] request response content type: ",n),a=e,null==n?void 0:n.startsWith("text/plain"))return i=await e.clone().text(),s();if(!e.ok||!(null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.startsWith(y.a))||200!==e.status){let t=[i],n=await e.clone().text();try{let t=await e.clone().json();n=(0,b.B)(t)}catch(e){}return 401===e.status&&t.push(c.ZP.Error.Unauthorized),n&&t.push(n),i=t.join("\n\n"),s()}},onmessage(e){if("[DONE]"===e.data||l)return s();let t=e.data;try{var n,o;let e=JSON.parse(t).Choices,a=null===(o=e[0])||void 0===o?void 0:null===(n=o.Delta)||void 0===n?void 0:n.Content;a&&(r+=a)}catch(n){console.error("[Request] parse error",t,e)}},onclose(){s()},onerror(t){var n;throw null===(n=e.onError)||void 0===n||n.call(e,t),t},openWhenHidden:!0})}else{let a=await (0,u.h)(t,n);clearTimeout(o);let i=await a.json(),r=this.extractMessage(i);e.onFinish(r,a)}}catch(t){console.log("[Request] failed to make a chat request",t),null===(n=e.onError)||void 0===n||n.call(e,t)}}async usage(){return{used:0,total:0}}async models(){return[]}}class E{path(e){let t=i._X.getState(),n="";if(t.useCustomConfig&&(n=t.moonshotUrl),0===n.length){var r;let e=!!(null===(r=(0,o.Z)())||void 0===r?void 0:r.isApp),t=a.L.Moonshot;n=e?a.bP:t}return n.endsWith("/")&&(n=n.slice(0,n.length-1)),n.startsWith("http")||n.startsWith(a.L.Moonshot)||(n="https://"+n),console.log("[Proxy Endpoint] ",n,e),[n,e].join("/")}extractMessage(e){var t,n,o,a;return null!==(a=null===(o=e.choices)||void 0===o?void 0:null===(n=o.at(0))||void 0===n?void 0:null===(t=n.message)||void 0===t?void 0:t.content)&&void 0!==a?a:""}speech(e){throw Error("Method not implemented.")}async chat(e){var t,n,o;let r=[];for(let t of e.messages){let e=(0,d.YK)(t);r.push({role:t.role,content:e})}let s={...i.MG.getState().modelConfig,...i.aK.getState().currentSession().mask.modelConfig,model:e.config.model,providerName:e.config.providerName},c={messages:r,stream:e.config.stream,model:s.model,temperature:s.temperature,presence_penalty:s.presence_penalty,frequency_penalty:s.frequency_penalty,top_p:s.top_p};console.log("[Request] openai payload: ",c);let m=!!e.config.stream,p=new AbortController;null===(t=e.onController)||void 0===t||t.call(e,p);try{let t=this.path(a.ft.ChatPath),o={method:"POST",body:JSON.stringify(c),signal:p.signal,headers:K()},r=setTimeout(()=>p.abort(),a.tb);if(m){let[o,a]=i.RQ.getState().getAsTools((null===(n=i.aK.getState().currentSession().mask)||void 0===n?void 0:n.plugin)||[]);return(0,l.Vw)(t,c,K(),o,a,p,(e,t)=>{var n,o,a,i,r,l,s,c,d,u,m;let p=JSON.parse(e).choices,h=null===(o=p[0])||void 0===o?void 0:null===(n=o.delta)||void 0===n?void 0:n.tool_calls;if((null==h?void 0:h.length)>0){let e=null===(r=h[0])||void 0===r?void 0:r.index,n=null===(l=h[0])||void 0===l?void 0:l.id,o=null===(c=h[0])||void 0===c?void 0:null===(s=c.function)||void 0===s?void 0:s.arguments;n?t.push({id:n,type:null===(d=h[0])||void 0===d?void 0:d.type,function:{name:null===(m=h[0])||void 0===m?void 0:null===(u=m.function)||void 0===u?void 0:u.name,arguments:o}}):t[e].function.arguments+=o}return null===(i=p[0])||void 0===i?void 0:null===(a=i.delta)||void 0===a?void 0:a.content},(e,t,n)=>{var o,a;null==e||null===(a=e.messages)||void 0===a||a.splice(null==e?void 0:null===(o=e.messages)||void 0===o?void 0:o.length,0,t,...n)},e)}{let n=await (0,u.h)(t,o);clearTimeout(r);let a=await n.json(),i=this.extractMessage(a);e.onFinish(i,n)}}catch(t){console.log("[Request] failed to make a chat request",t),null===(o=e.onError)||void 0===o||o.call(e,t)}}async usage(){return{used:0,total:0}}async models(){return[]}constructor(){this.disableListModels=!0}}class P{path(e){let t=i._X.getState(),n="";if(t.useCustomConfig&&(n=t.iflytekUrl),0===n.length){var r;let e=!!(null===(r=(0,o.Z)())||void 0===r?void 0:r.isApp),t=a.L.Iflytek;n=e?a.pG:t}return n.endsWith("/")&&(n=n.slice(0,n.length-1)),n.startsWith("http")||n.startsWith(a.L.Iflytek)||(n="https://"+n),console.log("[Proxy Endpoint] ",n,e),[n,e].join("/")}extractMessage(e){var t,n,o,a;return null!==(a=null===(o=e.choices)||void 0===o?void 0:null===(n=o.at(0))||void 0===n?void 0:null===(t=n.message)||void 0===t?void 0:t.content)&&void 0!==a?a:""}speech(e){throw Error("Method not implemented.")}async chat(e){var t,n,o;let r=[];for(let t of e.messages){let e=(0,d.YK)(t);r.push({role:t.role,content:e})}let l={...i.MG.getState().modelConfig,...i.aK.getState().currentSession().mask.modelConfig,model:e.config.model,providerName:e.config.providerName},s={messages:r,stream:e.config.stream,model:l.model,temperature:l.temperature,presence_penalty:l.presence_penalty,frequency_penalty:l.frequency_penalty,top_p:l.top_p};console.log("[Request] Spark payload: ",s);let m=!!e.config.stream,p=new AbortController;null===(t=e.onController)||void 0===t||t.call(e,p);try{let t=this.path(a.LR.ChatPath),o={method:"POST",body:JSON.stringify(s),signal:p.signal,headers:K()},i=setTimeout(()=>p.abort(),a.tb);if(m){let n,a="",r="",l=!1;!function t(){if(l||p.signal.aborted){a+=r,console.log("[Response Animation] finished");return}if(r.length>0){var n;let t=Math.max(1,Math.round(r.length/60)),o=r.slice(0,t);a+=o,r=r.slice(t),null===(n=e.onUpdate)||void 0===n||n.call(e,a,o)}requestAnimationFrame(t)}();let s=()=>{l||(l=!0,e.onFinish(a+r,n))};p.signal.onabort=s,(0,y.L)(t,{fetch:u.h,...o,async onopen(t){var o,r;clearTimeout(i);let l=t.headers.get("content-type");if(console.log("[Spark] request response content type: ",l),n=t,null==l?void 0:l.startsWith("text/plain"))return a=await t.clone().text(),s();if(!t.ok||!(null===(o=t.headers.get("content-type"))||void 0===o?void 0:o.startsWith(y.a))||200!==t.status){let n=await t.clone().text();try{let e=await t.clone().json();n=(0,b.B)(e)}catch(e){}return 401===t.status&&(n=c.ZP.Error.Unauthorized),null===(r=e.onError)||void 0===r||r.call(e,Error("Request failed with status ".concat(t.status,": ").concat(n))),s()}},onmessage(t){var n,o,a;if("[DONE]"===t.data||l)return s();let i=t.data;try{let e=JSON.parse(i).choices,t=null===(o=e[0])||void 0===o?void 0:null===(n=o.delta)||void 0===n?void 0:n.content;t&&(r+=t)}catch(t){console.error("[Request] parse error",i),null===(a=e.onError)||void 0===a||a.call(e,Error("Failed to parse response: ".concat(i)))}},onclose(){s()},onerror(t){var n;throw null===(n=e.onError)||void 0===n||n.call(e,t),t},openWhenHidden:!0})}else{let a=await (0,u.h)(t,o);if(clearTimeout(i),!a.ok){let t=await a.text();null===(n=e.onError)||void 0===n||n.call(e,Error("Request failed with status ".concat(a.status,": ").concat(t)));return}let r=await a.json(),l=this.extractMessage(r);e.onFinish(l,a)}}catch(t){console.log("[Request] failed to make a chat request",t),null===(o=e.onError)||void 0===o||o.call(e,t)}}async usage(){return{used:0,total:0}}async models(){return[]}constructor(){this.disableListModels=!0}}class M{path(e){let t=i._X.getState(),n="";if(t.useCustomConfig&&(n=t.xaiUrl),0===n.length){var r;let e=!!(null===(r=(0,o.Z)())||void 0===r?void 0:r.isApp),t=a.L.XAI;n=e?a.eE:t}return n.endsWith("/")&&(n=n.slice(0,n.length-1)),n.startsWith("http")||n.startsWith(a.L.XAI)||(n="https://"+n),console.log("[Proxy Endpoint] ",n,e),[n,e].join("/")}extractMessage(e){var t,n,o,a;return null!==(a=null===(o=e.choices)||void 0===o?void 0:null===(n=o.at(0))||void 0===n?void 0:null===(t=n.message)||void 0===t?void 0:t.content)&&void 0!==a?a:""}speech(e){throw Error("Method not implemented.")}async chat(e){var t,n,o;let r=[];for(let t of e.messages){let e=(0,d.YK)(t);r.push({role:t.role,content:e})}let s={...i.MG.getState().modelConfig,...i.aK.getState().currentSession().mask.modelConfig,model:e.config.model,providerName:e.config.providerName},c={messages:r,stream:e.config.stream,model:s.model,temperature:s.temperature,presence_penalty:s.presence_penalty,frequency_penalty:s.frequency_penalty,top_p:s.top_p};console.log("[Request] xai payload: ",c);let m=!!e.config.stream,p=new AbortController;null===(t=e.onController)||void 0===t||t.call(e,p);try{let t=this.path(a.nL.ChatPath),o={method:"POST",body:JSON.stringify(c),signal:p.signal,headers:K()},r=setTimeout(()=>p.abort(),a.tb);if(m){let[o,a]=i.RQ.getState().getAsTools((null===(n=i.aK.getState().currentSession().mask)||void 0===n?void 0:n.plugin)||[]);return(0,l.Vw)(t,c,K(),o,a,p,(e,t)=>{var n,o,a,i,r,l,s,c,d,u,m;let p=JSON.parse(e).choices,h=null===(o=p[0])||void 0===o?void 0:null===(n=o.delta)||void 0===n?void 0:n.tool_calls;if((null==h?void 0:h.length)>0){let e=null===(r=h[0])||void 0===r?void 0:r.index,n=null===(l=h[0])||void 0===l?void 0:l.id,o=null===(c=h[0])||void 0===c?void 0:null===(s=c.function)||void 0===s?void 0:s.arguments;n?t.push({id:n,type:null===(d=h[0])||void 0===d?void 0:d.type,function:{name:null===(m=h[0])||void 0===m?void 0:null===(u=m.function)||void 0===u?void 0:u.name,arguments:o}}):t[e].function.arguments+=o}return null===(i=p[0])||void 0===i?void 0:null===(a=i.delta)||void 0===a?void 0:a.content},(e,t,n)=>{var o,a;null==e||null===(a=e.messages)||void 0===a||a.splice(null==e?void 0:null===(o=e.messages)||void 0===o?void 0:o.length,0,t,...n)},e)}{let n=await (0,u.h)(t,o);clearTimeout(r);let a=await n.json(),i=this.extractMessage(a);e.onFinish(i,n)}}catch(t){console.log("[Request] failed to make a chat request",t),null===(o=e.onError)||void 0===o||o.call(e,t)}}async usage(){return{used:0,total:0}}async models(){return[]}constructor(){this.disableListModels=!0}}class I{path(e){let t=i._X.getState(),n="";if(t.useCustomConfig&&(n=t.chatglmUrl),0===n.length){var r;let e=!!(null===(r=(0,o.Z)())||void 0===r?void 0:r.isApp),t=a.L.ChatGLM;n=e?a.BJ:t}return n.endsWith("/")&&(n=n.slice(0,n.length-1)),n.startsWith("http")||n.startsWith(a.L.ChatGLM)||(n="https://"+n),console.log("[Proxy Endpoint] ",n,e),[n,e].join("/")}extractMessage(e){var t,n,o,a;return null!==(a=null===(o=e.choices)||void 0===o?void 0:null===(n=o.at(0))||void 0===n?void 0:null===(t=n.message)||void 0===t?void 0:t.content)&&void 0!==a?a:""}speech(e){throw Error("Method not implemented.")}async chat(e){var t,n,o;let r=[];for(let t of e.messages){let e=(0,d.YK)(t);r.push({role:t.role,content:e})}let s={...i.MG.getState().modelConfig,...i.aK.getState().currentSession().mask.modelConfig,model:e.config.model,providerName:e.config.providerName},c={messages:r,stream:e.config.stream,model:s.model,temperature:s.temperature,presence_penalty:s.presence_penalty,frequency_penalty:s.frequency_penalty,top_p:s.top_p};console.log("[Request] glm payload: ",c);let m=!!e.config.stream,p=new AbortController;null===(t=e.onController)||void 0===t||t.call(e,p);try{let t=this.path(a.of.ChatPath),o={method:"POST",body:JSON.stringify(c),signal:p.signal,headers:K()},r=setTimeout(()=>p.abort(),a.tb);if(m){let[o,a]=i.RQ.getState().getAsTools((null===(n=i.aK.getState().currentSession().mask)||void 0===n?void 0:n.plugin)||[]);return(0,l.Vw)(t,c,K(),o,a,p,(e,t)=>{var n,o,a,i,r,l,s,c,d,u,m;let p=JSON.parse(e).choices,h=null===(o=p[0])||void 0===o?void 0:null===(n=o.delta)||void 0===n?void 0:n.tool_calls;if((null==h?void 0:h.length)>0){let e=null===(r=h[0])||void 0===r?void 0:r.index,n=null===(l=h[0])||void 0===l?void 0:l.id,o=null===(c=h[0])||void 0===c?void 0:null===(s=c.function)||void 0===s?void 0:s.arguments;n?t.push({id:n,type:null===(d=h[0])||void 0===d?void 0:d.type,function:{name:null===(m=h[0])||void 0===m?void 0:null===(u=m.function)||void 0===u?void 0:u.name,arguments:o}}):t[e].function.arguments+=o}return null===(i=p[0])||void 0===i?void 0:null===(a=i.delta)||void 0===a?void 0:a.content},(e,t,n)=>{var o,a;null==e||null===(a=e.messages)||void 0===a||a.splice(null==e?void 0:null===(o=e.messages)||void 0===o?void 0:o.length,0,t,...n)},e)}{let n=await (0,u.h)(t,o);clearTimeout(r);let a=await n.json(),i=this.extractMessage(a);e.onFinish(i,n)}}catch(t){console.log("[Request] failed to make a chat request",t),null===(o=e.onError)||void 0===o||o.call(e,t)}}async usage(){return{used:0,total:0}}async models(){return[]}constructor(){this.disableListModels=!0}}let j=["system","user","assistant"];class N{config(){}prompts(){}masks(){}async share(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.map(e=>({from:"user"===e.role?"human":"gpt",value:e.content})).concat([{from:"human",value:"Share from [NeatChat]: https://github.com/tianzhentech/NeatChat.git"}]);console.log("[Share]",e,n);let a=(0,o.Z)(),i=(null==a?void 0:a.isApp)?"https://sharegpt.com/api/conversations":"/sharegpt",r=await fetch(i,{body:JSON.stringify({avatarUrl:t,items:n}),headers:{"Content-Type":"application/json"},method:"POST"}),l=await r.json();if(console.log("[Share]",l),l.id)return"https://shareg.pt/".concat(l.id)}constructor(e=a.k8.GPT){switch(e){case a.k8.GeminiPro:this.llm=new h;break;case a.k8.Claude:this.llm=new f;break;case a.k8.Ernie:this.llm=new S;break;case a.k8.Doubao:this.llm=new w;break;case a.k8.Qwen:this.llm=new T;break;case a.k8.Hunyuan:this.llm=new A;break;case a.k8.Moonshot:this.llm=new E;break;case a.k8.Iflytek:this.llm=new P;break;case a.k8.XAI:this.llm=new M;break;case a.k8.ChatGLM:this.llm=new I;break;default:this.llm=new m}}}function O(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return D(e)?"".concat(t?"":"Bearer ").concat(e.trim()):""}function D(e){return(null==e?void 0:e.length)>0}function K(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=i._X.getState(),n=i.aK.getState(),r={};e||(r={"Content-Type":"application/json",Accept:"application/json"});let l=(0,o.Z)(),{isGoogle:s,isAzure:c,isAnthropic:d,isBaidu:u,apiKey:m,isEnabledAccessControl:p}=function(){let e=n.currentSession().mask.modelConfig,o=e.providerName===a.UT.Google,i=e.providerName===a.UT.Azure,r=e.providerName===a.UT.Anthropic,l=e.providerName==a.UT.Baidu,s=e.providerName===a.UT.ByteDance,c=e.providerName===a.UT.Alibaba,d=e.providerName===a.UT.Moonshot,u=e.providerName===a.UT.Iflytek,m=e.providerName===a.UT.XAI,p=e.providerName===a.UT.ChatGLM,h=t.enabledAccessControl(),g=o?t.googleApiKey:i?t.azureApiKey:r?t.anthropicApiKey:s?t.bytedanceApiKey:c?t.alibabaApiKey:d?t.moonshotApiKey:m?t.xaiApiKey:p?t.chatglmApiKey:u?t.iflytekApiKey&&t.iflytekApiSecret?t.iflytekApiKey+":"+t.iflytekApiSecret:"":t.openaiApiKey;return{isGoogle:o,isAzure:i,isAnthropic:r,isBaidu:l,isByteDance:s,isAlibaba:c,isMoonshot:d,isIflytek:u,isXAI:m,isChatGLM:p,apiKey:g,isEnabledAccessControl:h}}();if(u&&(null==l?void 0:l.isApp))return r;let h=c?"api-key":d?"x-api-key":s?"x-goog-api-key":"Authorization",g=O(m,c||d||s);return g?r[h]=g:p&&D(t.accessCode)&&(r.Authorization=O(a.TW+t.accessCode)),r}function U(e){switch(e){case a.UT.Google:return new N(a.k8.GeminiPro);case a.UT.Anthropic:return new N(a.k8.Claude);case a.UT.Baidu:return new N(a.k8.Ernie);case a.UT.ByteDance:return new N(a.k8.Doubao);case a.UT.Alibaba:return new N(a.k8.Qwen);case a.UT.Tencent:return new N(a.k8.Hunyuan);case a.UT.Moonshot:return new N(a.k8.Moonshot);case a.UT.Iflytek:return new N(a.k8.Iflytek);case a.UT.XAI:return new N(a.k8.XAI);case a.UT.ChatGLM:return new N(a.k8.ChatGLM);default:return new N(a.k8.GPT)}}},90684:function(e,t,n){"use strict";n.d(t,{L:function(){return o}});let o={controllers:{},addController(e,t,n){let o=this.key(e,t);return this.controllers[o]=n,o},stop(e,t){let n=this.key(e,t),o=this.controllers[n];null==o||o.abort()},stopAll(){Object.values(this.controllers).forEach(e=>e.abort())},hasPending(){return Object.values(this.controllers).length>0},remove(e,t){let n=this.key(e,t);delete this.controllers[n]},key:(e,t)=>"".concat(e,",").concat(t)}},35499:function(e,t,n){"use strict";n.d(t,{h:function(){return l}});var o=n(57437);n(2265);var a=n(82422),i=n.n(a),r=n(75504);function l(e){var t;return(0,o.jsxs)("button",{className:(0,r.Z)("clickable",i()["icon-button"],{[i().border]:e.bordered,[i().shadow]:e.shadow},i()[null!==(t=e.type)&&void 0!==t?t:""],e.className),onClick:e.onClick,title:e.title,disabled:e.disabled,role:"button",tabIndex:e.tabIndex,autoFocus:e.autoFocus,style:e.style,"aria-label":e.aria,children:[e.icon&&(0,o.jsx)("div",{"aria-label":e.text||e.title,className:(0,r.Z)(i()["icon-button-icon"],{"no-dark":"primary"===e.type}),children:e.icon}),e.text&&(0,o.jsx)("div",{"aria-label":e.text||e.title,className:i()["icon-button-text"],children:e.text})]})}},68454:function(e,t,n){"use strict";n.d(t,{S:function(){return p}});var o=n(57437),a=n(2265),i=n(35499),r=n(59566),l=n(98829),s=n(75591),c=n(88587),d=n(65878),u=n(27572),m=n(35207);class p extends a.Component{componentDidCatch(e,t){this.setState({hasError:!0,error:e,info:t})}clearAndSaveData(){try{u.i.getState().export()}finally{m.aK.getState().clearAllData()}}render(){if(this.state.hasError){var e,t;return(0,o.jsxs)("div",{className:"error",children:[(0,o.jsx)("h2",{children:"Oops, something went wrong!"}),(0,o.jsxs)("pre",{children:[(0,o.jsx)("code",{children:null===(e=this.state.error)||void 0===e?void 0:e.toString()}),(0,o.jsx)("code",{children:null===(t=this.state.info)||void 0===t?void 0:t.componentStack})]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,o.jsx)("a",{href:s.TH,className:"report",children:(0,o.jsx)(i.h,{text:"Report This Error",icon:(0,o.jsx)(r.Z,{}),bordered:!0})}),(0,o.jsx)(i.h,{icon:(0,o.jsx)(l.Z,{}),text:"Clear All Data",onClick:async()=>{await (0,d.i0)(c.ZP.Settings.Danger.Reset.Confirm)&&this.clearAndSaveData()},bordered:!0})]})]})}return this.props.children}constructor(e){super(e),this.state={hasError:!1,error:null,info:null}}}},77120:function(e,t,n){"use strict";n.r(t),n.d(t,{Home:function(){return G},Loading:function(){return E},WindowContent:function(){return W},useLoadData:function(){return F},useSwitchTheme:function(){return U}});var o=n(57437),a=n(2265),i=n(71869),r=n.n(i),l=n(17455),s=n(24053),c=n(92944),d=n(24232),u=n(75591),m=n(68454),p=n(88587),h=n(59208),g=n(90261),f=n(2791),v=n(3289),y=n(95282),b=n.n(y),S=n(35499),w=n(62425),T=n(94880),_=n(65878),k=n(18154),C=n(75504);function x(){let e=(0,h.s0)(),t=(0,w._X)();return(0,a.useEffect)(()=>{var t;(null===(t=(0,T.Z)())||void 0===t?void 0:t.isApp)&&e(u.y$.Settings)},[]),(0,o.jsxs)("div",{className:b()["auth-page"],children:[(0,o.jsx)("div",{className:b()["auth-header"],children:(0,o.jsx)(S.h,{icon:(0,o.jsx)(k.Z,{}),text:p.ZP.Auth.Return,onClick:()=>e(u.y$.Home)})}),(0,o.jsx)("div",{className:(0,C.Z)("no-dark",b()["auth-logo"]),children:(0,o.jsx)(l.Z,{width:30,height:30})}),(0,o.jsx)("div",{className:b()["auth-title"],children:p.ZP.Auth.Title}),(0,o.jsx)("div",{className:b()["auth-tips"],children:p.ZP.Auth.Tips}),(0,o.jsx)(_.WU,{style:{marginTop:"3vh",marginBottom:"3vh"},aria:p.ZP.Settings.ShowPassword,"aria-label":p.ZP.Auth.Input,value:t.accessCode,type:"text",placeholder:p.ZP.Auth.Input,onChange:e=>{t.update(t=>t.accessCode=e.currentTarget.value)}}),t.hideUserApiKey?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:b()["auth-tips"],children:p.ZP.Auth.SubTips}),(0,o.jsx)(_.WU,{style:{marginTop:"3vh",marginBottom:"3vh"},aria:p.ZP.Settings.ShowPassword,"aria-label":p.ZP.Settings.Access.OpenAI.ApiKey.Placeholder,value:t.openaiApiKey,type:"text",placeholder:p.ZP.Settings.Access.OpenAI.ApiKey.Placeholder,onChange:e=>{t.update(t=>t.openaiApiKey=e.currentTarget.value)}}),(0,o.jsx)(_.WU,{style:{marginTop:"3vh",marginBottom:"3vh"},aria:p.ZP.Settings.ShowPassword,"aria-label":p.ZP.Settings.Access.Google.ApiKey.Placeholder,value:t.googleApiKey,type:"text",placeholder:p.ZP.Settings.Access.Google.ApiKey.Placeholder,onChange:e=>{t.update(t=>t.googleApiKey=e.currentTarget.value)}})]}),(0,o.jsx)("div",{className:b()["auth-actions"],children:(0,o.jsx)(S.h,{text:p.ZP.Auth.Confirm,type:"primary",onClick:()=>e(u.y$.Chat)})})]})}var A=n(1610);function E(e){return(0,o.jsxs)("div",{className:(0,C.Z)("no-dark",r()["loading-content"]),children:[!e.noLogo&&(0,o.jsx)(l.Z,{width:30,height:30}),(0,o.jsx)(s.Z,{})]})}n(75507);let P=(0,d.default)(async()=>(await n.e(906).then(n.bind(n,2901))).Artifacts,{loadableGenerated:{webpack:()=>[2901]},loading:()=>(0,o.jsx)(E,{noLogo:!0})}),M=(0,d.default)(async()=>(await n.e(906).then(n.bind(n,52882))).Settings,{loadableGenerated:{webpack:()=>[52882]},loading:()=>(0,o.jsx)(E,{noLogo:!0})}),I=(0,d.default)(async()=>(await n.e(906).then(n.bind(n,61448))).Chat,{loadableGenerated:{webpack:()=>[61448]},loading:()=>(0,o.jsx)(E,{noLogo:!0})}),j=(0,d.default)(async()=>(await n.e(906).then(n.bind(n,72649))).NewChat,{loadableGenerated:{webpack:()=>[72649]},loading:()=>(0,o.jsx)(E,{noLogo:!0})}),N=(0,d.default)(async()=>(await n.e(906).then(n.bind(n,83921))).MaskPage,{loadableGenerated:{webpack:()=>[83921]},loading:()=>(0,o.jsx)(E,{noLogo:!0})}),O=(0,d.default)(async()=>(await n.e(906).then(n.bind(n,89483))).PluginPage,{loadableGenerated:{webpack:()=>[89483]},loading:()=>(0,o.jsx)(E,{noLogo:!0})}),D=(0,d.default)(async()=>(await n.e(906).then(n.bind(n,34821))).SearchChatPage,{loadableGenerated:{webpack:()=>[34821]},loading:()=>(0,o.jsx)(E,{noLogo:!0})}),K=(0,d.default)(async()=>(await n.e(906).then(n.bind(n,83125))).Sd,{loadableGenerated:{webpack:()=>[83125]},loading:()=>(0,o.jsx)(E,{noLogo:!0})});function U(){let e=(0,v.MG)();(0,a.useEffect)(()=>{document.body.classList.remove("light"),document.body.classList.remove("dark"),"dark"===e.theme?document.body.classList.add("dark"):"light"===e.theme&&document.body.classList.add("light");let t=document.querySelector('meta[name="theme-color"][media*="dark"]'),n=document.querySelector('meta[name="theme-color"][media*="light"]');if("auto"===e.theme)null==t||t.setAttribute("content","#151515"),null==n||n.setAttribute("content","#fafafa");else{let e=(0,c.K1)("--theme-color");null==t||t.setAttribute("content",e),null==n||n.setAttribute("content",e)}},[e.theme])}let L=()=>{let[e,t]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{t(!0)},[]),e},R=()=>{var e;let t=document.createElement("link"),n=(null===(e=(0,T.Z)())||void 0===e?void 0:e.buildMode)==="export"?"https://fonts.googleapis.com":"/google-fonts";t.rel="stylesheet",t.href=n+"/css2?family="+encodeURIComponent("Noto Sans:wght@300;400;700;900")+"&display=swap",document.head.appendChild(t)};function W(e){return(0,o.jsx)("div",{className:r()["window-content"],id:u.ym.AppBody,children:null==e?void 0:e.children})}function Z(){var e;let t=(0,v.MG)(),n=(0,h.TH)(),i=n.pathname.includes(u.y$.Artifacts),l=n.pathname===u.y$.Home,s=n.pathname===u.y$.Auth,d=n.pathname===u.y$.Sd,m=n.pathname===u.y$.SdNew,p=(0,c.S0)(),g=(null===(e=(0,T.Z)())||void 0===e?void 0:e.isApp)||t.tightBorder&&!p;return((0,a.useEffect)(()=>{R()},[]),i)?(0,o.jsx)(h.Z5,{children:(0,o.jsx)(h.AW,{path:"/artifacts/:id",element:(0,o.jsx)(P,{})})}):(0,o.jsx)("div",{className:(0,C.Z)(r().container,{[r()["tight-container"]]:g}),children:s?(0,o.jsx)(x,{}):d||m?(0,o.jsx)(K,{}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f.Ke,{className:(0,C.Z)({[r()["sidebar-show"]]:l})}),(0,o.jsx)(W,{children:(0,o.jsxs)(h.Z5,{children:[(0,o.jsx)(h.AW,{path:u.y$.Home,element:(0,o.jsx)(I,{})}),(0,o.jsx)(h.AW,{path:u.y$.NewChat,element:(0,o.jsx)(j,{})}),(0,o.jsx)(h.AW,{path:u.y$.Masks,element:(0,o.jsx)(N,{})}),(0,o.jsx)(h.AW,{path:u.y$.Plugins,element:(0,o.jsx)(O,{})}),(0,o.jsx)(h.AW,{path:u.y$.SearchChat,element:(0,o.jsx)(D,{})}),(0,o.jsx)(h.AW,{path:u.y$.Chat,element:(0,o.jsx)(I,{})}),(0,o.jsx)(h.AW,{path:u.y$.Settings,element:(0,o.jsx)(M,{})})]})})]})})}function F(){let e=(0,v.MG)(),t=(0,A.Lw)(e.modelConfig.providerName);(0,a.useEffect)(()=>{(async()=>{let n=await t.llm.models();e.mergeModels(n)})()},[])}function G(){return(U(),F(),(0,a.useEffect)(()=>{let e=(0,p.wY)();e!==document.documentElement.lang&&(document.documentElement.lang=e)},[]),(0,a.useEffect)(()=>{console.log("[Config] got config from build time",(0,T.Z)()),w._X.getState().fetch()},[]),L())?(0,o.jsx)(m.S,{children:(0,o.jsx)(g.UT,{children:(0,o.jsx)(Z,{})})}):(0,o.jsx)(E,{})}},2791:function(e,t,n){"use strict";n.d(t,{Ke:function(){return Z},M3:function(){return R},th:function(){return U},ec:function(){return L},yw:function(){return W},RW:function(){return K},Ku:function(){return D}});var o,a,i,r,l,s=n(57437),c=n(2265),d=n(71869),u=n.n(d),m=n(35499),p=n(52846);function h(){return(h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}var g=function(e){return p.createElement("svg",h({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),o||(o=p.createElement("defs",null,p.createElement("path",{id:"settings_svg__a",d:"M0 0h16v16H0z"}))),p.createElement("g",null,a||(a=p.createElement("mask",{id:"settings_svg__b",fill:"#fff"},p.createElement("use",{xlinkHref:"#settings_svg__a"}))),p.createElement("g",{mask:"url(#settings_svg__b)"},p.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M13.33 5.67 10 0H3.33L0 5.67l3.33 5.66H10l3.33-5.66Z",transform:"translate(1.333 2.333)"}),p.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3.33 1.67C3.33.75 2.59 0 1.67 0 .75 0 0 .75 0 1.67c0 .92.75 1.66 1.67 1.66.92 0 1.66-.74 1.66-1.66Z",transform:"translate(6.333 6.333)"}))))},f=n(59566),v=n(58870),y=n(15592);function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}var S=function(e){return p.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),i||(i=p.createElement("defs",null,p.createElement("path",{id:"mask_svg__a",d:"M0 0h16v16H0z"}))),p.createElement("g",null,r||(r=p.createElement("mask",{id:"mask_svg__b",fill:"#fff"},p.createElement("use",{xlinkHref:"#mask_svg__a"}))),p.createElement("g",{mask:"url(#mask_svg__b)"},p.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M6 0C2.69 0 0 2.54 0 5.67s2.69 5.66 6 5.66 6-2.53 6-5.66C12 2.54 9.31 0 6 0Z",transform:"translate(2 3.333)"}),p.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M1 0C.45 0 0 .6 0 1.33c0 .74.45 1.34 1 1.34s1-.6 1-1.34C2 .6 1.55 0 1 0Z",transform:"rotate(15 -22.183 22.313)"}),p.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M1 0C.45 0 0 .6 0 1.33c0 .74.45 1.34 1 1.34s1-.6 1-1.34C2 .6 1.55 0 1 0Z",transform:"rotate(165 5.213 5.304)"}),p.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M4 4.51c1.04-1.04 1.15-2.74.1-3.78C3.06-.32 1.04-.2 0 .84",transform:"translate(9.667 2.493)"}),p.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M.84 4.51C-.2 3.47-.32 1.77.73.73 1.77-.32 3.8-.2 4.84.84",transform:"translate(1.493 2.493)"}),p.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0c.17.43.73 1.09 1.67.29.93.8 1.5.14 1.66-.29",transform:"translate(6.5 11.67)"}))))},w=n(36177);function T(){return(T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}var _=function(e){return p.createElement("svg",T({xmlns:"http://www.w3.org/2000/svg",width:"1.2rem",height:"1.2rem",viewBox:"0 0 24 24"},e),l||(l=p.createElement("g",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2},p.createElement("circle",{cx:12,cy:12,r:9}),p.createElement("path",{d:"M11.307 9.739 15 9l-.739 3.693a2 2 0 0 1-1.568 1.569L9 15l.739-3.693a2 2 0 0 1 1.568-1.568"}))))},k=n(17455),C=n(88587),x=n(62425),A=n(75591),E=n(59208),P=n(90261),M=n(92944),I=n(24232),j=n(65878),N=n(75504);let O=(0,I.default)(async()=>(await n.e(906).then(n.bind(n,10432))).ChatList,{loadableGenerated:{webpack:()=>[10432]},loading:()=>null});function D(){let e=(0,x.aK)();(0,c.useEffect)(()=>{let t=t=>{(t.altKey||t.ctrlKey)&&("ArrowUp"===t.key?e.nextSession(-1):"ArrowDown"===t.key&&e.nextSession(1))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)})}function K(){var e;let t=e=>Math.min(A.kf,e),n=(0,x.MG)(),o=(0,c.useRef)(0),a=(0,c.useRef)(null!==(e=n.sidebarWidth)&&void 0!==e?e:A.M),i=(0,c.useRef)(Date.now()),r=()=>{n.update(e=>{e.sidebarWidth<A.NQ?e.sidebarWidth=A.M:e.sidebarWidth=A.bH})},l=(0,M.S0)(),s=!l&&n.sidebarWidth<A.NQ;return(0,c.useEffect)(()=>{var e;let o=s?A.bH:t(null!==(e=n.sidebarWidth)&&void 0!==e?e:A.M);document.documentElement.style.setProperty("--sidebar-width",l?"100vw":"".concat(o,"px"))},[n.sidebarWidth,l,s]),{onDragStart:e=>{o.current=e.clientX,a.current=n.sidebarWidth;let l=Date.now(),s=e=>{if(Date.now()<i.current+20)return;i.current=Date.now();let r=e.clientX-o.current,l=t(a.current+r);n.update(e=>{l<A.NQ?e.sidebarWidth=A.bH:e.sidebarWidth=l})},c=()=>{window.removeEventListener("pointermove",s),window.removeEventListener("pointerup",c),Date.now()-l<300&&r()};window.addEventListener("pointermove",s),window.addEventListener("pointerup",c)},shouldNarrow:s}}function U(e){let t=(0,M.S0)(),n=(0,c.useMemo)(()=>(0,M.gn)()&&t,[t]),{children:o,className:a,onDragStart:i,shouldNarrow:r}=e;return(0,s.jsxs)("div",{className:(0,N.Z)(u().sidebar,a,{[u()["narrow-sidebar"]]:r}),style:{transition:t&&n?"none":void 0},children:[o,(0,s.jsx)("div",{className:u()["sidebar-drag"],onPointerDown:e=>i(e),children:(0,s.jsx)(w.Z,{})})]})}function L(e){let{title:t,subTitle:n,logo:o,children:a,shouldNarrow:i}=e;return(0,s.jsxs)(c.Fragment,{children:[(0,s.jsxs)("div",{className:(0,N.Z)(u()["sidebar-header"],{[u()["sidebar-header-narrow"]]:i}),"data-tauri-drag-region":!0,children:[(0,s.jsxs)("div",{className:u()["sidebar-title-container"],children:[(0,s.jsx)("div",{className:(0,N.Z)(u()["sidebar-title"],"logo-text"),"data-tauri-drag-region":!0,style:{visibility:"visible"},children:t}),(0,s.jsx)("div",{className:u()["sidebar-sub-title"],children:n})]}),(0,s.jsx)("div",{className:(0,N.Z)(u()["sidebar-logo"],"no-dark"),children:o})]}),a]})}function R(e){let{onClick:t,children:n}=e;return(0,s.jsx)("div",{className:u()["sidebar-body"],onClick:t,children:n})}function W(e){let{primaryAction:t,secondaryAction:n}=e;return(0,s.jsxs)("div",{className:u()["sidebar-tail"],children:[(0,s.jsx)("div",{className:u()["sidebar-actions"],children:t}),(0,s.jsx)("div",{className:u()["sidebar-actions"],children:n})]})}function Z(e){D();let{onDragStart:t,shouldNarrow:n}=K(),[o,a]=(0,c.useState)(!1),i=(0,E.s0)(),r=(0,x.MG)(),l=(0,x.aK)();return(0,s.jsxs)(U,{onDragStart:t,shouldNarrow:n,...e,children:[(0,s.jsxs)(L,{title:"NeatChat",subTitle:"A Better AI assistant.",logo:(0,s.jsx)(k.Z,{width:44,height:44}),shouldNarrow:n,children:[(0,s.jsxs)("div",{className:u()["sidebar-header-bar"],children:[(0,s.jsx)(m.h,{icon:(0,s.jsx)(S,{}),text:n?void 0:C.ZP.Mask.Name,className:u()["sidebar-bar-button"],onClick:()=>{!0!==r.dontShowMaskSplashScreen?i(A.y$.NewChat,{state:{fromHome:!0}}):i(A.y$.Masks,{state:{fromHome:!0}})},shadow:!0}),(0,s.jsx)(m.h,{icon:(0,s.jsx)(_,{}),text:n?void 0:C.ZP.Discovery.Name,className:u()["sidebar-bar-button"],onClick:()=>a(!0),shadow:!0})]}),o&&(0,s.jsx)(j.d7,{items:[...A.Bs.map(e=>({title:e.name,value:e.path}))],onClose:()=>a(!1),onSelection:e=>{i(e[0],{state:{fromHome:!0}})}})]}),(0,s.jsx)(R,{onClick:e=>{e.target===e.currentTarget&&i(A.y$.Home)},children:(0,s.jsx)(O,{narrow:n})}),(0,s.jsx)(W,{primaryAction:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:(0,N.Z)(u()["sidebar-action"],u().mobile),children:(0,s.jsx)(m.h,{icon:(0,s.jsx)(y.Z,{}),onClick:async()=>{await (0,j.i0)(C.ZP.Home.DeleteChat)&&l.deleteSession(l.currentSessionIndex)}})}),(0,s.jsx)("div",{className:u()["sidebar-action"],children:(0,s.jsx)(P.rU,{to:A.y$.Settings,children:(0,s.jsx)(m.h,{aria:C.ZP.Settings.Title,icon:(0,s.jsx)(g,{}),shadow:!0})})}),(0,s.jsx)("div",{className:u()["sidebar-action"],children:(0,s.jsx)("a",{href:A.Bv,target:"_blank",rel:"noopener noreferrer",children:(0,s.jsx)(m.h,{aria:C.ZP.Export.MessageFromChatGPT,icon:(0,s.jsx)(f.Z,{}),shadow:!0})})})]}),secondaryAction:(0,s.jsx)(m.h,{icon:(0,s.jsx)(v.Z,{}),text:n?void 0:C.ZP.Home.NewChat,onClick:()=>{r.dontShowMaskSplashScreen?(l.newSession(),i(A.y$.Chat)):i(A.y$.NewChat)},shadow:!0})})]})}},65878:function(e,t,n){"use strict";n.d(t,{IT:function(){return Z},II:function(){return N},aV:function(){return E},HC:function(){return A},u_:function(){return P},WU:function(){return O},J2:function(){return x},Ph:function(){return D},Qf:function(){return W},tP:function(){return G},d7:function(){return F},i0:function(){return K},vi:function(){return R},K4:function(){return M},G5:function(){return L},CF:function(){return j}});var o,a,i,r=n(57437),l=n(99520),s=n.n(l);n(24053);var c=n(38669),d=n(56073),u=n(52846);function m(){return(m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}var p=function(e){return u.createElement("svg",m({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 24 24"},e),o||(o=u.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M19.707 5.707a1 1 0 0 0-1.414-1.414l-4.261 4.26a4 4 0 0 0-5.478 5.478l-4.261 4.262a1 1 0 1 0 1.414 1.414l4.261-4.26a4 4 0 0 0 5.478-5.478l4.261-4.262Zm-7.189 4.36a2 2 0 0 0-2.45 2.45l2.45-2.45Zm-1.036 3.865 2.45-2.45a2 2 0 0 1-2.45 2.45Zm4.283-9.111C14.63 4.32 13.367 4 12 4 9.148 4 6.757 5.395 4.998 6.906c-1.765 1.517-2.99 3.232-3.534 4.064a1.876 1.876 0 0 0 0 2.06 20.304 20.304 0 0 0 2.748 3.344l1.414-1.414A18.315 18.315 0 0 1 3.18 12c.51-.773 1.598-2.268 3.121-3.577C7.874 7.072 9.816 6 12 6a7.06 7.06 0 0 1 2.22.367l1.545-1.546ZM12 18a7.06 7.06 0 0 1-2.22-.367L8.236 19.18c1.136.5 2.398.821 3.765.821 2.852 0 5.243-1.395 7.002-2.906 1.765-1.517 2.99-3.232 3.534-4.064.411-.628.411-1.431 0-2.06a20.303 20.303 0 0 0-2.748-3.344L18.374 9.04A18.312 18.312 0 0 1 20.82 12c-.51.773-1.598 2.268-3.121 3.577C16.126 16.928 14.184 18 12 18Z",clipRule:"evenodd"})))};function h(){return(h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}var g=function(e){return u.createElement("svg",h({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),a||(a=u.createElement("defs",null,u.createElement("path",{id:"down_svg__a",d:"M0 0h16v16H0z"}))),u.createElement("g",{transform:"rotate(-90 8 8)"},i||(i=u.createElement("mask",{id:"down_svg__b",fill:"#fff"},u.createElement("use",{xlinkHref:"#down_svg__a"}))),u.createElement("g",{mask:"url(#down_svg__b)"},u.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M4 8 0 4l4-4",transform:"translate(6.333 4)"}))))},f=n(12402),v=n(82985),y=n(14845),b=n(68397),S=n(88587),w=n(34040),T=n(2265),_=n(35499),k=n(75504),C=n(92944);function x(e){return(0,r.jsxs)("div",{className:s().popover,children:[e.children,e.open&&(0,r.jsx)("div",{className:s()["popover-mask"],onClick:e.onClose}),e.open&&(0,r.jsx)("div",{className:s()["popover-content"],children:e.content})]})}function A(e){return(0,r.jsxs)("div",{className:(0,k.Z)(s()["list-item"],{[s().vertical]:e.vertical},e.className),onClick:e.onClick,children:[(0,r.jsxs)("div",{className:s()["list-header"],children:[e.icon&&(0,r.jsx)("div",{className:s()["list-icon"],children:e.icon}),(0,r.jsxs)("div",{className:s()["list-item-title"],children:[(0,r.jsx)("div",{children:e.title}),e.subTitle&&(0,r.jsx)("div",{className:s()["list-item-sub-title"],children:e.subTitle})]})]}),e.children]})}function E(e){return(0,r.jsx)("div",{className:s().list,id:e.id,children:e.children})}function P(e){var t;(0,T.useEffect)(()=>{let t=t=>{if("Escape"===t.key){var n;null===(n=e.onClose)||void 0===n||n.call(e)}};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[]);let[n,o]=(0,T.useState)(!!e.defaultMax);return(0,r.jsxs)("div",{className:(0,k.Z)(s()["modal-container"],{[s()["modal-container-max"]]:n}),children:[(0,r.jsxs)("div",{className:s()["modal-header"],children:[(0,r.jsx)("div",{className:s()["modal-title"],children:e.title}),(0,r.jsxs)("div",{className:s()["modal-header-actions"],children:[(0,r.jsx)("div",{className:s()["modal-header-action"],onClick:()=>o(!n),children:n?(0,r.jsx)(b.Z,{}):(0,r.jsx)(y.Z,{})}),(0,r.jsx)("div",{className:s()["modal-header-action"],onClick:e.onClose,children:(0,r.jsx)(c.Z,{})})]})]}),(0,r.jsx)("div",{className:s()["modal-content"],children:e.children}),(0,r.jsxs)("div",{className:s()["modal-footer"],children:[e.footer,(0,r.jsx)("div",{className:s()["modal-actions"],children:null===(t=e.actions)||void 0===t?void 0:t.map((e,t)=>(0,r.jsx)("div",{className:s()["modal-action"],children:e},t))})]})]})}function M(e){let t=document.createElement("div");t.className="modal-mask",document.body.appendChild(t);let n=(0,w.createRoot)(t),o=()=>{var o;null===(o=e.onClose)||void 0===o||o.call(e),n.unmount(),t.remove()};t.onclick=e=>{e.target===t&&o()},n.render((0,r.jsx)(P,{...e,onClose:o}))}function I(e){return(0,r.jsx)("div",{className:s()["toast-container"],children:(0,r.jsxs)("div",{className:s()["toast-content"],children:[(0,r.jsx)("span",{children:e.content}),e.action&&(0,r.jsx)("button",{onClick:()=>{var t,n,o;null===(n=e.action)||void 0===n||null===(t=n.onClick)||void 0===t||t.call(n),null===(o=e.onClose)||void 0===o||o.call(e)},className:s()["toast-action"],children:e.action.text})]})})}function j(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,o=document.createElement("div");o.className=s().show,document.body.appendChild(o);let a=(0,w.createRoot)(o),i=()=>{o.classList.add(s().hide),setTimeout(()=>{a.unmount(),o.remove()},300)};setTimeout(()=>{i()},n),a.render((0,r.jsx)(I,{content:e,action:t,onClose:i}))}function N(e){return(0,r.jsx)("textarea",{...e,className:(0,k.Z)(s().input,e.className)})}function O(e){let[t,n]=(0,T.useState)(!1);return(0,r.jsxs)("div",{className:"password-input-container",children:[(0,r.jsx)(_.h,{aria:e.aria,icon:t?(0,r.jsx)(d.Z,{}):(0,r.jsx)(p,{}),onClick:function(){n(!t)},className:"password-eye"}),(0,r.jsx)("input",{...e,type:t?"text":"password",className:"password-input"})]})}function D(e){let{className:t,children:n,align:o,...a}=e;return(0,r.jsxs)("div",{className:(0,k.Z)(s()["select-with-icon"],{[s()["left-align-option"]]:"left"===o},t),children:[(0,r.jsx)("select",{className:s()["select-with-icon-select"],...a,children:n}),(0,r.jsx)(g,{className:s()["select-with-icon-icon"]})]})}function K(e){let t=document.createElement("div");t.className="modal-mask",document.body.appendChild(t);let n=(0,w.createRoot)(t),o=()=>{n.unmount(),t.remove()};return new Promise(t=>{n.render((0,r.jsx)(P,{title:S.ZP.UI.Confirm,actions:[(0,r.jsx)(_.h,{text:S.ZP.UI.Cancel,onClick:()=>{t(!1),o()},icon:(0,r.jsx)(v.Z,{}),tabIndex:0,bordered:!0,shadow:!0},"cancel"),(0,r.jsx)(_.h,{text:S.ZP.UI.Confirm,type:"primary",onClick:()=>{t(!0),o()},icon:(0,r.jsx)(f.Z,{}),tabIndex:0,autoFocus:!0,bordered:!0,shadow:!0},"confirm")],onClose:o,children:e}))})}function U(e){var t;let[n,o]=(0,T.useState)(e.value),a=t=>{e.onChange(t),o(t)};return(0,r.jsx)("textarea",{className:s()["modal-input"],autoFocus:!0,value:n,onInput:e=>a(e.currentTarget.value),rows:null!==(t=e.rows)&&void 0!==t?t:3})}function L(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,o=document.createElement("div");o.className="modal-mask",document.body.appendChild(o);let a=(0,w.createRoot)(o),i=()=>{a.unmount(),o.remove()};return new Promise(o=>{let l=t;a.render((0,r.jsx)(P,{title:e,actions:[(0,r.jsx)(_.h,{text:S.ZP.UI.Cancel,onClick:()=>{i()},icon:(0,r.jsx)(v.Z,{}),bordered:!0,shadow:!0,tabIndex:0},"cancel"),(0,r.jsx)(_.h,{text:S.ZP.UI.Confirm,type:"primary",onClick:()=>{o(l),i()},icon:(0,r.jsx)(f.Z,{}),bordered:!0,shadow:!0,tabIndex:0},"confirm")],onClose:i,children:(0,r.jsx)(U,{onChange:e=>l=e,value:t,rows:n})}))})}function R(e,t,n,o){M({title:S.ZP.Export.Image.Modal,defaultMax:t,children:(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",...o},children:(0,r.jsx)("img",{src:e,alt:"preview",style:null!=n?n:{maxWidth:"100%"}})})})}function W(e){let[t,n]=(0,T.useState)(Array.isArray(e.defaultSelectedValue)?e.defaultSelectedValue:void 0!==e.defaultSelectedValue?[e.defaultSelectedValue]:[]),[o,a]=(0,T.useState)(""),i=(0,T.useRef)(null);(0,T.useEffect)(()=>{let e=()=>{var e;return null===(e=i.current)||void 0===e?void 0:e.focus()};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]);let l=e.items.filter(e=>e.title.toLowerCase().includes(o.toLowerCase())),c=(o,a)=>{var i,r,l;if(e.multiple){o.stopPropagation();let r=t.includes(a)?t.filter(e=>e!==a):[...t,a];n(r),null===(i=e.onSelection)||void 0===i||i.call(e,r)}else n([a]),null===(r=e.onSelection)||void 0===r||r.call(e,[a]),null===(l=e.onClose)||void 0===l||l.call(e)},d=(0,C.S0)();return(0,r.jsx)("div",{className:s().selector,onClick:e.onClose,children:(0,r.jsxs)("div",{className:s()["selector-content"],onClick:e=>{e.stopPropagation()},children:[!1!==e.showSearch&&(0,r.jsx)("div",{className:s()["selector-search"],children:(0,r.jsx)("input",{ref:i,type:"text",placeholder:"",value:o,onChange:e=>a(e.target.value),autoFocus:!d})}),(0,r.jsx)(E,{children:(!1===e.showSearch?e.items:l).map((e,n)=>(0,r.jsx)(A,{className:(0,k.Z)(s()["selector-item"],{[s()["selector-item-disabled"]]:e.disable}),title:e.title,subTitle:e.subTitle,icon:e.icon,onClick:t=>{e.disable?t.stopPropagation():c(t,e.value)},children:t.includes(e.value)?(0,r.jsx)("div",{className:s()["selector-item-selected"]}):(0,r.jsx)(r.Fragment,{})},n))})]})})}function Z(e){let{children:t,right:n=10,top:o=10,...a}=e,i=(0,T.useRef)(),[l,s]=(0,T.useState)(!1),c=(0,T.useCallback)(()=>{if(document.fullscreenElement)document.exitFullscreen();else{var e;null===(e=i.current)||void 0===e||e.requestFullscreen()}},[]);return(0,T.useEffect)(()=>{let e=e=>{e.target===i.current&&s(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e)}},[]),(0,r.jsxs)("div",{ref:i,style:{position:"relative"},...a,children:[(0,r.jsx)("div",{style:{position:"absolute",right:n,top:o},children:(0,r.jsx)(_.h,{icon:l?(0,r.jsx)(b.Z,{}):(0,r.jsx)(y.Z,{}),onClick:c,bordered:!0})}),t]})}function F(e){return(0,r.jsx)("div",{className:s().selector,onClick:e.onClose,children:(0,r.jsx)("div",{className:(0,k.Z)(s()["selector-content"],s().simple),onClick:e=>{e.stopPropagation()},children:(0,r.jsx)(E,{children:e.items.map((t,n)=>(0,r.jsx)(A,{className:s()["selector-item"],title:t.title,onClick:()=>{var n,o;null===(n=e.onSelection)||void 0===n||n.call(e,[t.value]),null===(o=e.onClose)||void 0===o||o.call(e)}},n))})})})}function G(e){var t;let[n,o]=(0,T.useState)(null!==(t=e.defaultSelectedValue)&&void 0!==t?t:[]);return(0,r.jsx)("div",{className:s().selector,onClick:e.onClose,children:(0,r.jsx)("div",{className:(0,k.Z)(s()["selector-content"],s().simple),onClick:e=>{e.stopPropagation()},children:(0,r.jsx)(E,{children:e.items.map((t,a)=>(0,r.jsx)(A,{className:s()["selector-item"],title:t.title,onClick:()=>{var a;let i=n.includes(t.value)?n.filter(e=>e!==t.value):[...n,t.value];o(i),null===(a=e.onSelection)||void 0===a||a.call(e,i)},children:n.includes(t.value)?(0,r.jsx)("div",{className:s()["selector-item-selected"]}):(0,r.jsx)(r.Fragment,{})},a))})})})}},94880:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var o=JSON.parse('{"DR":{"i":"1.1.11-preview.1"}}'),a=n(75591),i=n(49079);let r=()=>{var e,t;if(void 0===i)throw Error("[Server Config] you are importing a nodejs-only module outside of nodejs");let r=null!==(e=i.env.BUILD_MODE)&&void 0!==e?e:"standalone",l=!!i.env.BUILD_APP;return{version:"v"+o.DR.i,...(()=>{try{let e=n(68577),t=e.execSync('git log -1 --format="%at000" --date=unix').toString().trim(),o=e.execSync('git log --pretty=format:"%H" -n 1').toString().trim();return{commitDate:t,commitHash:o}}catch(e){return console.error("[Build Config] No git or not from git repo."),{commitDate:"unknown",commitHash:"unknown"}}})(),buildMode:r,isApp:l,template:null!==(t=i.env.DEFAULT_INPUT_TEMPLATE)&&void 0!==t?t:a.xf}};var l=n(49079);function s(){return"undefined"!=typeof document?JSON.parse(function(e,t){let n;if(document){var o;let t=document.head.querySelector("meta[name='".concat(e,"']"));n=null!==(o=null==t?void 0:t.content)&&void 0!==o?o:""}else n=null!=t?t:"";return n}("config")||"{}"):void 0!==l?r():void 0}},75591:function(e,t,n){"use strict";var o,a,i,r,l,s,c,d,u,m,p,h,g,f,v,y;n.d(t,{AI:function(){return V},AL:function(){return Z},BJ:function(){return W},Bi:function(){return P},Bs:function(){return ex},Bv:function(){return w},Cs:function(){return k},EF:function(){return ep},Er:function(){return er},FN:function(){return eS},FR:function(){return N},Fk:function(){return A},Fv:function(){return ek},Hm:function(){return I},IW:function(){return F},KJ:function(){return l},L:function(){return a},LR:function(){return es},M:function(){return G},MU:function(){return ea},Mo:function(){return K},NQ:function(){return H},PF:function(){return eh},S3:function(){return eg},TE:function(){return x},TH:function(){return _},TW:function(){return z},UT:function(){return s},Uf:function(){return J},Xu:function(){return ef},Xy:function(){return Q},YU:function(){return $},Zq:function(){return ew},bH:function(){return q},bP:function(){return U},cr:function(){return C},dJ:function(){return r},eE:function(){return R},ft:function(){return el},hy:function(){return c},ie:function(){return en},ik:function(){return O},k8:function(){return d},kf:function(){return B},kn:function(){return et},m9:function(){return T},mB:function(){return eb},mX:function(){return ee},n9:function(){return j},nL:function(){return ec},nS:function(){return eC},of:function(){return ed},pG:function(){return L},pW:function(){return ev},rT:function(){return E},rk:function(){return ei},tb:function(){return X},v3:function(){return eo},vo:function(){return ey},x5:function(){return D},xf:function(){return eu},y$:function(){return o},y3:function(){return M},yY:function(){return Y},ym:function(){return i},yp:function(){return em}});let b="tianzhentech",S="NeatChat",w="https://github.com/".concat(b,"/").concat(S),T="https://github.com/".concat(b,"/NeatChat-Awesome-Plugins"),_="https://github.com/".concat(b,"/").concat(S,"/issues"),k="".concat(w,"#keep-updated"),C="".concat(w,"/releases"),x="https://api.github.com/repos/".concat(b,"/").concat(S,"/commits?per_page=1"),A="https://api.github.com/repos/".concat(b,"/").concat(S,"/tags?per_page=1"),E="https://api.stability.ai",P="https://api.openai.com",M="https://api.anthropic.com",I="https://generativelanguage.googleapis.com/",j="https://aip.baidubce.com",N="".concat(j,"/oauth/2.0/token"),O="https://ark.cn-beijing.volces.com",D="https://dashscope.aliyuncs.com/api/",K="https://hunyuan.tencentcloudapi.com",U="https://api.moonshot.cn",L="https://spark-api-open.xf-yun.com",R="https://api.x.ai",W="https://open.bigmodel.cn",Z="/api/cache",F="".concat(Z,"/upload");(u=o||(o={})).Home="/",u.Chat="/chat",u.Settings="/settings",u.NewChat="/new-chat",u.Masks="/masks",u.Plugins="/plugins",u.Auth="/auth",u.Sd="/sd",u.SdNew="/sd-new",u.Artifacts="/artifacts",u.SearchChat="/search-chat",(m=a||(a={})).Cors="",m.Azure="/api/azure",m.OpenAI="/api/openai",m.Anthropic="/api/anthropic",m.Google="/api/google",m.Baidu="/api/baidu",m.ByteDance="/api/bytedance",m.Alibaba="/api/alibaba",m.Tencent="/api/tencent",m.Moonshot="/api/moonshot",m.Iflytek="/api/iflytek",m.Stability="/api/stability",m.Artifacts="/api/artifacts",m.XAI="/api/xai",m.ChatGLM="/api/chatglm",(p=i||(i={})).AppBody="app-body",p.CustomModel="custom-model",(h=r||(r={})).Masks="masks.json",h.Prompts="prompts.json",(g=l||(l={})).Chat="chat-next-web-store",g.Plugin="chat-next-web-plugin",g.Access="access-control",g.Config="app-config",g.Mask="mask-store",g.Prompt="prompt-store",g.Update="chat-update",g.Sync="sync",g.SdList="sd-list";let G=300,B=500,H=230,q=100,z="nk-",V=e=>"unfinished-input-"+e,J="NeatChat",X=6e4,Y="export-markdown";(f=s||(s={})).OpenAI="OpenAI",f.Azure="Azure",f.Google="Google",f.Anthropic="Anthropic",f.Baidu="Baidu",f.ByteDance="ByteDance",f.Alibaba="Alibaba",f.Tencent="Tencent",f.Moonshot="Moonshot",f.Stability="Stability",f.Iflytek="Iflytek",f.XAI="XAI",f.ChatGLM="ChatGLM",(v=c||(c={})).BLOCK_NONE="BLOCK_NONE",v.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",v.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",v.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",(y=d||(d={})).Stability="Stability",y.GPT="GPT",y.GeminiPro="GeminiPro",y.Claude="Claude",y.Ernie="Ernie",y.Doubao="Doubao",y.Qwen="Qwen",y.Hunyuan="Hunyuan",y.Moonshot="Moonshot",y.Iflytek="Iflytek",y.XAI="XAI",y.ChatGLM="ChatGLM";let Q={GeneratePath:"v2beta/stable-image/generate",ExampleEndpoint:"https://api.stability.ai"},$={ChatPath:"v1/messages",ChatPath1:"v1/complete",ExampleEndpoint:"https://api.anthropic.com",Vision:"2023-06-01"},ee={ChatPath:"v1/chat/completions",SpeechPath:"v1/audio/speech",ImagePath:"v1/images/generations",UsagePath:"dashboard/billing/usage",SubsPath:"dashboard/billing/subscription",ListModelPath:"v1/models"},et={ChatPath:(e,t)=>"deployments/".concat(e,"/chat/completions?api-version=").concat(t),ImagePath:(e,t)=>"deployments/".concat(e,"/images/generations?api-version=").concat(t),ExampleEndpoint:"https://{resource-url}/openai"},en={ExampleEndpoint:"https://generativelanguage.googleapis.com/",ChatPath:e=>"v1beta/models/".concat(e,":streamGenerateContent")},eo={ExampleEndpoint:j,ChatPath:e=>{let t=e;return"ernie-4.0-8k"===e&&(t="completions_pro"),"ernie-4.0-8k-preview-0518"===e&&(t="completions_adv_pro"),"ernie-3.5-8k"===e&&(t="completions"),"ernie-speed-8k"===e&&(t="ernie_speed"),"rpc/2.0/ai_custom/v1/wenxinworkshop/chat/".concat(t)}},ea={ExampleEndpoint:"https://ark.cn-beijing.volces.com/api/",ChatPath:"api/v3/chat/completions"},ei={ExampleEndpoint:D,ChatPath:"v1/services/aigc/text-generation/generation"},er={ExampleEndpoint:K},el={ExampleEndpoint:U,ChatPath:"v1/chat/completions"},es={ExampleEndpoint:L,ChatPath:"v1/chat/completions"},ec={ExampleEndpoint:R,ChatPath:"v1/chat/completions"},ed={ExampleEndpoint:W,ChatPath:"api/paas/v4/chat/completions"},eu="{{input}}",em="\nYou are ChatGPT, a large language model trained by {{ServiceProvider}}.\nKnowledge cutoff: {{cutoff}}\nCurrent model: {{model}}\nCurrent time: {{time}}\nLatex inline: \\(x^2\\) \nLatex block: $$e=mc^2$$\n",ep="gpt-4o-mini",eh="gemini-pro",eg={default:"2021-09","gpt-4-turbo":"2023-12","gpt-4-turbo-2024-04-09":"2023-12","gpt-4-turbo-preview":"2023-12","gpt-4o":"2023-10","gpt-4o-2024-05-13":"2023-10","gpt-4o-2024-08-06":"2023-10","gpt-4o-2024-11-20":"2023-10","chatgpt-4o-latest":"2023-10","gpt-4o-mini":"2023-10","gpt-4o-mini-2024-07-18":"2023-10","gpt-4-vision-preview":"2023-04","o1-mini":"2023-10","o1-preview":"2023-10","gemini-pro":"2023-12","gemini-pro-vision":"2023-12"},ef="OpenAI-TTS",ev=["OpenAI-TTS","Edge-TTS"],ey="tts-1",eb="alloy",eS=["tts-1","tts-1-hd"],ew=["alloy","echo","fable","onyx","nova","shimmer"],eT=["gpt-3.5-turbo","gpt-3.5-turbo-1106","gpt-3.5-turbo-0125","gpt-4","gpt-4-0613","gpt-4-32k","gpt-4-32k-0613","gpt-4-turbo","gpt-4-turbo-preview","gpt-4o","gpt-4o-2024-05-13","gpt-4o-2024-08-06","gpt-4o-2024-11-20","chatgpt-4o-latest","gpt-4o-mini","gpt-4o-mini-2024-07-18","gpt-4-vision-preview","gpt-4-turbo-2024-04-09","gpt-4-1106-preview","dall-e-3","o1-mini","o1-preview"],e_=1e3,ek=[...eT.map(e=>({name:e,available:!0,sorted:e_++,provider:{id:"openai",providerName:"OpenAI",providerType:"openai",sorted:1}})),...eT.map(e=>({name:e,available:!0,sorted:e_++,provider:{id:"azure",providerName:"Azure",providerType:"azure",sorted:2}})),...["gemini-1.0-pro","gemini-1.5-pro-latest","gemini-1.5-flash-latest","gemini-exp-1114","gemini-exp-1121","learnlm-1.5-pro-experimental","gemini-pro-vision"].map(e=>({name:e,available:!0,sorted:e_++,provider:{id:"google",providerName:"Google",providerType:"google",sorted:3}})),...["claude-instant-1.2","claude-2.0","claude-2.1","claude-3-sonnet-20240229","claude-3-opus-20240229","claude-3-opus-latest","claude-3-haiku-20240307","claude-3-5-haiku-20241022","claude-3-5-haiku-latest","claude-3-5-sonnet-20240620","claude-3-5-sonnet-20241022","claude-3-5-sonnet-latest"].map(e=>({name:e,available:!0,sorted:e_++,provider:{id:"anthropic",providerName:"Anthropic",providerType:"anthropic",sorted:4}})),...["ernie-4.0-turbo-8k","ernie-4.0-8k","ernie-4.0-8k-preview","ernie-4.0-8k-preview-0518","ernie-4.0-8k-latest","ernie-3.5-8k","ernie-3.5-8k-0205","ernie-speed-128k","ernie-speed-8k","ernie-lite-8k","ernie-tiny-8k"].map(e=>({name:e,available:!0,sorted:e_++,provider:{id:"baidu",providerName:"Baidu",providerType:"baidu",sorted:5}})),...["Doubao-lite-4k","Doubao-lite-32k","Doubao-lite-128k","Doubao-pro-4k","Doubao-pro-32k","Doubao-pro-128k"].map(e=>({name:e,available:!0,sorted:e_++,provider:{id:"bytedance",providerName:"ByteDance",providerType:"bytedance",sorted:6}})),...["qwen-turbo","qwen-plus","qwen-max","qwen-max-0428","qwen-max-0403","qwen-max-0107","qwen-max-longcontext"].map(e=>({name:e,available:!0,sorted:e_++,provider:{id:"alibaba",providerName:"Alibaba",providerType:"alibaba",sorted:7}})),...["hunyuan-pro","hunyuan-standard","hunyuan-lite","hunyuan-role","hunyuan-functioncall","hunyuan-code","hunyuan-vision"].map(e=>({name:e,available:!0,sorted:e_++,provider:{id:"tencent",providerName:"Tencent",providerType:"tencent",sorted:8}})),...["moonshot-v1-8k","moonshot-v1-32k","moonshot-v1-128k"].map(e=>({name:e,available:!0,sorted:e_++,provider:{id:"moonshot",providerName:"Moonshot",providerType:"moonshot",sorted:9}})),...["general","generalv3","pro-128k","generalv3.5","4.0Ultra"].map(e=>({name:e,available:!0,sorted:e_++,provider:{id:"iflytek",providerName:"Iflytek",providerType:"iflytek",sorted:10}})),...["grok-beta"].map(e=>({name:e,available:!0,sorted:e_++,provider:{id:"xai",providerName:"XAI",providerType:"xai",sorted:11}})),...["glm-4-plus","glm-4-0520","glm-4","glm-4-air","glm-4-airx","glm-4-long","glm-4-flashx","glm-4-flash"].map(e=>({name:e,available:!0,sorted:e_++,provider:{id:"chatglm",providerName:"ChatGLM",providerType:"chatglm",sorted:12}}))],eC=15,ex=[{name:"Plugins",path:"/plugins"},{name:"Stable Diffusion",path:"/sd"},{name:"Search Chat",path:"/search-chat"}]},88587:function(e,t,n){"use strict";n.d(t,{nW:function(){return p},DC:function(){return m},t4:function(){return y},ZP:function(){return f},wY:function(){return b},VQ:function(){return v}});var o,a,i=n(94880),r=n(3289);let l=!!(null===(o=(0,i.Z)())||void 0===o?void 0:o.isApp);var s={WIP:"Coming Soon...",Error:{Unauthorized:(null===(a=(0,i.Z)())||void 0===a?void 0:a.isApp)?"\uD83D\uDE06 Oops, there's an issue. No worries:\n     \\ 1 Want to use your own API resources? [Click here](/#/settings) to change settings ":"\uD83D\uDE06 Oops, there's an issue. Let's fix it:\n      1 [Click here](/#/auth) to enter your key \uD83D\uDD11\n      2 Want to use your own API resources? [Click here](/#/settings) to change settings \n     "},Auth:{Return:"Return",Title:"Need Access Code",Tips:"Please enter access code below",SubTips:"Or enter your OpenAI or Google API Key",Input:"access code",Confirm:"Confirm",Later:"Later"},ChatItem:{ChatItemCount:e=>"".concat(e," messages")},Chat:{SubTitle:e=>"".concat(e," messages"),EditMessage:{Title:"Edit All Messages",Topic:{Title:"Topic",SubTitle:"Change the current topic"}},Actions:{ChatList:"Go To Chat List",CompressedHistory:"Compressed History Memory Prompt",Export:"Export All Messages as Markdown",Copy:"Copy",Stop:"Stop",Retry:"Retry",Pin:"Pin",PinToastContent:"Pinned 1 messages to contextual prompts",PinToastAction:"View",Delete:"Delete",Edit:"Edit",FullScreen:"FullScreen",RefreshTitle:"Refresh Title",RefreshToast:"Title refresh request sent",Speech:"Play",StopSpeech:"Stop"},Commands:{new:"Start a new chat",newm:"Start a new chat with mask",next:"Next Chat",prev:"Previous Chat",clear:"Clear Context",fork:"Copy Chat",del:"Delete Chat"},InputActions:{Stop:"Stop",ToBottom:"To Latest",Theme:{auto:"Auto",light:"Light Theme",dark:"Dark Theme"},Prompt:"Prompts",Masks:"Masks",Clear:"Clear Context",Settings:"Settings",UploadImage:"Upload Images"},Rename:"Rename Chat",Typing:"Typing",Input:e=>{var t="".concat(e," to send");return e===String(r.mQ.Enter)&&(t+=", Shift + Enter to wrap"),t},MobileInput:"Type a message...",Send:"Send",StartSpeak:"Start Speak",StopSpeak:"Stop Speak",Config:{Reset:"Reset to Default",SaveAs:"Save as Mask"},IsContext:"Contextual Prompt",ShortcutKey:{Title:"Keyboard Shortcuts",newChat:"Open New Chat",focusInput:"Focus Input Field",copyLastMessage:"Copy Last Reply",copyLastCode:"Copy Last Code Block",showShortcutKey:"Show Shortcuts"}},Export:{Title:"Export Messages",Copy:"Copy All",Download:"Download",MessageFromYou:"Message From You",MessageFromChatGPT:"Message From ChatGPT",Share:"Share to ShareGPT",Format:{Title:"Export Format",SubTitle:"Markdown or PNG Image"},IncludeContext:{Title:"Including Context",SubTitle:"Export context prompts in mask or not"},Steps:{Select:"Select",Preview:"Preview"},Image:{Toast:"Capturing Image...",Modal:"Long press or right click to save image"},Artifacts:{Title:"Share Artifacts",Error:"Share Error"}},Select:{Search:"Search",All:"Select All",Latest:"Select Latest",Clear:"Clear"},Memory:{Title:"Memory Prompt",EmptyContent:"Nothing yet.",Send:"Send Memory",Copy:"Copy Memory",Reset:"Reset Session",ResetConfirm:"Resetting will clear the current conversation history and historical memory. Are you sure you want to reset?"},Home:{NewChat:"New Chat",DeleteChat:"Confirm to delete the selected conversation?",DeleteToast:"Chat Deleted",Revert:"Revert"},Settings:{Title:"Settings",SubTitle:"All Settings",ShowPassword:"ShowPassword",Danger:{Reset:{Title:"Reset All Settings",SubTitle:"Reset all setting items to default",Action:"Reset",Confirm:"Confirm to reset all settings to default?"},Clear:{Title:"Clear All Data",SubTitle:"Clear all messages and settings",Action:"Clear",Confirm:"Confirm to clear all messages and settings?"}},Lang:{Name:"Language",All:"All Languages"},FontSize:{Title:"Font Size",SubTitle:"Adjust font size of chat content"},FontFamily:{Title:"Chat Font Family",SubTitle:"Font Family of the chat content, leave empty to apply global default font",Placeholder:"Font Family Name"},InjectSystemPrompts:{Title:"Inject System Prompts",SubTitle:"Inject a global system prompt for every request"},InputTemplate:{Title:"Input Template",SubTitle:"Newest message will be filled to this template"},Update:{Version:e=>"Version: ".concat(e),IsLatest:"Latest version",CheckUpdate:"Check Update",IsChecking:"Checking update...",FoundUpdate:e=>"Found new version: ".concat(e),GoToUpdate:"Update",Success:"Update Successful.",Failed:"Update Failed."},SendKey:"Send Key",Theme:"Theme",TightBorder:"Tight Border",SendPreviewBubble:{Title:"Send Preview Bubble",SubTitle:"Preview markdown in bubble"},AutoGenerateTitle:{Title:"Auto Generate Title",SubTitle:"Generate a suitable title based on the conversation content"},Sync:{CloudState:"Last Update",NotSyncYet:"Not sync yet",Success:"Sync Success",Fail:"Sync Fail",Config:{Modal:{Title:"Config Sync",Check:"Check Connection"},SyncType:{Title:"Sync Type",SubTitle:"Choose your favorite sync service"},Proxy:{Title:"Enable CORS Proxy",SubTitle:"Enable a proxy to avoid cross-origin restrictions"},ProxyUrl:{Title:"Proxy Endpoint",SubTitle:"Only applicable to the built-in CORS proxy for this project"},WebDav:{Endpoint:"WebDAV Endpoint",UserName:"User Name",Password:"Password"},UpStash:{Endpoint:"UpStash Redis REST Url",UserName:"Backup Name",Password:"UpStash Redis REST Token"}},LocalState:"Local Data",Overview:e=>"".concat(e.chat," chats").concat(e.message," messages").concat(e.prompt," prompts").concat(e.mask," masks"),ImportFailed:"Failed to import from file"},Mask:{Splash:{Title:"Mask Splash Screen",SubTitle:"Show a mask splash screen before starting new chat"},Builtin:{Title:"Hide Builtin Masks",SubTitle:"Hide builtin masks in mask list"}},Prompt:{Disable:{Title:"Disable auto-completion",SubTitle:"Input / to trigger auto-completion"},List:"Prompt List",ListCount:(e,t)=>"".concat(e," built-in, ").concat(t," user-defined"),Edit:"Edit",Modal:{Title:"Prompt List",Add:"Add One",Search:"Search Prompts"},EditModal:{Title:"Edit Prompt"}},HistoryCount:{Title:"Attached Messages Count",SubTitle:"Number of sent messages attached per request"},CompressThreshold:{Title:"History Compression Threshold",SubTitle:"Will compress if uncompressed messages length exceeds the value"},Usage:{Title:"Account Balance",SubTitle:(e,t)=>"Used this month $".concat(e,", subscription $").concat(t),IsChecking:"Checking...",Check:"Check",NoAccess:"Enter API Key to check balance"},Access:{AccessCode:{Title:"Access Code",SubTitle:"Access control Enabled",Placeholder:"Enter Code"},CustomEndpoint:{Title:"Custom Endpoint",SubTitle:"Use custom Azure or OpenAI service"},Provider:{Title:"Model Provider",SubTitle:"Select Azure or OpenAI"},OpenAI:{ApiKey:{Title:"OpenAI API Key",SubTitle:"User custom OpenAI Api Key",Placeholder:"sk-xxx"},Endpoint:{Title:"OpenAI Endpoint",SubTitle:"Must start with http(s):// or use /api/openai as default"}},Azure:{ApiKey:{Title:"Azure Api Key",SubTitle:"Check your api key from Azure console",Placeholder:"Azure Api Key"},Endpoint:{Title:"Azure Endpoint",SubTitle:"Example: "},ApiVerion:{Title:"Azure Api Version",SubTitle:"Check your api version from azure console"}},Anthropic:{ApiKey:{Title:"Anthropic API Key",SubTitle:"Use a custom Anthropic Key to bypass password access restrictions",Placeholder:"Anthropic API Key"},Endpoint:{Title:"Endpoint Address",SubTitle:"Example: "},ApiVerion:{Title:"API Version (claude api version)",SubTitle:"Select and input a specific API version"}},Baidu:{ApiKey:{Title:"Baidu API Key",SubTitle:"Use a custom Baidu API Key",Placeholder:"Baidu API Key"},SecretKey:{Title:"Baidu Secret Key",SubTitle:"Use a custom Baidu Secret Key",Placeholder:"Baidu Secret Key"},Endpoint:{Title:"Endpoint Address",SubTitle:"not supported, configure in .env"}},Tencent:{ApiKey:{Title:"Tencent API Key",SubTitle:"Use a custom Tencent API Key",Placeholder:"Tencent API Key"},SecretKey:{Title:"Tencent Secret Key",SubTitle:"Use a custom Tencent Secret Key",Placeholder:"Tencent Secret Key"},Endpoint:{Title:"Endpoint Address",SubTitle:"not supported, configure in .env"}},ByteDance:{ApiKey:{Title:"ByteDance API Key",SubTitle:"Use a custom ByteDance API Key",Placeholder:"ByteDance API Key"},Endpoint:{Title:"Endpoint Address",SubTitle:"Example: "}},Alibaba:{ApiKey:{Title:"Alibaba API Key",SubTitle:"Use a custom Alibaba Cloud API Key",Placeholder:"Alibaba Cloud API Key"},Endpoint:{Title:"Endpoint Address",SubTitle:"Example: "}},Moonshot:{ApiKey:{Title:"Moonshot API Key",SubTitle:"Use a custom Moonshot API Key",Placeholder:"Moonshot API Key"},Endpoint:{Title:"Endpoint Address",SubTitle:"Example: "}},XAI:{ApiKey:{Title:"XAI API Key",SubTitle:"Use a custom XAI API Key",Placeholder:"XAI API Key"},Endpoint:{Title:"Endpoint Address",SubTitle:"Example: "}},ChatGLM:{ApiKey:{Title:"ChatGLM API Key",SubTitle:"Use a custom ChatGLM API Key",Placeholder:"ChatGLM API Key"},Endpoint:{Title:"Endpoint Address",SubTitle:"Example: "}},Stability:{ApiKey:{Title:"Stability API Key",SubTitle:"Use a custom Stability API Key",Placeholder:"Stability API Key"},Endpoint:{Title:"Endpoint Address",SubTitle:"Example: "}},Iflytek:{ApiKey:{Title:"Iflytek API Key",SubTitle:"Use a Iflytek API Key",Placeholder:"Iflytek API Key"},ApiSecret:{Title:"Iflytek API Secret",SubTitle:"Use a Iflytek API Secret",Placeholder:"Iflytek API Secret"},Endpoint:{Title:"Endpoint Address",SubTitle:"Example: "}},CustomModel:{Title:"Custom Models",SubTitle:"Custom model options, seperated by comma"},Google:{ApiKey:{Title:"API Key",SubTitle:"Obtain your API Key from Google AI",Placeholder:"Google AI API Key"},Endpoint:{Title:"Endpoint Address",SubTitle:"Example: "},ApiVersion:{Title:"API Version (specific to gemini-pro)",SubTitle:"Select a specific API version"},GoogleSafetySettings:{Title:"Google Safety Settings",SubTitle:"Select a safety filtering level"}}},Model:"Model",CompressModel:{Title:"Summary Model",SubTitle:"Model used to compress history and generate title"},Temperature:{Title:"Temperature",SubTitle:"A larger value makes the more random output"},TopP:{Title:"Top P",SubTitle:"Do not alter this value together with temperature"},MaxTokens:{Title:"Max Tokens",SubTitle:"Maximum length of input tokens and generated tokens"},PresencePenalty:{Title:"Presence Penalty",SubTitle:"A larger value increases the likelihood to talk about new topics"},FrequencyPenalty:{Title:"Frequency Penalty",SubTitle:"A larger value decreasing the likelihood to repeat the same line"},TTS:{Enable:{Title:"Enable TTS",SubTitle:"Enable text-to-speech service"},Autoplay:{Title:"Enable Autoplay",SubTitle:"Automatically generate speech and play, you need to enable the text-to-speech switch first"},Model:"Model",Voice:{Title:"Voice",SubTitle:"The voice to use when generating the audio"},Speed:{Title:"Speed",SubTitle:"The speed of the generated audio"},Engine:"TTS Engine"},Realtime:{Enable:{Title:"Realtime Chat",SubTitle:"Enable realtime chat feature"},Provider:{Title:"Model Provider",SubTitle:"Switch between different providers"},Model:{Title:"Model",SubTitle:"Select a model"},ApiKey:{Title:"API Key",SubTitle:"API Key",Placeholder:"API Key"},Azure:{Endpoint:{Title:"Endpoint",SubTitle:"Endpoint"},Deployment:{Title:"Deployment Name",SubTitle:"Deployment Name"}},Temperature:{Title:"Randomness (temperature)",SubTitle:"Higher values result in more random responses"}},EnableModelSearch:"Enable Model Search",EnableModelSearchSubTitle:"Enable to search and filter when selecting models",EnableThemeChange:{Title:"Enable Theme Switch",SubTitle:"Show theme switch button in chat"},EnablePromptHints:{Title:"Enable Prompt Hints Feature",SubTitle:"When enabled, you can trigger prompts with /, when disabled, the prompt feature will be completely turned off"},EnableClearContext:{Title:"Enable Clear Context",SubTitle:"Show clear context button in chat"},EnablePlugins:{Title:"Enable Plugins",SubTitle:"Show plugins button in chat"},EnableShortcuts:{Title:"Enable Shortcuts",SubTitle:"Show shortcuts button in chat"}},Store:{DefaultTopic:"New Conversation",BotHello:"Hello! How can I assist you today?",Error:"Something went wrong, please try again later.",Prompt:{History:e=>"This is a summary of the chat history as a recap: "+e,Topic:"Please generate a four to five word title summarizing our conversation without any lead-in, punctuation, quotation marks, periods, symbols, bold text, or additional text. Remove enclosing quotation marks.",Summarize:"Summarize the discussion briefly in 200 words or less to use as a prompt for future context."}},Copy:{Success:"Copied to clipboard",Failed:"Copy failed, please grant permission to access clipboard"},Download:{Success:"Content downloaded to your directory.",Failed:"Download failed."},Context:{Toast:e=>"With ".concat(e," contextual prompts"),Edit:"Current Chat Settings",Add:"Add a Prompt",Clear:"Context Cleared",Revert:"Revert"},Discovery:{Name:"Discovery"},FineTuned:{Sysmessage:"You are an assistant that"},SearchChat:{Name:"Search",Page:{Title:"Search Chat History",Search:"Enter search query to search chat history",NoResult:"No results found",NoData:"No data",Loading:"Loading...",SubTitle:e=>"Found ".concat(e," results")},Item:{View:"View"}},Plugin:{Name:"Plugins",EnableWeb:"Enable Web Access",Page:{Title:"Plugins",SubTitle:e=>"".concat(e," plugins"),Search:"Search Plugin",Create:"Create",Find:"You can find awesome plugins on github: "},Item:{Info:e=>"".concat(e," method"),View:"View",Edit:"Edit",Delete:"Delete",DeleteConfirm:"Confirm to delete?"},Auth:{None:"None",Basic:"Basic",Bearer:"Bearer",Custom:"Custom",CustomHeader:"Parameter Name",Token:"Token",Proxy:"Using Proxy",ProxyDescription:"Using proxies to solve CORS error",Location:"Location",LocationHeader:"Header",LocationQuery:"Query",LocationBody:"Body"},EditModal:{Title:e=>"Edit Plugin ".concat(e?"(readonly)":""),Download:"Download",Auth:"Authentication Type",Content:"OpenAPI Schema",Load:"Load From URL",Method:"Method",Error:"OpenAPI Schema Error"}},Mask:{Name:"Mask",Page:{Title:"Prompt Template",SubTitle:e=>"".concat(e," prompt templates"),Search:"Search Templates",Create:"Create"},Item:{Info:e=>"".concat(e," prompts"),Chat:"Chat",View:"View",Edit:"Edit",Delete:"Delete",DeleteConfirm:"Confirm to delete?"},EditModal:{Title:e=>"Edit Prompt Template ".concat(e?"(readonly)":""),Download:"Download",Clone:"Clone"},Config:{Avatar:"Bot Avatar",Name:"Bot Name",Sync:{Title:"Use Global Config",SubTitle:"Use global config in this chat",Confirm:"Confirm to override custom config with global config?"},HideContext:{Title:"Hide Context Prompts",SubTitle:"Do not show in-context prompts in chat"},Artifacts:{Title:"Enable Artifacts",SubTitle:"Can render HTML page when enable artifacts."},CodeFold:{Title:"Enable CodeFold",SubTitle:"Automatically collapse/expand overly long code blocks when CodeFold is enabled"},Share:{Title:"Share This Mask",SubTitle:"Generate a link to this mask",Action:"Copy Link"}}},NewChat:{Return:"Return",Skip:"Just Start",Title:"Pick a Mask",SubTitle:"Chat with the Soul behind the Mask",More:"Find More",NotShow:"Never Show Again",ConfirmNoShow:"Confirm to disableYou can enable it in settings later.",Thinking:"Thinking...",Think:"Content of Thought"},UI:{Confirm:"Confirm",Cancel:"Cancel",Close:"Close",Create:"Create",Edit:"Edit",Export:"Export",Import:"Import",Sync:"Sync",Config:"Config"},Exporter:{Description:{Title:"Only messages after clearing the context will be displayed"},Model:"Model",Messages:"Messages",Topic:"Topic",Time:"Time"},URLCommand:{Code:"Detected access code from url, confirm to apply? ",Settings:"Detected settings from url, confirm to apply?"},SdPanel:{Prompt:"Prompt",NegativePrompt:"Negative Prompt",PleaseInput:e=>"Please input ".concat(e),AspectRatio:"Aspect Ratio",ImageStyle:"Image Style",OutFormat:"Output Format",AIModel:"AI Model",ModelVersion:"Model Version",Submit:"Submit",ParamIsRequired:e=>"".concat(e," is required"),Styles:{D3Model:"3d-model",AnalogFilm:"analog-film",Anime:"anime",Cinematic:"cinematic",ComicBook:"comic-book",DigitalArt:"digital-art",Enhance:"enhance",FantasyArt:"fantasy-art",Isometric:"isometric",LineArt:"line-art",LowPoly:"low-poly",ModelingCompound:"modeling-compound",NeonPunk:"neon-punk",Origami:"origami",Photographic:"photographic",PixelArt:"pixel-art",TileTexture:"tile-texture"}},Sd:{SubTitle:e=>"".concat(e," images"),Actions:{Params:"See Params",Copy:"Copy Prompt",Delete:"Delete",Retry:"Retry",ReturnHome:"Return Home",History:"History"},EmptyRecord:"No images yet",Status:{Name:"Status",Success:"Success",Error:"Error",Wait:"Waiting",Running:"Running"},Danger:{Delete:"Confirm to delete?"},GenerateParams:"Generate Params",Detail:"Detail"}},c=n(84802);let d=(0,n(92944).EN)(),u={cn:{WIP:"",Error:{Unauthorized:l?"\uD83D\uDE06 :\n       \\ 1  API [](/#/settings) ":"\uD83D\uDE06 :\n        1 [](/#/auth) \uD83D\uDD11\n        2  API [](/#/settings) \n       "},Auth:{Return:"",Title:"",Tips:"",SubTips:" OpenAI  Google AI ",Input:"",Confirm:"",Later:""},ChatItem:{ChatItemCount:e=>"".concat(e," ")},Chat:{SubTitle:e=>" ".concat(e," "),EditMessage:{Title:"",Topic:{Title:"",SubTitle:""}},Actions:{ChatList:"",CompressedHistory:" Prompt",Export:"",Copy:"",Stop:"",Retry:"",Pin:"",PinToastContent:" 1 ",PinToastAction:"",Delete:"",Edit:"",FullScreen:"",RefreshTitle:"",RefreshToast:"",Speech:"",StopSpeech:""},Commands:{new:"",newm:"",next:"",prev:"",clear:"",fork:"",del:""},InputActions:{Stop:"",ToBottom:"",Theme:{auto:"",light:"",dark:""},Prompt:"",Masks:"",Clear:"",Settings:"",UploadImage:""},Rename:"",Typing:"",Input:e=>{var t="".concat(e," ");return e===String(r.mQ.Enter)&&(t+="Shift + Enter "),t},MobileInput:"...",Send:"",StartSpeak:"",StopSpeak:"",Config:{Reset:"",SaveAs:""},IsContext:"",ShortcutKey:{Title:"",newChat:"",focusInput:"",copyLastMessage:"",copyLastCode:"",showShortcutKey:""}},Export:{Title:"",Copy:"",Download:"",Share:" ShareGPT",MessageFromYou:"",MessageFromChatGPT:"ChatGPT",Format:{Title:"",SubTitle:" Markdown  PNG "},IncludeContext:{Title:"",SubTitle:""},Steps:{Select:"",Preview:""},Image:{Toast:"",Modal:""},Artifacts:{Title:"",Error:""}},Select:{Search:"",All:"",Latest:"",Clear:""},Memory:{Title:"",EmptyContent:"",Send:"",Copy:"",Reset:"[unused]",ResetConfirm:""},Home:{NewChat:"",DeleteChat:"",DeleteToast:"",Revert:""},Settings:{Title:"",SubTitle:"",ShowPassword:"",Danger:{Reset:{Title:"",SubTitle:"",Action:"",Confirm:""},Clear:{Title:"",SubTitle:"",Action:"",Confirm:""}},Lang:{Name:"Language",All:""},FontSize:{Title:"",SubTitle:""},FontFamily:{Title:"",SubTitle:"",Placeholder:""},InjectSystemPrompts:{Title:"",SubTitle:" ChatGPT "},InputTemplate:{Title:"",SubTitle:""},Update:{Version:e=>"".concat(e),IsLatest:"",CheckUpdate:"",IsChecking:"...",FoundUpdate:e=>"".concat(e),GoToUpdate:"",Success:"",Failed:""},SendKey:"",Theme:"",TightBorder:"",SendPreviewBubble:{Title:"",SubTitle:" Markdown "},AutoGenerateTitle:{Title:"",SubTitle:""},Sync:{CloudState:"",NotSyncYet:"",Success:"",Fail:"",Config:{Modal:{Title:"",Check:""},SyncType:{Title:"",SubTitle:""},Proxy:{Title:"",SubTitle:""},ProxyUrl:{Title:"",SubTitle:""},WebDav:{Endpoint:"WebDAV ",UserName:"",Password:""},UpStash:{Endpoint:"UpStash Redis REST Url",UserName:"",Password:"UpStash Redis REST Token"}},LocalState:"",Overview:e=>"".concat(e.chat," ").concat(e.message," ").concat(e.prompt," ").concat(e.mask," "),ImportFailed:""},Mask:{Splash:{Title:"",SubTitle:""},Builtin:{Title:"",SubTitle:""}},Prompt:{Disable:{Title:"",SubTitle:" / "},List:"",ListCount:(e,t)=>" ".concat(e,"  ").concat(t," "),Edit:"",Modal:{Title:"",Add:"",Search:""},EditModal:{Title:""}},HistoryCount:{Title:"",SubTitle:""},CompressThreshold:{Title:"",SubTitle:""},Usage:{Title:"",SubTitle:(e,t)=>" $".concat(e," $").concat(t),IsChecking:"",Check:"",NoAccess:" API Key "},Access:{AccessCode:{Title:"",SubTitle:"",Placeholder:""},CustomEndpoint:{Title:"",SubTitle:" Azure  OpenAI "},Provider:{Title:"",SubTitle:""},OpenAI:{ApiKey:{Title:"API Key",SubTitle:" OpenAI Key ",Placeholder:"OpenAI API Key"},Endpoint:{Title:"",SubTitle:" http(s)://"}},Azure:{ApiKey:{Title:"",SubTitle:" Azure Key ",Placeholder:"Azure API Key"},Endpoint:{Title:"",SubTitle:""},ApiVerion:{Title:" (azure api version)",SubTitle:""}},Anthropic:{ApiKey:{Title:"",SubTitle:" Anthropic Key ",Placeholder:"Anthropic API Key"},Endpoint:{Title:"",SubTitle:""},ApiVerion:{Title:" (claude api version)",SubTitle:" API "}},Google:{ApiKey:{Title:"API ",SubTitle:" Google AI  API ",Placeholder:"Google AI API KEY"},Endpoint:{Title:"",SubTitle:""},ApiVersion:{Title:"API  gemini-pro",SubTitle:" API "},GoogleSafetySettings:{Title:"Google ",SubTitle:""}},Baidu:{ApiKey:{Title:"API Key",SubTitle:" Baidu API Key",Placeholder:"Baidu API Key"},SecretKey:{Title:"Secret Key",SubTitle:" Baidu Secret Key",Placeholder:"Baidu Secret Key"},Endpoint:{Title:"",SubTitle:".env"}},Tencent:{ApiKey:{Title:"API Key",SubTitle:"API Key",Placeholder:"Tencent API Key"},SecretKey:{Title:"Secret Key",SubTitle:"Secret Key",Placeholder:"Tencent Secret Key"},Endpoint:{Title:"",SubTitle:".env"}},ByteDance:{ApiKey:{Title:"",SubTitle:" ByteDance API Key",Placeholder:"ByteDance API Key"},Endpoint:{Title:"",SubTitle:""}},Alibaba:{ApiKey:{Title:"",SubTitle:"API Key",Placeholder:"Alibaba Cloud API Key"},Endpoint:{Title:"",SubTitle:""}},Moonshot:{ApiKey:{Title:"",SubTitle:"API Key",Placeholder:"Moonshot API Key"},Endpoint:{Title:"",SubTitle:""}},XAI:{ApiKey:{Title:"",SubTitle:"XAI API Key",Placeholder:"XAI API Key"},Endpoint:{Title:"",SubTitle:""}},ChatGLM:{ApiKey:{Title:"",SubTitle:" ChatGLM API Key",Placeholder:"ChatGLM API Key"},Endpoint:{Title:"",SubTitle:""}},Stability:{ApiKey:{Title:"",SubTitle:" Stability API Key",Placeholder:"Stability API Key"},Endpoint:{Title:"",SubTitle:""}},Iflytek:{ApiKey:{Title:"ApiKey",SubTitle:" APIKey",Placeholder:"APIKey"},ApiSecret:{Title:"ApiSecret",SubTitle:" APISecret",Placeholder:"APISecret"},Endpoint:{Title:"",SubTitle:""}},CustomModel:{Title:"",SubTitle:""}},Model:" (model)",CompressModel:{Title:"",SubTitle:""},Temperature:{Title:" (temperature)",SubTitle:""},TopP:{Title:" (top_p)",SubTitle:""},MaxTokens:{Title:" (max_tokens)",SubTitle:" Token "},PresencePenalty:{Title:" (presence_penalty)",SubTitle:""},FrequencyPenalty:{Title:" (frequency_penalty)",SubTitle:""},TTS:{Enable:{Title:"",SubTitle:""},Autoplay:{Title:"",SubTitle:""},Model:"",Engine:"",Voice:{Title:"",SubTitle:""},Speed:{Title:"",SubTitle:""}},Realtime:{Enable:{Title:"",SubTitle:""},Provider:{Title:"",SubTitle:""},Model:{Title:"",SubTitle:""},ApiKey:{Title:"API Key",SubTitle:"API Key",Placeholder:"API Key"},Azure:{Endpoint:{Title:"",SubTitle:""},Deployment:{Title:"",SubTitle:""}},Temperature:{Title:" (temperature)",SubTitle:""}},EnableModelSearch:"",EnableModelSearchSubTitle:"",EnableThemeChange:{Title:"",SubTitle:""},EnablePromptHints:{Title:"",SubTitle:" / "},EnableClearContext:{Title:"",SubTitle:""},EnablePlugins:{Title:"",SubTitle:""},EnableShortcuts:{Title:"",SubTitle:""}},Store:{DefaultTopic:"",BotHello:"",Error:"",Prompt:{History:e=>""+e,Topic:'""',Summarize:" prompt 200 "}},Copy:{Success:"",Failed:""},Download:{Success:"",Failed:""},Context:{Toast:e=>" ".concat(e," "),Edit:"",Add:"",Clear:"",Revert:""},Discovery:{Name:""},FineTuned:{Sysmessage:""},SearchChat:{Name:"",Page:{Title:"",Search:"",NoResult:"",NoData:"",Loading:"",SubTitle:e=>" ".concat(e," ")},Item:{View:""}},Plugin:{Name:"",EnableWeb:"",Page:{Title:"",SubTitle:e=>"".concat(e," "),Search:"",Create:"",Find:"Github"},Item:{Info:e=>"".concat(e," "),View:"",Edit:"",Delete:"",DeleteConfirm:""},Auth:{None:"",Basic:"Basic",Bearer:"Bearer",Custom:"",CustomHeader:"",Token:"Token",Proxy:"",ProxyDescription:" CORS ",Location:"",LocationHeader:"Header",LocationQuery:"Query",LocationBody:"Body"},EditModal:{Title:e=>" ".concat(e?"":""),Download:"",Auth:"",Content:"OpenAPI Schema",Load:"",Method:"",Error:""}},Mask:{Name:"",Page:{Title:"",SubTitle:e=>"".concat(e," "),Search:"",Create:""},Item:{Info:e=>" ".concat(e," "),Chat:"",View:"",Edit:"",Delete:"",DeleteConfirm:""},EditModal:{Title:e=>" ".concat(e?"":""),Download:"",Clone:""},Config:{Avatar:"",Name:"",Sync:{Title:"",SubTitle:"",Confirm:""},HideContext:{Title:"",SubTitle:""},Artifacts:{Title:"Artifacts",SubTitle:"HTML"},CodeFold:{Title:"",SubTitle:"/"},Share:{Title:"",SubTitle:"",Action:""}}},NewChat:{Return:"",Skip:"",NotShow:"",ConfirmNoShow:"",Title:"",SubTitle:"",More:"",Think:"",Thinking:"..."},URLCommand:{Code:"",Settings:""},UI:{Confirm:"",Cancel:"",Close:"",Create:"",Edit:"",Export:"",Import:"",Sync:"",Config:""},Exporter:{Description:{Title:""},Model:"",Messages:"",Topic:"",Time:""},SdPanel:{Prompt:"",NegativePrompt:"",PleaseInput:e=>"".concat(e),AspectRatio:"",ImageStyle:"",OutFormat:"",AIModel:"AI",ModelVersion:"",Submit:"",ParamIsRequired:e=>"".concat(e,""),Styles:{D3Model:"3D",AnalogFilm:"",Anime:"",Cinematic:"",ComicBook:"",DigitalArt:"",Enhance:"",FantasyArt:"",Isometric:"",LineArt:"",LowPoly:"",ModelingCompound:"",NeonPunk:"",Origami:"",Photographic:"",PixelArt:"",TileTexture:""}},Sd:{SubTitle:e=>" ".concat(e," "),Actions:{Params:"",Copy:"",Delete:"",Retry:"",ReturnHome:"",History:""},EmptyRecord:"",Status:{Name:"",Success:"",Error:"",Wait:"",Running:""},Danger:{Delete:""},GenerateParams:"",Detail:""}},en:s},m=Object.keys(u),p={cn:"",en:"English"},h="lang",g=u[v()];(0,c.T)(s,g);var f=s;function v(){let e=d.getItem(h);return m.includes(null!=e?e:"")?e:function(){try{var e;let t=new Intl.Locale(navigator.language).maximize(),n=null==t?void 0:null===(e=t.region)||void 0===e?void 0:e.toLowerCase();if(m.includes(n))return n;if(m.includes(t.language))return t.language;return"en"}catch(e){return"en"}}()}function y(e){d.setItem(h,e),location.reload()}function b(){var e;let t=v();return null!==(e=({cn:"zh-Hans"})[t])&&void 0!==e?e:t}},73859:function(e,t,n){"use strict";n.d(t,{$n:function(){return o},hJ:function(){return a}});let o={buildinId:1e5,masks:{},get(e){if(e)return this.masks[e]},add(e){let t={...e,id:this.buildinId++,builtin:!0};return this.masks[t.id]=t,t}},a=[];fetch("/masks.json").then(e=>e.json()).catch(e=>(console.error("[Fetch] failed to fetch masks",e),{cn:[],tw:[],en:[]})).then(e=>{let{cn:t=[],tw:n=[],en:i=[]}=e;return[...t,...n,...i].map(e=>{a.push(o.add(e))})})},75507:function(e,t,n){"use strict";n.r(t),Array.prototype.at||(Array.prototype.at=function(e){let t=this.length;if(e<0&&(e=t+e),!(e<0)&&!(e>=t))return Array.prototype.slice.call(this,e,e+1)[0]})},39138:function(e,t,n){"use strict";n.d(t,{_:function(){return x}});var o,a=n(75591),i=n(1610),r=n(94880),l=n(45578),s=n(20259),c=n(3289),d=n(85564);let u=0,m=(null===(o=(0,r.Z)())||void 0===o?void 0:o.buildMode)==="export",p=m?a.Bi:a.L.OpenAI,h=m?a.Hm:a.L.Google,g=m?a.y3:a.L.Anthropic,f=m?a.n9:a.L.Baidu,v=m?a.ik:a.L.ByteDance,y=m?a.x5:a.L.Alibaba,b=m?a.Mo:a.L.Tencent,S=m?a.bP:a.L.Moonshot,w=m?a.rT:a.L.Stability,T=m?a.pG:a.L.Iflytek,_=m?a.eE:a.L.XAI,k=m?a.BJ:a.L.ChatGLM,C={accessCode:"",useCustomConfig:!1,provider:a.UT.OpenAI,openaiUrl:p,openaiApiKey:"",azureUrl:"",azureApiKey:"",azureApiVersion:"2023-08-01-preview",googleUrl:h,googleApiKey:"",googleApiVersion:"v1",googleSafetySettings:a.hy.BLOCK_ONLY_HIGH,anthropicUrl:g,anthropicApiKey:"",anthropicApiVersion:"2023-06-01",baiduUrl:f,baiduApiKey:"",baiduSecretKey:"",bytedanceUrl:v,bytedanceApiKey:"",alibabaUrl:y,alibabaApiKey:"",moonshotUrl:S,moonshotApiKey:"",stabilityUrl:w,stabilityApiKey:"",tencentUrl:b,tencentSecretKey:"",tencentSecretId:"",iflytekUrl:T,iflytekApiKey:"",iflytekApiSecret:"",xaiUrl:_,xaiApiKey:"",chatglmUrl:k,chatglmApiKey:"",needCode:!0,hideUserApiKey:!1,hideBalanceQuery:!1,disableGPT4:!1,disableFastLink:!1,customModels:"",defaultModel:"",edgeTTSVoiceName:"zh-CN-YunxiNeural"},x=(0,l.D)({...C},(e,t)=>({enabledAccessControl(){return this.fetch(),t().needCode},edgeVoiceName(){return this.fetch(),t().edgeTTSVoiceName},isValidOpenAI:()=>(0,s.z)(t(),["openaiApiKey"]),isValidAzure:()=>(0,s.z)(t(),["azureUrl","azureApiKey","azureApiVersion"]),isValidGoogle:()=>(0,s.z)(t(),["googleApiKey"]),isValidAnthropic:()=>(0,s.z)(t(),["anthropicApiKey"]),isValidBaidu:()=>(0,s.z)(t(),["baiduApiKey","baiduSecretKey"]),isValidByteDance:()=>(0,s.z)(t(),["bytedanceApiKey"]),isValidAlibaba:()=>(0,s.z)(t(),["alibabaApiKey"]),isValidTencent:()=>(0,s.z)(t(),["tencentSecretKey","tencentSecretId"]),isValidMoonshot:()=>(0,s.z)(t(),["moonshotApiKey"]),isValidIflytek:()=>(0,s.z)(t(),["iflytekApiKey"]),isValidXAI:()=>(0,s.z)(t(),["xaiApiKey"]),isValidChatGLM:()=>(0,s.z)(t(),["chatglmApiKey"]),isAuthorized(){return this.fetch(),this.isValidOpenAI()||this.isValidAzure()||this.isValidGoogle()||this.isValidAnthropic()||this.isValidBaidu()||this.isValidByteDance()||this.isValidAlibaba()||this.isValidTencent()||this.isValidMoonshot()||this.isValidIflytek()||this.isValidXAI()||this.isValidChatGLM()||!this.enabledAccessControl()||this.enabledAccessControl()&&(0,s.z)(t(),["accessCode"])},fetch(){var t;u>0||(null===(t=(0,r.Z)())||void 0===t?void 0:t.buildMode)==="export"||(u=1,fetch("/api/config",{method:"post",body:null,headers:{...(0,i.wU)()}}).then(e=>e.json()).then(e=>{var t;let n=null!==(t=e.defaultModel)&&void 0!==t?t:"";if(""!==n){let[e,t]=(0,d.En)(n);c.g5.modelConfig.model=e,c.g5.modelConfig.providerName=t}return e}).then(t=>{console.log("[Config] got config from server",t),e(()=>({...t}))}).catch(()=>{console.error("[Config] failed to fetch config")}).finally(()=>{u=2}))}}),{name:a.KJ.Access,version:2,migrate:(e,t)=>(t<2&&(e.openaiApiKey=e.token,e.azureApiVersion="2023-08-01-preview"),e)})},35207:function(e,t,n){"use strict";n.d(t,{ux:function(){return w},HX:function(){return S},tn:function(){return b},aK:function(){return x}});var o=n(92944),a=n(27942),i=n(84065),r=n(1610),l=n(90684),s=n(65878),c=n(75591),d=n(88587),u=n(58669),m=n(45578);function p(e){let t=0;for(let n=0;n<e.length;n++){let o=e.charCodeAt(n);o<128?o<=122&&o>=65?t+=.25:t+=.5:t+=1.5}return t}var h=n(3289),g=n(39138),f=n(85564),v=n(61643);let y=(0,o.EN)();function b(e){return{id:(0,i.x0)(),date:new Date().toLocaleString(),role:"user",content:"",...e}}let S=d.ZP.Store.DefaultTopic,w=b({role:"assistant",content:d.ZP.Store.BotHello});function T(){return{id:(0,i.x0)(),topic:S,memoryPrompt:"",messages:[],stat:{tokenCount:0,wordCount:0,charCount:0},lastUpdate:Date.now(),lastSummarizeIndex:0,mask:(0,v.Yc)()}}function _(e){return e.reduce((e,t)=>e+p((0,o.YK)(t)),0)}function k(e,t){let n=null!==(a=c.S3[t.model])&&void 0!==a?a:c.S3.default,o=c.Fv.find(e=>e.name===t.model);var a,i,r="OpenAI";o&&(r=o.provider.providerName);let l={ServiceProvider:r,cutoff:n,model:t.model,time:new Date().toString(),lang:(0,d.VQ)(),input:e},s=null!==(i=t.template)&&void 0!==i?i:c.xf;e.startsWith(s)&&(s="");let u="{{input}}";return s.includes(u)||(s+="\n"+u),Object.entries(l).forEach(e=>{let[t,n]=e,o=RegExp("{{".concat(t,"}}"),"g");s=s.replace(o,n.toString())}),s}let C={sessions:[T()],currentSessionIndex:0,lastInput:""},x=(0,m.D)(C,(e,t)=>{function n(){return{...t(),...i}}let i={forkSession(){let t=n().currentSession();if(!t)return;let o=T();o.topic=t.topic,o.messages=[...t.messages],o.mask={...t.mask,modelConfig:{...t.mask.modelConfig}},e(e=>({currentSessionIndex:0,sessions:[o,...e.sessions]}))},clearSessions(){e(()=>({sessions:[T()],currentSessionIndex:0}))},selectSession(t){e({currentSessionIndex:t})},moveSession(t,n){e(e=>{let{sessions:o,currentSessionIndex:a}=e,i=[...o],r=i[t];i.splice(t,1),i.splice(n,0,r);let l=a===t?n:a;return a>t&&a<=n?l-=1:a<t&&a>=n&&(l+=1),{currentSessionIndex:l,sessions:i}})},newSession(t){let n=T();if(t){let e=h.MG.getState().modelConfig;n.mask={...t,modelConfig:{...e,...t.modelConfig}},n.topic=t.name}e(e=>({currentSessionIndex:0,sessions:[n].concat(e.sessions)}))},nextSession(e){let t=n().sessions.length,o=n().currentSessionIndex;n().selectSession((o+e+t)%t)},deleteSession(t){let o=1===n().sessions.length;if(!n().sessions.at(t))return;let a=n().sessions.slice();a.splice(t,1);let i=n().currentSessionIndex,r=Math.min(i-Number(t<i),a.length-1);o&&(r=0,a.push(T()));let l={currentSessionIndex:n().currentSessionIndex,sessions:n().sessions.slice()};e(()=>({currentSessionIndex:r,sessions:a})),(0,s.CF)(d.ZP.Home.DeleteToast,{text:d.ZP.Home.Revert,onClick(){e(()=>l)}},5e3)},currentSession(){let t=n().currentSessionIndex,o=n().sessions;return(t<0||t>=o.length)&&(t=Math.min(o.length-1,Math.max(0,t)),e(()=>({currentSessionIndex:t}))),o[t]},onNewMessage(e,t){n().updateTargetSession(t,e=>{e.messages=e.messages.concat(),e.lastUpdate=Date.now()}),n().updateStat(e,t),n().summarizeSession(!1,t)},async onUserInput(e,t){let o=n().currentSession(),a=o.mask.modelConfig,i=k(e,a);console.log("[User Input] after template: ",i);let s=i;t&&t.length>0&&(s=[...i?[{type:"text",text:i}]:[],...t.map(e=>({type:"image_url",image_url:{url:e}}))]);let c=b({role:"user",content:s}),d=b({role:"assistant",streaming:!0,model:a.model}),m=n().getMessagesWithMemory().concat(c),p=o.messages.length+1;n().updateTargetSession(o,e=>{let t={...c,content:s};e.messages=e.messages.concat([t,d])}),(0,r.Lw)(a.providerName).llm.chat({messages:m,config:{...a,stream:!0},onUpdate(e){d.streaming=!0,e&&(d.content=e),n().updateTargetSession(o,e=>{e.messages=e.messages.concat()})},onFinish(e){d.streaming=!1,e&&(d.content=e,d.date=new Date().toLocaleString(),n().onNewMessage(d,o)),l.L.remove(o.id,d.id)},onBeforeTool(e){(d.tools=(null==d?void 0:d.tools)||[]).push(e),n().updateTargetSession(o,e=>{e.messages=e.messages.concat()})},onAfterTool(e){var t;null==d||null===(t=d.tools)||void 0===t||t.forEach((t,n,o)=>{e.id==t.id&&(o[n]={...e})}),n().updateTargetSession(o,e=>{e.messages=e.messages.concat()})},onError(e){var t,a,i;let r=null===(a=e.message)||void 0===a?void 0:null===(t=a.includes)||void 0===t?void 0:t.call(a,"aborted");d.content+="\n\n"+(0,u.B)({error:!0,message:e.message}),d.streaming=!1,c.isError=!r,d.isError=!r,n().updateTargetSession(o,e=>{e.messages=e.messages.concat()}),l.L.remove(o.id,null!==(i=d.id)&&void 0!==i?i:p),console.error("[Chat] failed ",e)},onController(e){var t;l.L.addController(o.id,null!==(t=d.id)&&void 0!==t?t:p,e)}})},getMemoryPrompt(){let e=n().currentSession();if(e.memoryPrompt.length)return{role:"system",content:d.ZP.Store.Prompt.History(e.memoryPrompt),date:""}},getMessagesWithMemory(){let e=n().currentSession(),t=e.mask.modelConfig,a=null!==(d=e.clearContextIndex)&&void 0!==d?d:0,i=e.messages.slice(),r=e.messages.length,l=e.mask.context.slice(),s=t.enableInjectSystemPrompts&&(e.mask.modelConfig.model.startsWith("gpt-")||e.mask.modelConfig.model.startsWith("chatgpt-"));var d,u,m,h=[];h=s?[b({role:"system",content:k("",{...t,template:c.yp})})]:[],s&&console.log("[Global System Prompt] ",null!==(m=null===(u=h.at(0))||void 0===u?void 0:u.content)&&void 0!==m?m:"empty");let g=n().getMemoryPrompt(),f=t.sendMemory&&e.memoryPrompt&&e.memoryPrompt.length>0&&e.lastSummarizeIndex>a,v=e.lastSummarizeIndex,y=Math.max(0,r-t.historyMessageCount),S=Math.max(a,f?Math.min(v,y):y),w=t.max_tokens,T=[];for(let e=r-1,t=0;e>=S&&t<w;e-=1){let n=i[e];n&&!n.isError&&(t+=p((0,o.YK)(n)),T.push(n))}return[...h,...f&&g?[g]:[],...l,...T.reverse()]},updateMessage(t,o,a){let i=n().sessions,r=i.at(t),l=null==r?void 0:r.messages;a(null==l?void 0:l.at(o)),e(()=>({sessions:i}))},resetSession(e){n().updateTargetSession(e,e=>{e.messages=[],e.memoryPrompt=""})},summarizeSession(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1?arguments[1]:void 0,i=h.MG.getState(),l=a.mask.modelConfig;if((0,o.Wu)(l.model))return;let[s,u]=l.compressModel?[l.compressModel,l.compressProviderName]:function(e,t){{let e=h.MG.getState(),t=g._.getState(),o=(0,f.lW)(e.models,[e.customModels,t.customModels].join(","),t.defaultModel).find(e=>e.name===c.EF&&e.available);if(o){var n;return[o.name,null===(n=o.provider)||void 0===n?void 0:n.providerName]}}return e.startsWith("gemini")?[c.PF,c.UT.Google]:[e,t]}(a.mask.modelConfig.model,a.mask.modelConfig.providerName),m=(0,r.Lw)(u),p=a.messages.map(e=>({...e,content:"assistant"===e.role?(0,o.Jn)(e):(0,o.YK)(e)}));if(i.enableAutoGenerateTitle&&a.topic===S&&_(p)>=50||t){let e=Math.max(0,p.length-l.historyMessageCount),t=p.slice(e<p.length?e:p.length-1,p.length).concat(b({role:"user",content:d.ZP.Store.Prompt.Topic}));m.llm.chat({messages:t,config:{model:s,stream:!1,providerName:u},onFinish(e,t){(null==t?void 0:t.status)===200&&n().updateTargetSession(a,t=>t.topic=e.length>0?(0,o.ez)(e):S)}})}let v=Math.max(a.lastSummarizeIndex,null!==(e=a.clearContextIndex)&&void 0!==e?e:0),y=p.filter(e=>!e.isError).slice(v),w=_(y);if(w>((null==l?void 0:l.max_tokens)||4e3)){let e=y.length;y=y.slice(Math.max(0,e-l.historyMessageCount))}let T=n().getMemoryPrompt();T&&y.unshift(T);let k=a.messages.length;if(console.log("[Chat History] ",y,w,l.compressMessageLengthThreshold),w>l.compressMessageLengthThreshold&&l.sendMemory){let{max_tokens:e,...t}=l;m.llm.chat({messages:y.concat(b({role:"system",content:d.ZP.Store.Prompt.Summarize,date:""})),config:{...t,stream:!0,model:s,providerName:u},onUpdate(e){a.memoryPrompt=e},onFinish(e,t){(null==t?void 0:t.status)===200&&(console.log("[Memory] ",e),n().updateTargetSession(a,t=>{t.lastSummarizeIndex=k,t.memoryPrompt=e}))},onError(e){console.error("[Summarize] ",e)}})}},updateStat(e,t){n().updateTargetSession(t,t=>{t.stat.charCount+=e.content.length})},updateTargetSession(t,o){let a=n().sessions,i=a.findIndex(e=>e.id===t.id);i<0||(o(a[i]),e(()=>({sessions:a})))},async clearAllData(){await a._.clear(),y.clear(),location.reload()},setLastInput(t){e({lastInput:t})}};return i},{name:c.KJ.Chat,version:3.3,migrate(e,t){let n=JSON.parse(JSON.stringify(e));if(t<2)for(let t of(n.sessions=[],e.sessions)){let e=T();e.topic=t.topic,e.messages=[...t.messages],e.mask.modelConfig.sendMemory=!0,e.mask.modelConfig.historyMessageCount=4,e.mask.modelConfig.compressMessageLengthThreshold=1e3,n.sessions.push(e)}return t<3&&n.sessions.forEach(e=>{e.id=(0,i.x0)(),e.messages.forEach(e=>e.id=(0,i.x0)())}),t<3.1&&n.sessions.forEach(e=>{if(!e.mask.modelConfig.hasOwnProperty("enableInjectSystemPrompts")){let t=h.MG.getState();e.mask.modelConfig.enableInjectSystemPrompts=t.modelConfig.enableInjectSystemPrompts}}),t<3.2&&n.sessions.forEach(e=>{let t=h.MG.getState();e.mask.modelConfig.compressModel=t.modelConfig.compressModel,e.mask.modelConfig.compressProviderName=t.modelConfig.compressProviderName}),t<3.3&&n.sessions.forEach(e=>{h.MG.getState(),e.mask.modelConfig.compressModel="",e.mask.modelConfig.compressProviderName=""}),n}})},3289:function(e,t,n){"use strict";n.d(t,{MG:function(){return f},Q2:function(){return r},Xm:function(){return g},g5:function(){return m},mQ:function(){return i},wF:function(){return h}});var o,a,i,r,l,s=n(94880),c=n(75591),d=n(45578);(o=i||(i={})).Enter="Enter",o.CtrlEnter="Ctrl + Enter",o.ShiftEnter="Shift + Enter",o.AltEnter="Alt + Enter",o.MetaEnter="Meta + Enter",(a=r||(r={})).Auto="auto",a.Dark="dark",a.Light="light";let u=(0,s.Z)(),m={lastUpdate:Date.now(),submitKey:"Enter",avatar:"1f603",fontSize:14,fontFamily:"",theme:"auto",tightBorder:!!(null==u?void 0:u.isApp),sendPreviewBubble:!0,enableAutoGenerateTitle:!0,sidebarWidth:c.M,enableArtifacts:!0,enableCodeFold:!0,disablePromptHint:!1,dontShowMaskSplashScreen:!1,hideBuiltinMasks:!1,customModels:"",models:c.Fv,modelConfig:{model:"gpt-4o-mini",providerName:"OpenAI",temperature:.5,top_p:1,max_tokens:4e3,presence_penalty:0,frequency_penalty:0,sendMemory:!0,historyMessageCount:4,compressMessageLengthThreshold:1e3,compressModel:"",compressProviderName:"",enableInjectSystemPrompts:!0,template:null!==(l=null==u?void 0:u.template)&&void 0!==l?l:c.xf,size:"1024x1024",quality:"standard",style:"vivid"},ttsConfig:{enable:!1,autoplay:!1,engine:c.Xu,model:c.vo,voice:c.mB,speed:1},realtimeConfig:{enable:!1,provider:"OpenAI",model:"gpt-4o-realtime-preview-2024-10-01",apiKey:"",azure:{endpoint:"",deployment:""},temperature:.9,voice:"alloy"},enableModelSearch:!1,enableThemeChange:!1,enablePromptHints:!1,enableClearContext:!0,enablePlugins:!1,enableShortcuts:!1};function p(e,t,n,o){return isNaN(e)?o:Math.min(n,Math.max(t,e))}let h={engine:e=>e,model:e=>e,voice:e=>e,speed:e=>p(e,.25,4,1)},g={model:e=>e,max_tokens:e=>p(e,0,512e3,1024),presence_penalty:e=>p(e,-2,2,0),frequency_penalty:e=>p(e,-2,2,0),temperature:e=>p(e,0,2,1),top_p:e=>p(e,0,1,1)},f=(0,d.D)({...m},(e,t)=>({reset(){e(()=>({...m}))},mergeModels(n){var o,a;if(!n||0===n.length)return;let i=t().models,r={};for(let e of i)e.available=!1,r["".concat(e.name,"@").concat(null==e?void 0:null===(o=e.provider)||void 0===o?void 0:o.id)]=e;for(let e of n)e.available=!0,r["".concat(e.name,"@").concat(null==e?void 0:null===(a=e.provider)||void 0===a?void 0:a.id)]=e;e(()=>({models:Object.values(r)}))},allModels(){}}),{name:c.KJ.Config,version:4.1,merge(e,t){if(!e)return{...t};let n=t.models.slice();return e.models.forEach(e=>{let t=n.findIndex(t=>t.name===e.name&&t.provider===e.provider);-1!==t?n[t]=e:n.push(e)}),{...t,...e,models:n}},migrate(e,t){if(t<3.4&&(e.modelConfig.sendMemory=!0,e.modelConfig.historyMessageCount=4,e.modelConfig.compressMessageLengthThreshold=1e3,e.modelConfig.frequency_penalty=0,e.modelConfig.top_p=1,e.modelConfig.template=c.xf,e.dontShowMaskSplashScreen=!1,e.hideBuiltinMasks=!1),t<3.5&&(e.customModels="claude,claude-100k"),t<3.6&&(e.modelConfig.enableInjectSystemPrompts=!0),t<3.7&&(e.enableAutoGenerateTitle=!0),t<3.8&&(e.lastUpdate=Date.now()),t<3.9){var n;e.modelConfig.template=e.modelConfig.template!==c.xf?e.modelConfig.template:null!==(n=null==u?void 0:u.template)&&void 0!==n?n:c.xf}return t<4.1&&(e.modelConfig.compressModel=m.modelConfig.compressModel,e.modelConfig.compressProviderName=m.modelConfig.compressProviderName),e}})},62425:function(e,t,n){"use strict";n.d(t,{ux:function(){return a.ux},HX:function(){return a.HX},Xm:function(){return f.Xm},mQ:function(){return f.mQ},wF:function(){return f.wF},Q2:function(){return f.Q2},tn:function(){return a.tn},_X:function(){return g._},MG:function(){return f.MG},aK:function(){return a.aK},RQ:function(){return v.RQ},u2:function(){return h}});var o,a=n(35207),i=n(75591),r=n(94880),l=n(45578),s=n(92944),c={src:"/_next/static/media/chatgpt.1956a04f.png"},d=n(88587),u=n(1610);let m=!!(null===(o=(0,r.Z)())||void 0===o?void 0:o.isApp);async function p(e){if("date"===e)return new Date((await (await fetch(i.TE)).json())[0].commit.author.date).getTime().toString();if("tag"===e){var t;return null===(t=(await (await fetch(i.Fk)).json()).at(0))||void 0===t?void 0:t.name}}let h=(0,l.D)({versionType:"tag",lastUpdate:0,version:"unknown",remoteVersion:"",used:0,subscription:0,lastUpdateUsage:0},(e,t)=>({formatVersion:e=>("date"===t().versionType&&(e=function(e){let t=new Date(+e),n=t.getUTCFullYear(),o=t.getUTCMonth()+1,a=t.getUTCDate();return[n.toString(),o.toString().padStart(2,"0"),a.toString().padStart(2,"0")].join("")}(e)),e),async getLatestVersion(){var n,o,a,i;let l=arguments.length>0&&void 0!==arguments[0]&&arguments[0],u=t().versionType,h="date"===u?null===(n=(0,r.Z)())||void 0===n?void 0:n.commitDate:null===(o=(0,r.Z)())||void 0===o?void 0:o.version;e(()=>({version:h}));let g=Date.now()-t().lastUpdate>72e5;if(l||g){e(()=>({lastUpdate:Date.now()}));try{let t=await p(u);e(()=>({remoteVersion:t})),(null===(a=window.__TAURI__)||void 0===a?void 0:a.notification)&&m&&await (null===(i=window.__TAURI__)||void 0===i?void 0:i.notification.isPermissionGranted().then(e=>{var n;e&&(null===(n=window.__TAURI__)||void 0===n||n.notification.requestPermission().then(e=>{if("granted"===e){var n,o;if(h===t)null===(n=window.__TAURI__)||void 0===n||n.notification.sendNotification({title:"NeatChat",body:"".concat(d.ZP.Settings.Update.IsLatest),icon:"".concat(c.src),sound:"Default"});else{let e=d.ZP.Settings.Update.FoundUpdate("".concat(t));null===(o=window.__TAURI__)||void 0===o||o.notification.sendNotification({title:"NeatChat",body:e,icon:"".concat(c.src),sound:"Default"}),(0,s.oA)()}}}))})),console.log("[Got Upstream] ",t)}catch(e){console.error("[Fetch Upstream Commit Id]",e)}}},async updateUsage(){let n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Date.now()-t().lastUpdateUsage>=6e4||n){e(()=>({lastUpdateUsage:Date.now()}));try{let t=new u.ti(i.k8.GPT),n=await t.llm.usage();n&&e(()=>({used:n.used,subscription:n.total}))}catch(e){console.error(e.message)}}}}),{name:i.KJ.Update,version:1});var g=n(39138),f=n(3289),v=n(11466)},61643:function(e,t,n){"use strict";n.d(t,{Yc:function(){return u},Zy:function(){return m},_G:function(){return d}});var o=n(73859),a=n(88587),i=n(35207),r=n(3289),l=n(75591),s=n(84065),c=n(45578);let d="gpt-bot",u=()=>({id:(0,s.x0)(),avatar:d,name:i.HX,context:[],syncGlobalConfig:!0,modelConfig:{...r.MG.getState().modelConfig},lang:(0,a.VQ)(),builtin:!1,createdAt:Date.now(),plugin:[]}),m=(0,c.D)({masks:{},language:void 0},(e,t)=>({create(n){let o=t().masks,a=(0,s.x0)();return o[a]={...u(),...n,id:a,builtin:!1},e(()=>({masks:o})),t().markUpdate(),o[a]},updateMask(n,o){let a=t().masks,i=a[n];if(!i)return;let r={...i};o(r),a[n]=r,e(()=>({masks:a})),t().markUpdate()},delete(n){let o=t().masks;delete o[n],e(()=>({masks:o})),t().markUpdate()},get:e=>t().masks[null!=e?e:1145141919810],getAll(){let e=Object.values(t().masks).sort((e,t)=>t.createdAt-e.createdAt),n=r.MG.getState();if(n.hideBuiltinMasks)return e;let a=o.hJ.map(e=>({...e,modelConfig:{...n.modelConfig,...e.modelConfig}}));return e.concat(a)},search:e=>Object.values(t().masks),setLanguage(t){e({language:t})}}),{name:l.KJ.Mask,version:3.1,migrate(e,t){let n=JSON.parse(JSON.stringify(e));if(t<3&&Object.values(n.masks).forEach(e=>e.id=(0,s.x0)()),t<3.1){let e={};Object.values(n.masks).forEach(t=>{e[t.id]=t}),n.masks=e}return n}})},11466:function(e,t,n){"use strict";n.d(t,{RQ:function(){return f},aN:function(){return h}});var o,a=n(35609),i=n.n(a),r=n(75591),l=n(84065),s=n(45578),c=n(94880),d=n(15582),u=n(92944),m=n(39138);let p=(null===(o=(0,c.Z)())||void 0===o?void 0:o.isApp)!==!1,h={tools:{},add(e){var t,n;let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!o&&this.tools[e.id])return this.tools[e.id];let a=(null==e?void 0:e.authType)=="custom"?null==e?void 0:e.authHeader:"Authorization",r=(null==e?void 0:e.authType)=="basic"?"Basic ".concat(null==e?void 0:e.authToken):(null==e?void 0:e.authType)=="bearer"?"Bearer ".concat(null==e?void 0:e.authToken):null==e?void 0:e.authToken,l=(null==e?void 0:e.authLocation)||"header",s=d.ZP.load(e.content),c=null==s?void 0:null===(n=s.servers)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.url,h=p?c:"/api/proxy",g={"X-Base-URL":p?void 0:c};if("header"==l&&(g[a]=r),!r&&"dalle3"===e.id){let e=m._.getState().openaiApiKey;e&&(g[a]="Bearer ".concat(e))}let f=new(i())({definition:d.ZP.load(e.content),axiosConfigDefaults:{adapter:window.__TAURI__?u.VL:["xhr"],baseURL:h,headers:g}});try{f.initSync()}catch(e){}let v=f.getOperations();return this.tools[e.id]={api:f,length:v.length,tools:v.map(e=>{var t,n;let o=(null==e?void 0:null===(n=e.requestBody)||void 0===n?void 0:null===(t=n.content["application/json"])||void 0===t?void 0:t.schema)||{type:"object",properties:{}};return o.required||(o.required=[]),e.parameters instanceof Array&&e.parameters.forEach(e=>{if((null==e?void 0:e.in)=="query"||(null==e?void 0:e.in)=="path"){let t=null==e?void 0:e.name;o.properties[t]={type:e.schema.type,description:e.description},e.required&&o.required.push(t)}}),{type:"function",function:{name:(0,u.mE)(e),description:e.description||e.summary,parameters:o}}}),funcs:v.reduce((e,t)=>(e[(0,u.mE)(t)]=function(e){let n={};return t.parameters instanceof Array&&t.parameters.forEach(t=>{n[null==t?void 0:t.name]=e[null==t?void 0:t.name],delete e[null==t?void 0:t.name]}),"query"==l?n[a]=r:"body"==l&&(e[a]=r),f.client.paths[t.path][t.method](n,e,f.axiosConfigDefaults)},e),{})}},get(e){return this.tools[e]}},g=()=>({id:(0,l.x0)(),title:"",version:"1.0.0",content:"",builtin:!1,createdAt:Date.now()}),f=(0,s.D)({plugins:{}},(e,t)=>({create(n){let o=t().plugins,a=(null==n?void 0:n.id)||(0,l.x0)();return o[a]={...g(),...n,id:a,builtin:!1},e(()=>({plugins:o})),t().markUpdate(),o[a]},updatePlugin(n,o){let a=t().plugins,i=a[n];if(!i)return;let r={...i};o(r),a[n]=r,h.add(r,!0),e(()=>({plugins:a})),t().markUpdate()},delete(n){let o=t().plugins;delete o[n],e(()=>({plugins:o})),t().markUpdate()},getAsTools(e){let n=t().plugins,o=(e||[]).map(e=>n[e]).filter(e=>e).map(e=>h.add(e));return[o.reduce((e,t)=>e.concat(t.tools),[]),o.reduce((e,t)=>Object.assign(e,t.funcs),{})]},get:e=>t().plugins[null!=e?e:1145141919810],getAll:()=>Object.values(t().plugins).sort((e,t)=>t.createdAt-e.createdAt)}),{name:r.KJ.Plugin,version:1,onRehydrateStorage(e){fetch("./plugins.json").then(e=>e.json()).then(t=>{Promise.all(t.map(t=>e.get(t.id)?t:fetch(t.schema).then(e=>e.text()).then(e=>({...t,content:e})).catch(e=>t))).then(t=>{t.filter(e=>null==e?void 0:e.content).forEach(t=>{let n=e.create(t);e.updatePlugin(n.id,e=>{let t=h.add(e,!0);e.title=t.api.definition.info.title,e.version=t.api.definition.info.version,e.builtin=!0})})})})}})},89570:function(e,t,n){"use strict";n.d(t,{f:function(){return c},o:function(){return s}});var o=n(10684),a=n(84065),i=n(75591),r=n(88587),l=n(45578);let s={ready:!1,builtinEngine:new o.Z([],{keys:["title"]}),userEngine:new o.Z([],{keys:["title"]}),count:{builtin:0},allPrompts:[],builtinPrompts:[],init(e,t){this.ready||(this.allPrompts=t.concat(e),this.builtinPrompts=e.slice(),this.builtinEngine.setCollection(e),this.userEngine.setCollection(t),this.ready=!0)},remove(e){this.userEngine.remove(t=>t.id===e)},add(e){this.userEngine.add(e)},search(e){let t=this.userEngine.search(e),n=this.builtinEngine.search(e);return t.concat(n).map(e=>e.item)}},c=(0,l.D)({counter:0,prompts:{}},(e,t)=>({add(n){let o=t().prompts;return n.id=(0,a.x0)(),n.isUser=!0,n.createdAt=Date.now(),o[n.id]=n,e(()=>({prompts:o})),n.id},get:e=>t().prompts[e]||s.builtinPrompts.find(t=>t.id===e),remove(n){let o=t().prompts;delete o[n],Object.entries(o).some(e=>{let[t,a]=e;return a.id===n&&(delete o[t],!0)}),s.remove(n),e(()=>({prompts:o,counter:t().counter+1}))},getUserPrompts(){var e;let n=Object.values(null!==(e=t().prompts)&&void 0!==e?e:{});return n.sort((e,t)=>t.id&&e.id?t.createdAt-e.createdAt:0),n},updatePrompt(n,o){var a;let i=null!==(a=t().prompts[n])&&void 0!==a?a:{title:"",content:"",id:n};s.remove(n),o(i);let r=t().prompts;r[n]=i,e(()=>({prompts:r})),s.add(i)},search(e){return 0===e.length?this.getUserPrompts().concat(s.builtinPrompts):s.search(e)}}),{name:i.KJ.Prompt,version:3,migrate(e,t){let n=JSON.parse(JSON.stringify(e));return t<3&&Object.values(n.prompts).forEach(e=>e.id=(0,a.x0)()),n},onRehydrateStorage(e){fetch("./prompts.json").then(e=>e.json()).then(e=>{var t;let n=[e.en,e.tw,e.cn];"cn"===(0,r.VQ)()&&(n=n.reverse());let o=n.map(e=>e.map(e=>{let[t,n]=e;return{id:(0,a.x0)(),title:t,content:n,createdAt:Date.now()}})),i=null!==(t=c.getState().getUserPrompts())&&void 0!==t?t:[],l=o.reduce((e,t)=>e.concat(t),[]).filter(e=>!!e.title&&!!e.content);s.count.builtin=e.en.length+e.cn.length+e.tw.length,s.init(l,i)})}})},27572:function(e,t,n){"use strict";n.d(t,{i:function(){return C}});var o,a=n(94880),i=n(75591),r=n(45578),l=n(62425),s=n(61643),c=n(89570),d=n(84802);function u(e){let t={};return Object.entries(e).map(e=>{let[n,o]=e;"function"!=typeof o&&(t[n]=o)}),t}let m={[i.KJ.Chat]:l.aK.setState,[i.KJ.Access]:l._X.setState,[i.KJ.Config]:l.MG.setState,[i.KJ.Mask]:s.Zy.setState,[i.KJ.Prompt]:c.f.setState},p={[i.KJ.Chat]:()=>u(l.aK.getState()),[i.KJ.Access]:()=>u(l._X.getState()),[i.KJ.Config]:()=>u(l.MG.getState()),[i.KJ.Mask]:()=>u(s.Zy.getState()),[i.KJ.Prompt]:()=>u(c.f.getState())},h={[i.KJ.Chat]:(e,t)=>{let n={};return e.sessions.forEach(e=>n[e.id]=e),t.sessions.forEach(t=>{if(0===t.messages.length)return;let o=n[t.id];if(o){let e=new Set(o.messages.map(e=>e.id));t.messages.forEach(t=>{e.has(t.id)||o.messages.push(t)}),o.messages.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime())}else e.sessions.push(t)}),e.sessions.sort((e,t)=>new Date(t.lastUpdate).getTime()-new Date(e.lastUpdate).getTime()),e},[i.KJ.Prompt]:(e,t)=>(e.prompts={...t.prompts,...e.prompts},e),[i.KJ.Mask]:(e,t)=>(e.masks={...t.masks,...e.masks},e),[i.KJ.Config]:y,[i.KJ.Access]:y};function g(){return Object.fromEntries(Object.entries(p).map(e=>{let[t,n]=e;return[t,n()]}))}function f(e){Object.entries(m).forEach(t=>{let[n,o]=t;o(e[n])})}function v(e,t){return Object.keys(e).forEach(n=>{let o=e[n],a=t[n];h[n](o,a)}),e}function y(e,t){var n,o;return(null!==(n=e.lastUpdateTime)&&void 0!==n?n:0)<(null!==(o=e.lastUpdateTime)&&void 0!==o?o:1)?((0,d.T)(t,e),{...t}):((0,d.T)(e,t),{...e})}var b=n(92944),S=n(65878),w=n(88587),T=n(38248);let _=!!(null===(o=(0,a.Z)())||void 0===o?void 0:o.isApp),k={provider:T.lP.WebDAV,useProxy:!0,proxyUrl:i.L.Cors,webdav:{endpoint:"",username:"",password:""},upstash:{endpoint:"",username:i.Uf,apiKey:""},lastSyncTime:0,lastProvider:""},C=(0,r.D)(k,(e,t)=>({cloudSync:()=>Object.values(t()[t().provider]).every(e=>e.toString().length>0),markSyncTime(){e({lastSyncTime:Date.now(),lastProvider:t().provider})},export(){let e=g(),t=_?"".concat(new Date().toLocaleDateString().replace(/\//g,"_")," ").concat(new Date().toLocaleTimeString().replace(/:/g,"_")):new Date().toLocaleString();(0,b.CP)(JSON.stringify(e),"Backup-".concat(t,".json"))},async import(){let e=await (0,b.j2)();try{let t=JSON.parse(e),n=g();v(n,t),f(n),location.reload()}catch(e){console.error("[Import]",e),(0,S.CF)(w.ZP.Settings.Sync.ImportFailed)}},getClient(){let e=t().provider;return(0,T.in)(e,t())},async sync(){let e=g(),n=t().provider,o=t()[n],a=this.getClient();try{let t=await a.get(o.username);if(t&&""!==t){let t=JSON.parse(await a.get(o.username));v(e,t),f(e)}else{await a.set(o.username,JSON.stringify(e)),console.log("[Sync] Remote state is empty, using local state instead.");return}}catch(e){throw console.log("[Sync] failed to get remote state",e),e}await a.set(o.username,JSON.stringify(e)),this.markSyncTime()},async check(){let e=this.getClient();return await e.check()}}),{name:i.KJ.Sync,version:1.2,migrate:(e,t)=>(t<1.1&&(e.upstash.username=i.Uf),t<1.2&&"/api/cors/"===e.proxyUrl&&(e.proxyUrl=""),e)})},92944:function(e,t,n){"use strict";n.d(t,{Bs:function(){return S},CP:function(){return c},EN:function(){return C},Jn:function(){return b},K1:function(){return v},Ri:function(){return h},S0:function(){return p},VL:function(){return k},Wp:function(){return E},Wu:function(){return T},Xf:function(){return w},YK:function(){return y},ez:function(){return l},gn:function(){return u},iP:function(){return m},j2:function(){return d},lx:function(){return f},mE:function(){return x},oA:function(){return A},up:function(){return _},vQ:function(){return s}});var o=n(2265),a=n(65878),i=n(88587),r=n(1217);function l(e){return e.replace(/^["""*]+|["""*]+$/g,"").replace(/["""",.!?*]*$/,"")}async function s(e){try{window.__TAURI__?window.__TAURI__.writeText(e):await navigator.clipboard.writeText(e),(0,a.CF)(i.ZP.Copy.Success)}catch(n){let t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy"),(0,a.CF)(i.ZP.Copy.Success)}catch(e){(0,a.CF)(i.ZP.Copy.Failed)}document.body.removeChild(t)}}async function c(e,t){if(window.__TAURI__){let n=await window.__TAURI__.dialog.save({defaultPath:"".concat(t),filters:[{name:"".concat(t.split(".").pop()," files"),extensions:["".concat(t.split(".").pop())]},{name:"All Files",extensions:["*"]}]});if(null!==n)try{await window.__TAURI__.fs.writeTextFile(n,e),(0,a.CF)(i.ZP.Download.Success)}catch(e){(0,a.CF)(i.ZP.Download.Failed)}else(0,a.CF)(i.ZP.Download.Failed)}else{let n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}function d(){return new Promise((e,t)=>{let n=document.createElement("input");n.type="file",n.accept="application/json",n.onchange=n=>{let o=n.target.files[0],a=new FileReader;a.onload=t=>{e(t.target.result)},a.onerror=e=>t(e),a.readAsText(o)},n.click()})}function u(){let e=navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(e)}function m(){let[e,t]=(0,o.useState)({width:window.innerWidth,height:window.innerHeight});return(0,o.useEffect)(()=>{let e=()=>{t({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),e}function p(){let{width:e}=m();return e<=600}function h(e,t){let n=window.getSelection();return(null==n?void 0:n.type)!=="Range"&&(s(t),!0)}function g(e,t){let n=document.getElementById(e);return n||((n=document.createElement("span")).style.position="absolute",n.style.wordBreak="break-word",n.style.fontSize="14px",n.style.transform="translateY(-200vh)",n.style.pointerEvents="none",n.style.opacity="0",n.id=e,document.body.appendChild(n),null==t||t(n)),n}function f(e){let t=g("__measure"),n=g("__single_measure",e=>{e.innerText="TEXT_FOR_MEASURE"}),o=function(e){let t=window.getComputedStyle(e),n=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight);return e.clientWidth-n}(e);t.style.width=o+"px",t.innerText=""!==e.value?e.value:"1",t.style.fontSize=e.style.fontSize,t.style.fontFamily=e.style.fontFamily;let a=e.value.endsWith("\n");return Math.round(parseFloat(window.getComputedStyle(t).height)/parseFloat(window.getComputedStyle(n).height))+(a?1:0)}function v(e){return getComputedStyle(document.body).getPropertyValue(e).trim()}function y(e){if("string"==typeof e.content)return e.content;for(let n of e.content)if("text"===n.type){var t;return null!==(t=n.text)&&void 0!==t?t:""}return""}function b(e){let t="";if("string"==typeof e.content)t=e.content;else for(let o of e.content)if("text"===o.type){var n;t=null!==(n=o.text)&&void 0!==n?n:"";break}return t.replace(/^<think>[\s\S]*?(<\/think>|$)/,"").trim()}function S(e){if("string"==typeof e.content)return[];let t=[];for(let a of e.content)if("image_url"===a.type){var n,o;t.push(null!==(o=null===(n=a.image_url)||void 0===n?void 0:n.url)&&void 0!==o?o:"")}return t}function w(e){let t=e.toLowerCase(),n=t.includes("gpt-4-turbo")&&!t.includes("preview");return!["claude-3-5-haiku-20241022"].some(e=>t.includes(e.toLowerCase()))&&(["vision","gpt-4o","claude-3","gemini-1.5","gemini-exp","gemini-2.0-flash-exp","learnlm","vl"].some(e=>t.includes(e.toLowerCase()))||n||T(t))}function T(e){return"dall-e-3"===e}function _(e,t){return"gemini-2.0-flash-exp"===t}function k(e){var t,n;let{baseURL:o,url:a,params:i,data:l,...s}=e,c=o?"".concat(o).concat(a):a;return(t=i?"".concat(c,"?").concat(new URLSearchParams(i).toString()):c,n={...s,body:l},window.__TAURI__?(0,r.h)(t,n):window.fetch(t,n)).then(e=>{let{status:t,headers:n,statusText:o}=e;return e.text().then(e=>({status:t,statusText:o,headers:n,data:e}))})}function C(){let e;try{e=window.localStorage?window.localStorage:null}catch(t){console.error("localStorage is not available:",t),e=null}return{getItem:t=>e?e.getItem(t):(console.warn('Attempted to get item "'.concat(t,'" from localStorage, but localStorage is not available.')),null),setItem(t,n){e?e.setItem(t,n):console.warn('Attempted to set item "'.concat(t,'" in localStorage, but localStorage is not available.'))},removeItem(t){e?e.removeItem(t):console.warn('Attempted to remove item "'.concat(t,'" from localStorage, but localStorage is not available.'))},clear(){e?e.clear():console.warn("Attempted to clear localStorage, but localStorage is not available.")}}}function x(e){return(null==e?void 0:e.operationId)||"".concat(e.method.toUpperCase()).concat(e.path.replaceAll("/","_"))}function A(){var e;return null===(e=window.__TAURI__)||void 0===e?void 0:e.updater.checkUpdate().then(e=>{if(e.shouldUpdate){var t;null===(t=window.__TAURI__)||void 0===t||t.updater.installUpdate().then(e=>{(0,a.CF)(i.ZP.Settings.Update.Success)}).catch(e=>{console.error("[Install Update Error]",e),(0,a.CF)(i.ZP.Settings.Update.Failed)})}}).catch(e=>{console.error("[Check Update Error]",e),(0,a.CF)(i.ZP.Settings.Update.Failed)})}function E(e,t){return e.startsWith(t+"-")?-1:t.startsWith(e+"-")?1:e.localeCompare(t,void 0,{numeric:!0,sensitivity:"case",caseFirst:"upper"})}},26757:function(e,t,n){"use strict";n.d(t,{CM:function(){return p},Ix:function(){return m},VA:function(){return c},Vw:function(){return h},lf:function(){return u}});var o=n(75591),a=n(88587),i=n(534),r=n(58669),l=n(1217);function s(e,t){return new Promise((o,a)=>{let i=new FileReader;if(i.onload=e=>{let n=new Image;n.onload=()=>{let e,a=document.createElement("canvas"),i=a.getContext("2d"),r=n.width,l=n.height,s=.9;do{if(a.width=r,a.height=l,null==i||i.clearRect(0,0,a.width,a.height),null==i||i.drawImage(n,0,0,r,l),(e=a.toDataURL("image/jpeg",s)).length<t)break;s>.5?s-=.1:(r*=.9,l*=.9)}while(e.length>t);o(e)},n.onerror=a,n.src=e.target.result},i.onerror=a,e.type.includes("heic"))try{n(43555)({blob:e,toType:"image/jpeg"}).then(e=>{i.readAsDataURL(e)}).catch(e=>{a(e)})}catch(e){a(e)}i.readAsDataURL(e)})}async function c(e){if("string"==typeof e)return e;let t=[];for(let i of e){var n,a;if((null==i?void 0:i.type)=="image_url"&&(null==i?void 0:null===(n=i.image_url)||void 0===n?void 0:n.url))try{let e=await function(e){return e.includes(o.AL)?d[e]?Promise.resolve(d[e]):(new FileReader,fetch(e,{method:"GET",mode:"cors",credentials:"include"}).then(e=>e.blob()).then(async t=>d[e]=await s(t,262144))):Promise.resolve(e)}(null==i?void 0:null===(a=i.image_url)||void 0===a?void 0:a.url);t.push({type:i.type,image_url:{url:e}})}catch(e){console.error("Error processing image URL:",e)}else t.push({...i})}return t}let d={};function u(e,t){let n=atob(e),o=Array(n.length);for(let e=0;e<n.length;e++)o[e]=n.charCodeAt(e);let a=new Uint8Array(o);return new Blob([a],{type:t})}function m(e){if(!window._SW_ENABLED)return s(e,262144);let t=new FormData;return t.append("file",e),fetch(o.IW,{method:"post",body:t,mode:"cors",credentials:"include"}).then(e=>e.json()).then(e=>{if((null==e?void 0:e.code)==0&&(null==e?void 0:e.data))return null==e?void 0:e.data;throw Error("upload Error: ".concat(null==e?void 0:e.msg))})}function p(e){return fetch(e,{method:"DELETE",mode:"cors",credentials:"include"})}function h(e,t,n,s,c,d,u,m,p){let h,g="",f="",v=!1,y=!1,b=[];!function e(){var t,n;if(v||d.signal.aborted){g+=f,console.log("[Response Animation] finished"),(null==g?void 0:g.length)===0&&(null===(t=p.onError)||void 0===t||t.call(p,Error("empty response from server")));return}if(f.length>0){let e=Math.max(1,Math.round(f.length/60)),t=f.slice(0,e);g+=t,f=f.slice(e),null===(n=p.onUpdate)||void 0===n||n.call(p,g,t)}requestAnimationFrame(e)}();let S=()=>{if(!v){if(!y&&b.length>0){let o={role:"assistant",tool_calls:[...b]};return y=!0,b.splice(0,b.length),Promise.all(o.tool_calls.map(e=>{var t,n,o;return null==p||null===(t=p.onBeforeTool)||void 0===t||t.call(p,e),Promise.resolve(c[e.function.name]((null==e?void 0:null===(n=e.function)||void 0===n?void 0:n.arguments)?JSON.parse(null==e?void 0:null===(o=e.function)||void 0===o?void 0:o.arguments):{})).then(e=>{let t=e.data||(null==e?void 0:e.statusText);return(t="string"==typeof t?t:JSON.stringify(t),e.status>=300)?Promise.reject(t):t}).then(t=>{var n;return null==p||null===(n=p.onAfterTool)||void 0===n||n.call(p,{...e,content:t,isError:!1}),t}).catch(t=>{var n;return null==p||null===(n=p.onAfterTool)||void 0===n||n.call(p,{...e,isError:!0,errorMsg:t.toString()}),t.toString()}).then(t=>({name:e.function.name,role:"tool",content:t,tool_call_id:e.id}))})).then(a=>{m(t,o,a),setTimeout(()=>{console.debug("[ChatAPI] restart"),y=!1,w(e,n,t,s)},60)})}y||(console.debug("[ChatAPI] end"),v=!0,p.onFinish(g+f,h))}};function w(e,t,n,s){let c={method:"POST",body:JSON.stringify({...n,tools:s&&s.length?s:void 0}),signal:d.signal,headers:t},m=setTimeout(()=>d.abort(),o.tb);(0,i.L)(e,{fetch:l.h,...c,async onopen(e){var t;clearTimeout(m);let n=e.headers.get("content-type");if(console.log("[Request] response content type: ",n),h=e,null==n?void 0:n.startsWith("text/plain"))return g=await e.clone().text(),S();if(!e.ok||!(null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.startsWith(i.a))||200!==e.status){let t=[g],n=await e.clone().text();try{let t=await e.clone().json();n=(0,r.B)(t)}catch(e){}return 401===e.status&&t.push(a.ZP.Error.Unauthorized),n&&t.push(n),g=t.join("\n\n"),S()}},onmessage(e){if("[DONE]"===e.data||v)return S();let t=e.data;try{let t=u(e.data,b);t&&(f+=t)}catch(n){console.error("[Request] parse error",t,e,n)}},onclose(){S()},onerror(e){var t;throw null==p||null===(t=p.onError)||void 0===t||t.call(p,e),e},openWhenHidden:!0})}d.signal.onabort=S,console.debug("[ChatAPI] start"),w(e,n,t,s)}},20259:function(e,t,n){"use strict";function o(e){return JSON.parse(JSON.stringify(e))}function a(e,t){return t.every(t=>void 0!==e[t]&&null!==e[t]&&""!==e[t])}n.d(t,{I:function(){return o},z:function(){return a}})},38248:function(e,t,n){"use strict";n.d(t,{lP:function(){return a},in:function(){return s}});var o,a,i=n(75591),r=n(58669);(o=a||(a={})).WebDAV="webdav",o.UpStash="upstash";let l={upstash:function(e){let t=e.upstash,n=0===t.username.length?i.Uf:t.username,o="".concat(n,"-chunk-count"),a=e=>"".concat(n,"-chunk-").concat(e),l=e.useProxy&&e.proxyUrl.length>0?e.proxyUrl:void 0;return{async check(){try{let e=await fetch(this.path("get/".concat(n),l),{method:"GET",headers:this.headers()});return console.log("[Upstash] check",e.status,e.statusText),[200].includes(e.status)}catch(e){console.error("[Upstash] failed to check",e)}return!1},async redisGet(e){let t=await fetch(this.path("get/".concat(e),l),{method:"GET",headers:this.headers()});return console.log("[Upstash] get key = ",e,t.status,t.statusText),(await t.json()).result},async redisSet(e,t){let n=await fetch(this.path("set/".concat(e),l),{method:"POST",headers:this.headers(),body:t});console.log("[Upstash] set key = ",e,n.status,n.statusText)},async get(){let e=Number(await this.redisGet(o));if(!Number.isInteger(e))return;let t=await Promise.all(Array(e).fill(0).map((e,t)=>this.redisGet(a(t))));return console.log("[Upstash] get full chunks",t),t.join("")},async set(e,t){let n=0;for await(let e of(0,r.O)(t))await this.redisSet(a(n),e),n+=1;await this.redisSet(o,n.toString())},headers:()=>({Authorization:"Bearer ".concat(t.apiKey)}),path(e){let n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.endsWith("/")||(e+="/"),e.startsWith("/")&&(e=e.slice(1)),o.length>0&&!o.endsWith("/")&&(o+="/");let a="/api/upstash/";try{let i=new URL(o+a+e);i.searchParams.append("endpoint",t.endpoint),n=i.toString()}catch(o){n=a+e+"?endpoint="+t.endpoint}return n}}},webdav:function(e){let t=i.Uf,n="".concat(t,"/backup.json"),o=e.webdav,a=e.useProxy&&e.proxyUrl.length>0?e.proxyUrl:void 0;return{async check(){try{let e=await fetch(this.path(t,a,"MKCOL"),{method:"GET",headers:this.headers()}),n=[201,200,404,405,301,302,307,308].includes(e.status);return console.log("[WebDav] check ".concat(n?"success":"failed",", ").concat(e.status," ").concat(e.statusText)),n}catch(e){console.error("[WebDav] failed to check",e)}return!1},async get(e){let t=await fetch(this.path(n,a),{method:"GET",headers:this.headers()});return(console.log("[WebDav] get key = ",e,t.status,t.statusText),404==t.status)?"":await t.text()},async set(e,t){let o=await fetch(this.path(n,a),{method:"PUT",headers:this.headers(),body:t});console.log("[WebDav] set key = ",e,o.status,o.statusText)},headers(){let e=btoa(o.username+":"+o.password);return{authorization:"Basic ".concat(e)}},path(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.startsWith("/")&&(e=e.slice(1)),n.endsWith("/")&&(n=n.slice(0,-1));let i="/api/webdav/";try{let r=new URL(n+i+e);r.searchParams.append("endpoint",o.endpoint),a&&r.searchParams.append("proxy_method",a),t=r.toString()}catch(n){t=i+e+"?endpoint="+o.endpoint,a&&(t+="&proxy_method="+a)}return t}}}};function s(e,t){return l[e](t)}},58669:function(e,t,n){"use strict";function o(e){let t=e;return("string"!=typeof e&&(e=JSON.stringify(e,null,"  ")),"{}"===e)?t.toString():e.startsWith("```json")?e:["```json",e,"```"].join("\n")}function*a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e6,n=new TextDecoder("utf-8"),o=new TextEncoder().encode(e);for(;o.length;){let e=o.lastIndexOf(32,t+1);e<0&&(e=o.indexOf(32,t)),e<0&&(e=o.length),yield n.decode(o.slice(0,e)),o=o.slice(e+1)}}n.d(t,{B:function(){return o},O:function(){return a}})},27942:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});var o=n(16688);let a=(0,n(92944).EN)();class i{async getItem(e){try{return await (0,o.U2)(e)||a.getItem(e)}catch(t){return a.getItem(e)}}async setItem(e,t){try{var n;let a=JSON.parse(t);if(!(null==a?void 0:null===(n=a.state)||void 0===n?void 0:n._hasHydrated)){console.warn("skip setItem",e);return}await (0,o.t8)(e,t)}catch(n){a.setItem(e,t)}}async removeItem(e){try{await (0,o.IV)(e)}catch(t){a.removeItem(e)}}async clear(){try{await (0,o.ZH)()}catch(e){a.clear()}}}let r=new i},84802:function(e,t,n){"use strict";n.d(t,{T:function(){return function e(t,n){Object.keys(n).forEach(function(o){if(n.hasOwnProperty(o)&&n[o]&&"object"==typeof n[o]||"__proto__"===o||"constructor"===o){e(t[o]=t[o]||{},n[o]);return}t[o]=n[o]})}}})},85564:function(e,t,n){"use strict";n.d(t,{En:function(){return r},lW:function(){return l}}),n(75591);let o={val:-1e3,cache:new Map,next:e=>{if(o.cache.has(e))return o.cache.get(e);{let t=o.val++;return o.cache.set(e,t),t}}},a=e=>({id:e.toLowerCase(),providerName:e,providerType:"custom",sorted:o.next(e)}),i=e=>e.sort((e,t)=>{if(!e.provider||!t.provider)return e.sorted-t.sorted;{let n=e.provider.sorted-t.provider.sorted;return 0===n?e.sorted-t.sorted:n}});function r(e){let[t,n]=e.split(/@(?!.*@)/);return[t,n]}function l(e,t,n){return i(Object.values(function(e,t,n){let i=function(e,t){let n={};return e.forEach(e=>{var t;n["".concat(e.name,"@").concat(null==e?void 0:null===(t=e.provider)||void 0===t?void 0:t.id)]={...e,displayName:e.name}}),t.split(",").filter(e=>!!e&&e.length>0).forEach(e=>{let t=!e.startsWith("-"),[i,l]=(e.startsWith("+")||e.startsWith("-")?e.slice(1):e).split("=");if("all"===i)Object.values(n).forEach(e=>e.available=t);else{let[e,s]=r(i),c=0;for(let o in n){let[a,d]=r(o);e==a&&(void 0===s||s===d)&&(c+=1,n[o].available=t,"bytedance"===d&&([i,l]=[l,a],n[o].name=i),l&&(n[o].displayName=l))}if(0===c){let[e,s]=r(i),c=a(s||e);l&&"ByteDance"==c.providerName&&([e,l]=[l,e]),n["".concat(e,"@").concat(null==c?void 0:c.id)]={name:e,displayName:l||e,available:t,provider:c,sorted:o.next("".concat(e,"@").concat(null==c?void 0:c.id))}}}}),n}(e,t);if(n&&""!==n){if(n.includes("@"))n in i&&(i[n].isDefault=!0);else for(let e of Object.keys(i))if(i[e].available&&r(e)[0]==n){i[e].isDefault=!0;break}}return i}(e,t,n)))}},45578:function(e,t,n){"use strict";n.d(t,{D:function(){return l}});var o=n(22020),a=n(65249),i=n(20259),r=n(27942);function l(e,t,n){n.storage=(0,a.FL)(()=>r._);let l=null==n?void 0:n.onRehydrateStorage;return n.onRehydrateStorage=e=>(null==l||l(e),()=>e.setHasHydrated(!0)),(0,o.Ue)((0,a.tJ)((0,a.$e)({...e,lastUpdateTime:0,_hasHydrated:!1},(e,n)=>({...t(e,n),markUpdate(){e({lastUpdateTime:Date.now()})},update(t){let o=(0,i.I)(n());t(o),e({...o,lastUpdateTime:Date.now()})},setHasHydrated:t=>{e({_hasHydrated:t})}})),n))}},1217:function(e,t,n){"use strict";function o(e,t){if(window.__TAURI__){let n,o;let{signal:a,method:i="GET",headers:r={},body:l=[]}=t||{},s=new Promise(e=>o=e),c=new TransformStream,d=c.writable.getWriter(),u=!1,m=()=>{u||(u=!0,n&&n(),d.ready.then(()=>{d.close().catch(e=>console.error(e))}))};a&&a.addEventListener("abort",()=>m()),window.__TAURI__.event.listen("stream-response",e=>s.then(t=>{let{request_id:n,chunk:o,status:a}=(null==e?void 0:e.payload)||{};t==n&&(o?d.ready.then(()=>{d.write(new Uint8Array(o))}):0===a&&m())})).then(e=>n=e);let p={Accept:"application/json, text/plain, */*","Accept-Language":"en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7","User-Agent":navigator.userAgent};for(let e of new Headers(r||{}))p[e[0]]=e[1];return window.__TAURI__.invoke("stream_fetch",{method:i.toUpperCase(),url:e,headers:p,body:"string"==typeof l?Array.from(new TextEncoder().encode(l)):[]}).then(e=>{let{request_id:t,status:n,status_text:a,headers:i}=e;null==o||o(t);let r=new Response(c.readable,{status:n,statusText:a,headers:i});return n>=300&&setTimeout(m,100),r}).catch(e=>(console.error("stream error",e),new Response("",{status:599})))}return window.fetch(e,t)}n.d(t,{h:function(){return o}})},95282:function(e){e.exports={"auth-page":"auth_auth-page___xlla","top-banner":"auth_top-banner__c8Ojv","top-banner-inner":"auth_top-banner-inner__ldJDF","top-banner-close":"auth_top-banner-close__odCd0","top-banner-logo":"auth_top-banner-logo__dcxaG","auth-header":"auth_auth-header__0Hqhv","slide-in-from-top":"auth_slide-in-from-top___U4lF","auth-logo":"auth_auth-logo__nRpuh","auth-title":"auth_auth-title__HOqZA","auth-tips":"auth_auth-tips__RhhUb","auth-input":"auth_auth-input__qZhCU","auth-input-second":"auth_auth-input-second__SLYNw","auth-actions":"auth_auth-actions__SW4gf"}},82422:function(e){e.exports={"icon-button":"button_icon-button__VwAMf",primary:"button_primary__dwYZ6",danger:"button_danger__aE7By",shadow:"button_shadow__G4m_0",border:"button_border__F3gcK","icon-button-icon":"button_icon-button-icon__AMZta","icon-button-text":"button_icon-button-text__my76e"}},71869:function(e){e.exports={"global-scrollbar":"home_global-scrollbar__sDqQe",container:"home_container__4PEJZ","tight-container":"home_tight-container__ztaM7",sidebar:"home_sidebar__fPZfq","sidebar-header-bar":"home_sidebar-header-bar__SVjIN","sidebar-bar-button":"home_sidebar-bar-button__zJdvw","sidebar-drag":"home_sidebar-drag__G9SJI","window-content":"home_window-content__2WGYf",mobile:"home_mobile__Wfp_k","sidebar-show":"home_sidebar-show__9bQfu","sidebar-header":"home_sidebar-header___NHg_","sidebar-header-narrow":"home_sidebar-header-narrow___9iq_","sidebar-logo":"home_sidebar-logo__Cd7hL","sidebar-title-container":"home_sidebar-title-container__aX2l2","sidebar-title":"home_sidebar-title__l3KhW","slide-in":"home_slide-in__h1Bn_","sidebar-sub-title":"home_sidebar-sub-title__sbT6Z","sidebar-body":"home_sidebar-body__9zbei","chat-item":"home_chat-item__Oblai","chat-item-selected":"home_chat-item-selected__b6eBe","chat-item-title":"home_chat-item-title__sRstw","chat-item-delete":"home_chat-item-delete__3qV5m","chat-item-info":"home_chat-item-info__9r6z_","chat-item-count":"home_chat-item-count____Lpy","chat-item-date":"home_chat-item-date__NOFrp","narrow-sidebar":"home_narrow-sidebar__SFIXN","chat-item-narrow":"home_chat-item-narrow__Kd4e0","chat-item-avatar":"home_chat-item-avatar__KJu_J","chat-item-narrow-count":"home_chat-item-narrow-count__B3b3g","sidebar-tail":"home_sidebar-tail__T2_u7","sidebar-actions":"home_sidebar-actions__LcDT9","sidebar-action":"home_sidebar-action__IVfyJ","loading-content":"home_loading-content__7_JjP","rtl-screen":"home_rtl-screen__Pwr_6"}},99520:function(e){e.exports={card:"ui-lib_card__7vhpy",popover:"ui-lib_popover___HGhK","popover-content":"ui-lib_popover-content__DAsxM","slide-in":"ui-lib_slide-in__1VMXW","popover-mask":"ui-lib_popover-mask__HfrgX","list-item":"ui-lib_list-item__YH0DO","list-header":"ui-lib_list-header__RwThu","list-icon":"ui-lib_list-icon__HuWqu","list-item-title":"ui-lib_list-item-title__Fsa9c","list-item-sub-title":"ui-lib_list-item-sub-title__jSgHb",vertical:"ui-lib_vertical__HpgSa",list:"ui-lib_list__1KN23","modal-container":"ui-lib_modal-container__V07hJ","modal-container-max":"ui-lib_modal-container-max__9yDQB","modal-content":"ui-lib_modal-content___F0dm","modal-header":"ui-lib_modal-header__ez8kk","modal-title":"ui-lib_modal-title__uDyyZ","modal-header-actions":"ui-lib_modal-header-actions__sGgzm","modal-header-action":"ui-lib_modal-header-action__TQHsu","modal-footer":"ui-lib_modal-footer__U6Gef","modal-actions":"ui-lib_modal-actions__Ag5eX","modal-action":"ui-lib_modal-action__o5vae",show:"ui-lib_show__Oyrs0",hide:"ui-lib_hide__HRR6J","toast-container":"ui-lib_toast-container__t7drF","toast-content":"ui-lib_toast-content__gUAwT","toast-action":"ui-lib_toast-action__fBR8E",input:"ui-lib_input__5JXLJ","select-with-icon":"ui-lib_select-with-icon__L6FLF","left-align-option":"ui-lib_left-align-option__GsJMu","select-with-icon-select":"ui-lib_select-with-icon-select__JhHwp","select-with-icon-icon":"ui-lib_select-with-icon-icon__7R2_b","modal-input":"ui-lib_modal-input__vxrdT",selector:"ui-lib_selector__tdy57","selector-content":"ui-lib_selector-content__Ucr2_","search-wrapper":"ui-lib_search-wrapper__zOAbd","selector-search":"ui-lib_selector-search___8fSV",simple:"ui-lib_simple__NAtkV","selector-item-selected":"ui-lib_selector-item-selected__HbGJW","selector-item-disabled":"ui-lib_selector-item-disabled__ggiJt","slide-in-from-top":"ui-lib_slide-in-from-top__cfJKh"}}},function(e){e.O(0,[906,744],function(){return e(e.s=17016)}),_N_E=e.O()}]);